{
  "id": "rotate-array",
  "title": "Rotate Array",
  "pattern": "array-rotation + modulo",
  "difficulty": "easy",
  "language": "javascript",
  "status": "PERFECT",
  "standardsVersion": "lessonStandards.v1",
  "curriculum": {
    "lessonOrderTag": "FOUNDATION-05",
    "introduces": ["array-rotation", "modulo-idea"],
    "assumesAlreadyTaught": [
      "variables",
      "arrays",
      "indexes",
      "loops",
      "functions",
      "return",
      "two-pointers"
    ]
  },
  "pseudocode": [
    { "id": "ps1", "text": "Normalize k using k = k % array length." },
    { "id": "ps2", "text": "Reverse the entire array." },
    { "id": "ps3", "text": "Reverse the first k elements." },
    { "id": "ps4", "text": "Reverse the remaining elements." }
  ],
  "flow": [
    {
      "stepId": "lesson-start",
      "mentorSays": "You selected **Rotate Array**.\n\nThis lesson builds on arrays and introduces **rotation** using a clean, in-place strategy.",
      "action": "next",
      "next": "problem-statement"
    },
    {
      "stepId": "problem-statement",
      "mentorSays": "### Problem\nYou are given an array and a number `k`.\n\nRotate the array to the **right** by `k` steps.\n\nRotation means elements move forward and wrap around to the front.",
      "example": "nums = [1,2,3,4,5,6,7], k = 3",
      "action": "next",
      "next": "tiny-examples"
    },
    {
      "stepId": "tiny-examples",
      "mentorSays": "Tiny examples:\n\n1) [1,2,3,4,5], k=1 → [5,1,2,3,4]\n2) [1,2,3,4,5], k=2 → [4,5,1,2,3]",
      "action": "next",
      "next": "wrap-around-idea"
    },
    {
      "stepId": "wrap-around-idea",
      "mentorSays": "Key idea:\n\nWhen elements move past the end of the array, they **wrap around** to the front.",
      "action": "next",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Thinking challenge:\n\nIf the array length is 5 and k is 12, how many effective rotations are really needed?",
      "choices": [
        { "label": "12", "next": "modulo-explained" },
        { "label": "12 % 5", "next": "modulo-explained" }
      ]
    },
    {
      "stepId": "modulo-explained",
      "mentorSays": "Correct.\n\nRotating 5 times returns the array to its original state.\n\nSo:\n`k = k % length`\n\nThis avoids unnecessary work.",
      "action": "next",
      "next": "core-idea"
    },
    {
      "stepId": "core-idea",
      "mentorSays": "We will rotate the array **in place** using reversals:\n\n1) Reverse the whole array\n2) Reverse the first `k` elements\n3) Reverse the remaining elements\n\nThis produces the correct rotation.",
      "action": "next",
      "next": "walkthrough-mini"
    },
    {
      "stepId": "walkthrough-mini",
      "mentorSays": "Mini walkthrough:\n\nnums = [1,2,3,4,5,6,7], k=3\n\n1) Reverse all → [7,6,5,4,3,2,1]\n2) Reverse first 3 → [5,6,7,4,3,2,1]\n3) Reverse rest → [5,6,7,1,2,3,4]",
      "action": "next",
      "next": "pseudocode-step"
    },
    {
      "stepId": "pseudocode-step",
      "mentorSays": "### Pseudocode (logic plan)",
      "pseudocodeLineIds": ["ps1", "ps2", "ps3", "ps4"],
      "action": "next",
      "next": "coding-intro"
    },
    {
      "stepId": "coding-intro",
      "mentorSays": "Now we write JavaScript.\n\nWe reuse the **two-pointer reverse** logic you already learned.",
      "action": "next",
      "next": "code-01-function",
      "pseudocodeLineIds": ["ps1"]
    },
    {
      "stepId": "code-01-function",
      "mentorSays": "Step 1: Create the function.",
      "example": "function rotate(nums, k) {\n\n}",
      "action": "next",
      "next": "code-02-normalize",
      "pseudocodeLineIds": ["ps1"]
    },
    {
      "stepId": "code-02-normalize",
      "mentorSays": "Step 2: Normalize k using modulo.",
      "example": "k = k % nums.length;",
      "action": "next",
      "next": "code-03-reverse-helper",
      "pseudocodeLineIds": ["ps2"]
    },
    {
      "stepId": "code-03-reverse-helper",
      "mentorSays": "Step 3: Create a helper to reverse a portion of the array.",
      "example": "function reverse(start, end) {\n  while (start < end) {\n    const temp = nums[start];\n    nums[start] = nums[end];\n    nums[end] = temp;\n    start++;\n    end--;\n  }\n}",
      "action": "next",
      "next": "code-04-apply-reversals",
      "pseudocodeLineIds": ["ps2", "ps3", "ps4"]
    },
    {
      "stepId": "code-04-apply-reversals",
      "mentorSays": "Step 4: Apply the three reversals in order.",
      "example": "reverse(0, nums.length - 1);\nreverse(0, k - 1);\nreverse(k, nums.length - 1);",
      "action": "next",
      "next": "final-code"
    },
    {
      "stepId": "final-code",
      "mentorSays": "### Final JavaScript code",
      "example": "function rotate(nums, k) {\n  k = k % nums.length;\n\n  function reverse(start, end) {\n    while (start < end) {\n      const temp = nums[start];\n      nums[start] = nums[end];\n      nums[end] = temp;\n      start++;\n      end--;\n    }\n  }\n\n  reverse(0, nums.length - 1);\n  reverse(0, k - 1);\n  reverse(k, nums.length - 1);\n}",
      "action": "next",
      "next": "wrap-up"
    },
    {
      "stepId": "wrap-up",
      "mentorSays": "Wrap-up:\n\nYou learned:\n- how rotation works\n- why modulo simplifies large k values\n- how to reuse two-pointer reversal\n\nThis pattern appears again in many array problems.",
      "action": "complete"
    }
  ]
}
