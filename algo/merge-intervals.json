{
  "id": "merge-intervals",
  "title": "Merge Intervals",
  "pattern": "array",
  "difficulty": "medium",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "title",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand what Merge Intervals asks for\n2. Sort intervals by start time\n3. Merge overlapping intervals\n4. Handle edge cases correctly\n5. Implement the solution step by step in your chosen language",
      "action": "continue",
      "next": "problem-illustration"
    },
    {
      "stepId": "problem-illustration",
      "mentorSays": "Perfect! Now let's understand what Merge Intervals is asking.\n\n**Problem Definition:**\nGiven an array of intervals where intervals[i] = [starti, endi], merge all overlapping intervals, and return an array of the non-overlapping intervals that cover all the intervals in the input.\n\n**Example 1:** intervals = [[1,3],[2,6],[8,10],[15,18]]\n[1,3] and [2,6] overlap → merge to [1,6]\nResult: [[1,6],[8,10],[15,18]]\n\n**Key Insight:** Sort by start time, then merge if current overlaps with previous (current.start <= previous.end).",
      "example": "Example: [[1,3],[2,6],[8,10],[15,18]] → [[1,6],[8,10],[15,18]]",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "How would YOU merge overlapping intervals?",
      "choices": [
        {
          "label": "Sort then merge",
          "next": "explore-sort"
        },
        {
          "label": "Use brute force",
          "next": "explore-brute"
        },
        {
          "label": "Use sweep line",
          "next": "explore-sweep"
        }
      ]
    },
    {
      "stepId": "explore-brute",
      "mentorSays": "Brute force is O(n^2). Sorting first makes it O(n log n) and simpler.",
      "action": "continue",
      "next": "explore-sort"
    },
    {
      "stepId": "explore-sweep",
      "mentorSays": "Sweep line works but sorting is simpler and more intuitive.",
      "action": "continue",
      "next": "explore-sort"
    },
    {
      "stepId": "explore-sort",
      "mentorSays": "Sort by start time, then merge overlapping intervals. O(n log n) time.",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Great! Now let's code this solution. Which programming language would you like to use?",
      "choices": [
        {
          "label": "JavaScript",
          "next": "variable-check-js"
        },
        {
          "label": "Python",
          "next": "variable-check-python"
        },
        {
          "label": "Java",
          "next": "variable-check-java"
        },
        {
          "label": "C++",
          "next": "variable-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "variable-check-ts"
        }
      ]
    },
    {
      "stepId": "variable-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-js"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-js"
        }
      ]
    },
    {
      "stepId": "variable-explanation-js",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Do you know what a function is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-js"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-js"
        }
      ]
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function merge() {}",
      "action": "continue",
      "next": "parameter-check-js"
    },
    {
      "stepId": "parameter-check-js",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-js"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-js"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-js",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-js"
    },
    {
      "stepId": "array-check-js",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-js"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-js"
        }
      ]
    },
    {
      "stepId": "array-explanation-js",
      "mentorSays": "Arrays store elements in order. You can sort, iterate, and access elements by index.",
      "example": "let intervals = [[1,3],[2,6]]; intervals.sort((a,b) => a[0] - b[0]);",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Implement merge intervals in JS.",
      "example": "function merge(intervals) {}",
      "action": "continue",
      "next": "coding-sort-js"
    },
    {
      "stepId": "coding-sort-js",
      "mentorSays": "Sort intervals by start time.",
      "action": "continue",
      "next": "coding-init-js"
    },
    {
      "stepId": "coding-init-js",
      "mentorSays": "Initialize result array with first interval.",
      "action": "continue",
      "next": "coding-loop-js"
    },
    {
      "stepId": "coding-loop-js",
      "mentorSays": "Loop through remaining intervals.",
      "action": "continue",
      "next": "coding-check-js"
    },
    {
      "stepId": "coding-check-js",
      "mentorSays": "Check if current overlaps with last merged interval.",
      "action": "continue",
      "next": "coding-merge-js"
    },
    {
      "stepId": "coding-merge-js",
      "mentorSays": "If overlaps, merge by updating end time. Otherwise, add new interval.",
      "action": "continue",
      "next": "coding-return-js"
    },
    {
      "stepId": "coding-return-js",
      "mentorSays": "Return merged intervals.",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "test-code-js",
      "mentorSays": "Test cases:\n1. [[1,3],[2,6],[8,10],[15,18]] → [[1,6],[8,10],[15,18]]\n2. [[1,4],[4,5]] → [[1,5]]\n3. [[1,4],[5,6]] → [[1,4],[5,6]]\n4. [[1,4]] → [[1,4]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Python?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-python"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-python"
        }
      ]
    },
    {
      "stepId": "variable-explanation-python",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-python"
    },
    {
      "stepId": "function-check-python",
      "mentorSays": "Do you know what a function is in Python?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-python"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-python"
        }
      ]
    },
    {
      "stepId": "function-explanation-python",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function merge() {}",
      "action": "continue",
      "next": "parameter-check-python"
    },
    {
      "stepId": "parameter-check-python",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-python"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-python"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-python",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-python"
    },
    {
      "stepId": "array-check-python",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-python"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-python"
        }
      ]
    },
    {
      "stepId": "array-explanation-python",
      "mentorSays": "Arrays store elements in order. You can sort, iterate, and access elements by index.",
      "example": "let intervals = [[1,3],[2,6]]; intervals.sort((a,b) => a[0] - b[0]);",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "coding-start-python",
      "mentorSays": "Implement merge intervals in PYTHON.",
      "example": "function merge(intervals) {}",
      "action": "continue",
      "next": "coding-sort-python"
    },
    {
      "stepId": "coding-sort-python",
      "mentorSays": "Sort intervals by start time.",
      "action": "continue",
      "next": "coding-init-python"
    },
    {
      "stepId": "coding-init-python",
      "mentorSays": "Initialize result array with first interval.",
      "action": "continue",
      "next": "coding-loop-python"
    },
    {
      "stepId": "coding-loop-python",
      "mentorSays": "Loop through remaining intervals.",
      "action": "continue",
      "next": "coding-check-python"
    },
    {
      "stepId": "coding-check-python",
      "mentorSays": "Check if current overlaps with last merged interval.",
      "action": "continue",
      "next": "coding-merge-python"
    },
    {
      "stepId": "coding-merge-python",
      "mentorSays": "If overlaps, merge by updating end time. Otherwise, add new interval.",
      "action": "continue",
      "next": "coding-return-python"
    },
    {
      "stepId": "coding-return-python",
      "mentorSays": "Return merged intervals.",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "test-code-python",
      "mentorSays": "Test cases:\n1. [[1,3],[2,6],[8,10],[15,18]] → [[1,6],[8,10],[15,18]]\n2. [[1,4],[4,5]] → [[1,5]]\n3. [[1,4],[5,6]] → [[1,4],[5,6]]\n4. [[1,4]] → [[1,4]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Java?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-java"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-java"
        }
      ]
    },
    {
      "stepId": "variable-explanation-java",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-java"
    },
    {
      "stepId": "function-check-java",
      "mentorSays": "Do you know what a function is in Java?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-java"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-java"
        }
      ]
    },
    {
      "stepId": "function-explanation-java",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function merge() {}",
      "action": "continue",
      "next": "parameter-check-java"
    },
    {
      "stepId": "parameter-check-java",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-java"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-java"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-java",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-java"
    },
    {
      "stepId": "array-check-java",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-java"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-java"
        }
      ]
    },
    {
      "stepId": "array-explanation-java",
      "mentorSays": "Arrays store elements in order. You can sort, iterate, and access elements by index.",
      "example": "let intervals = [[1,3],[2,6]]; intervals.sort((a,b) => a[0] - b[0]);",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "coding-start-java",
      "mentorSays": "Implement merge intervals in JAVA.",
      "example": "function merge(intervals) {}",
      "action": "continue",
      "next": "coding-sort-java"
    },
    {
      "stepId": "coding-sort-java",
      "mentorSays": "Sort intervals by start time.",
      "action": "continue",
      "next": "coding-init-java"
    },
    {
      "stepId": "coding-init-java",
      "mentorSays": "Initialize result array with first interval.",
      "action": "continue",
      "next": "coding-loop-java"
    },
    {
      "stepId": "coding-loop-java",
      "mentorSays": "Loop through remaining intervals.",
      "action": "continue",
      "next": "coding-check-java"
    },
    {
      "stepId": "coding-check-java",
      "mentorSays": "Check if current overlaps with last merged interval.",
      "action": "continue",
      "next": "coding-merge-java"
    },
    {
      "stepId": "coding-merge-java",
      "mentorSays": "If overlaps, merge by updating end time. Otherwise, add new interval.",
      "action": "continue",
      "next": "coding-return-java"
    },
    {
      "stepId": "coding-return-java",
      "mentorSays": "Return merged intervals.",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "test-code-java",
      "mentorSays": "Test cases:\n1. [[1,3],[2,6],[8,10],[15,18]] → [[1,6],[8,10],[15,18]]\n2. [[1,4],[4,5]] → [[1,5]]\n3. [[1,4],[5,6]] → [[1,4],[5,6]]\n4. [[1,4]] → [[1,4]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in C++?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-cpp"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "variable-explanation-cpp",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-cpp"
    },
    {
      "stepId": "function-check-cpp",
      "mentorSays": "Do you know what a function is in C++?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-cpp"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "function-explanation-cpp",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function merge() {}",
      "action": "continue",
      "next": "parameter-check-cpp"
    },
    {
      "stepId": "parameter-check-cpp",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-cpp"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-cpp",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-cpp"
    },
    {
      "stepId": "array-check-cpp",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-cpp"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "array-explanation-cpp",
      "mentorSays": "Arrays store elements in order. You can sort, iterate, and access elements by index.",
      "example": "let intervals = [[1,3],[2,6]]; intervals.sort((a,b) => a[0] - b[0]);",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "coding-start-cpp",
      "mentorSays": "Implement merge intervals in CPP.",
      "example": "function merge(intervals) {}",
      "action": "continue",
      "next": "coding-sort-cpp"
    },
    {
      "stepId": "coding-sort-cpp",
      "mentorSays": "Sort intervals by start time.",
      "action": "continue",
      "next": "coding-init-cpp"
    },
    {
      "stepId": "coding-init-cpp",
      "mentorSays": "Initialize result array with first interval.",
      "action": "continue",
      "next": "coding-loop-cpp"
    },
    {
      "stepId": "coding-loop-cpp",
      "mentorSays": "Loop through remaining intervals.",
      "action": "continue",
      "next": "coding-check-cpp"
    },
    {
      "stepId": "coding-check-cpp",
      "mentorSays": "Check if current overlaps with last merged interval.",
      "action": "continue",
      "next": "coding-merge-cpp"
    },
    {
      "stepId": "coding-merge-cpp",
      "mentorSays": "If overlaps, merge by updating end time. Otherwise, add new interval.",
      "action": "continue",
      "next": "coding-return-cpp"
    },
    {
      "stepId": "coding-return-cpp",
      "mentorSays": "Return merged intervals.",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "test-code-cpp",
      "mentorSays": "Test cases:\n1. [[1,3],[2,6],[8,10],[15,18]] → [[1,6],[8,10],[15,18]]\n2. [[1,4],[4,5]] → [[1,5]]\n3. [[1,4],[5,6]] → [[1,4],[5,6]]\n4. [[1,4]] → [[1,4]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-ts"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-ts"
        }
      ]
    },
    {
      "stepId": "variable-explanation-ts",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-ts"
    },
    {
      "stepId": "function-check-ts",
      "mentorSays": "Do you know what a function is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-ts"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-ts"
        }
      ]
    },
    {
      "stepId": "function-explanation-ts",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function merge() {}",
      "action": "continue",
      "next": "parameter-check-ts"
    },
    {
      "stepId": "parameter-check-ts",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-ts"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-ts"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-ts",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-ts"
    },
    {
      "stepId": "array-check-ts",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-ts"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-ts"
        }
      ]
    },
    {
      "stepId": "array-explanation-ts",
      "mentorSays": "Arrays store elements in order. You can sort, iterate, and access elements by index.",
      "example": "let intervals = [[1,3],[2,6]]; intervals.sort((a,b) => a[0] - b[0]);",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "coding-start-ts",
      "mentorSays": "Implement merge intervals in TS.",
      "example": "function merge(intervals) {}",
      "action": "continue",
      "next": "coding-sort-ts"
    },
    {
      "stepId": "coding-sort-ts",
      "mentorSays": "Sort intervals by start time.",
      "action": "continue",
      "next": "coding-init-ts"
    },
    {
      "stepId": "coding-init-ts",
      "mentorSays": "Initialize result array with first interval.",
      "action": "continue",
      "next": "coding-loop-ts"
    },
    {
      "stepId": "coding-loop-ts",
      "mentorSays": "Loop through remaining intervals.",
      "action": "continue",
      "next": "coding-check-ts"
    },
    {
      "stepId": "coding-check-ts",
      "mentorSays": "Check if current overlaps with last merged interval.",
      "action": "continue",
      "next": "coding-merge-ts"
    },
    {
      "stepId": "coding-merge-ts",
      "mentorSays": "If overlaps, merge by updating end time. Otherwise, add new interval.",
      "action": "continue",
      "next": "coding-return-ts"
    },
    {
      "stepId": "coding-return-ts",
      "mentorSays": "Return merged intervals.",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "test-code-ts",
      "mentorSays": "Test cases:\n1. [[1,3],[2,6],[8,10],[15,18]] → [[1,6],[8,10],[15,18]]\n2. [[1,4],[4,5]] → [[1,5]]\n3. [[1,4],[5,6]] → [[1,4],[5,6]]\n4. [[1,4]] → [[1,4]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "final",
      "mentorSays": "Time: O(n log n), Space: O(n). Sort by start, then merge overlapping intervals.",
      "action": "continue"
    }
  ]
}