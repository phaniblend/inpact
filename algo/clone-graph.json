{
  "id": "clone-graph",
  "title": "Clone Graph",
  "pattern": "graph",
  "difficulty": "medium",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "title",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand what the Clone Graph problem asks for\n2. Use DFS or BFS to traverse the graph\n3. Use a hash map to map original nodes to cloned nodes\n4. Handle cycles in the graph\n5. Implement the solution step by step in your chosen language",
      "action": "continue",
      "next": "problem-illustration"
    },
    {
      "stepId": "problem-illustration",
      "mentorSays": "Perfect! Now let's understand what the Clone Graph problem is asking.\n\n**Problem Definition:**\nGiven a reference of a node in a connected undirected graph, return a deep copy (clone) of the graph.\n\nEach node in the graph contains a val (int) and a list (List[Node]) of its neighbors.\n\n**Key Observations:**\n- We need to create a deep copy (new nodes, not references to original)\n- Graph can have cycles (need to avoid infinite loops)\n- We need to preserve the graph structure (neighbors relationships)\n- We'll use a hash map to track original -> clone mappings\n\n**Example 1:**\nOriginal graph:\n1 -- 2\n|    |\n4 -- 3\n\nNode 1: val=1, neighbors=[2,4]\nNode 2: val=2, neighbors=[1,3]\nNode 3: val=3, neighbors=[2,4]\nNode 4: val=4, neighbors=[1,3]\n\nCloned graph (same structure, new nodes):\n1' -- 2'\n|     |\n4' -- 3'\n\n**Step-by-step trace (DFS approach):**\n\nWe'll use DFS with a hash map:\n- **clone(node 1)**:\n  - Check if node 1 already cloned: No\n  - Create clone node 1' with val=1\n  - Add to map: {1: 1'}\n  - For each neighbor [2, 4]:\n    - Clone neighbor 2: clone(2)\n    - Clone neighbor 4: clone(4)\n    - Add clones to 1'.neighbors\n  - Return 1'\n\n- **clone(node 2)**:\n  - Check map: Not found\n  - Create clone 2', add to map: {1: 1', 2: 2'}\n  - Clone neighbors [1, 3]\n  - Return 2'\n\n- **clone(node 1) again** (from node 2's neighbor):\n  - Check map: Found! Return 1' (already cloned)\n\n**Key Insight:**\nUse a hash map to track original -> clone mappings. This:\n1. Prevents infinite loops (if we've cloned a node, return the clone)\n2. Ensures all nodes point to the same clone instance\n3. Preserves the graph structure\n\n**What makes this tricky:**\n1. Handling cycles (graph can have cycles)\n2. Ensuring all nodes are cloned exactly once\n3. Preserving neighbor relationships correctly\n4. Using hash map to avoid infinite recursion\n\n**Common pitfalls:**\n- Not using hash map (infinite recursion on cycles)\n- Creating duplicate clones for same node\n- Not cloning neighbors correctly\n- Forgetting to handle null/empty graph",
      "example": "Example:\nOriginal: 1--2, 1--4, 2--3, 4--3\nClone: Same structure with new nodes",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand what the problem wants, here's the real question:\n\nHow would YOU clone a graph?\n\nThink about it for a moment. What approach feels natural to you?",
      "choices": [
        {
          "label": "Use DFS with hash map to track original->clone mappings",
          "next": "explore-dfs"
        },
        {
          "label": "Use BFS with hash map",
          "next": "explore-bfs"
        },
        {
          "label": "Create all nodes first, then connect them",
          "next": "explore-two-pass"
        }
      ]
    },
    {
      "stepId": "explore-bfs",
      "mentorSays": "That's a great approach! BFS works perfectly for this problem. You're thinking: \"I'll use a queue to process nodes level by level, and a hash map to track clones.\"\n\nThis works! However, DFS is often simpler to implement recursively.\n\nThere's a DFS approach that's equally effective. Would you like to learn that?",
      "action": "continue",
      "next": "explore-dfs"
    },
    {
      "stepId": "explore-two-pass",
      "mentorSays": "That's a systematic approach! You're thinking: \"I'll first create all clone nodes, then connect them.\"\n\nThis works! However, it requires two passes and is more complex.\n\nThere's a simpler one-pass approach using DFS or BFS. Would you like to learn that?",
      "action": "continue",
      "next": "explore-dfs"
    },
    {
      "stepId": "explore-dfs",
      "mentorSays": "Excellent choice! DFS with hash map is perfect for this problem. Here's the core idea:\n\n**The Algorithm:**\n1. **Hash map**: Map original nodes to cloned nodes\n2. **DFS function**: cloneNode(node)\n   - If node is null, return null\n   - If node already in map, return the clone (avoid cycles)\n   - Create new clone node with same val\n   - Add to map: map[node] = clone\n   - For each neighbor:\n     - Recursively clone the neighbor: cloneNode(neighbor)\n     - Add cloned neighbor to clone.neighbors\n   - Return clone\n3. **Call**: cloneNode(original node)\n\n**Why it works**:\n- Hash map prevents infinite loops (if node already cloned, return clone)\n- DFS naturally explores all nodes\n- Each node is cloned exactly once\n- Neighbor relationships are preserved\n\n**Key insight**: The hash map is crucial! It prevents cycles and ensures we reuse the same clone instance.\n\nLet's trace with graph: 1--2\n\n- **cloneNode(1)**:\n  - Not in map, create clone 1', map[1] = 1'\n  - Clone neighbor 2: cloneNode(2)\n  - Add 2' to 1'.neighbors\n  - Return 1'\n\n- **cloneNode(2)**:\n  - Not in map, create clone 2', map[2] = 2'\n  - Clone neighbor 1: cloneNode(1)\n    - 1 in map! Return 1' (already cloned)\n  - Add 1' to 2'.neighbors\n  - Return 2'\n\nResult: 1'--2' âœ“\n\nThis is O(n) time and O(n) space! Now let's code it step by step.",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Great! Now let's code this solution. Which programming language would you like to use?",
      "choices": [
        {
          "label": "JavaScript",
          "next": "variable-check-js"
        },
        {
          "label": "Python",
          "next": "variable-check-python"
        },
        {
          "label": "Java",
          "next": "variable-check-java"
        },
        {
          "label": "C++",
          "next": "variable-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "variable-check-ts"
        }
      ]
    },
    {
      "stepId": "variable-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-js"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-js"
        }
      ]
    },
    {
      "stepId": "variable-explanation-js",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let map = new Map();  // Map original -> clone",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Do you know what a function is in JavaScript?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-js"
        },
        {
          "label": "No",
          "next": "function-explanation-js"
        }
      ]
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-js"
    },
    {
      "stepId": "parameter-check-js",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-js"
        },
        {
          "label": "No",
          "next": "parameter-explanation-js"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-js",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-js"
    },
    {
      "stepId": "graph-check-js",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "hashmap-check-js"
        },
        {
          "label": "No",
          "next": "graph-explanation-js"
        }
      ]
    },
    {
      "stepId": "graph-explanation-js",
      "mentorSays": "A graph is a collection of nodes connected by edges. Each node can have neighbors.",
      "action": "continue",
      "next": "hashmap-check-js"
    },
    {
      "stepId": "hashmap-check-js",
      "mentorSays": "We'll use a hash map to track clones. Do you know what a hash map is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-js"
        },
        {
          "label": "No",
          "next": "hashmap-explanation-js"
        }
      ]
    },
    {
      "stepId": "hashmap-explanation-js",
      "mentorSays": "A hash map stores key-value pairs. We'll map original nodes to cloned nodes.",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Perfect! Let's implement clone graph in JavaScript.",
      "example": "function cloneGraph(node) {\n  \n}",
      "action": "continue",
      "next": "coding-init-map-js"
    },
    {
      "stepId": "coding-init-map-js",
      "mentorSays": "Initialize a hash map to track original -> clone mappings.",
      "example": "function cloneGraph(node) {\n  const map = new Map();\n  \n}",
      "action": "continue",
      "next": "coding-helper-js"
    },
    {
      "stepId": "coding-helper-js",
      "mentorSays": "Create a helper function that clones a node recursively.",
      "example": "function cloneGraph(node) {\n  const map = new Map();\n  \n  function cloneNode(original) {\n    // Cloning logic\n  }\n  \n}",
      "action": "continue",
      "next": "coding-base-case-js"
    },
    {
      "stepId": "coding-base-case-js",
      "mentorSays": "Handle base case: if node is null, return null.",
      "example": "function cloneGraph(node) {\n  const map = new Map();\n  \n  function cloneNode(original) {\n    if (original === null) return null;\n    \n  }\n  \n}",
      "action": "continue",
      "next": "coding-check-map-js"
    },
    {
      "stepId": "coding-check-map-js",
      "mentorSays": "Check if node already cloned: if in map, return the clone (prevents cycles).",
      "example": "function cloneGraph(node) {\n  const map = new Map();\n  \n  function cloneNode(original) {\n    if (original === null) return null;\n    \n    // If already cloned, return the clone\n    if (map.has(original)) {\n      return map.get(original);\n    }\n    \n  }\n  \n}",
      "action": "continue",
      "next": "coding-create-clone-js"
    },
    {
      "stepId": "coding-create-clone-js",
      "mentorSays": "Create a new clone node with same val, add to map.",
      "example": "function cloneGraph(node) {\n  const map = new Map();\n  \n  function cloneNode(original) {\n    if (original === null) return null;\n    \n    if (map.has(original)) {\n      return map.get(original);\n    }\n    \n    // Create clone node\n    const clone = new Node(original.val);\n    map.set(original, clone);\n    \n  }\n  \n}",
      "action": "continue",
      "next": "coding-clone-neighbors-js"
    },
    {
      "stepId": "coding-clone-neighbors-js",
      "mentorSays": "For each neighbor, recursively clone it and add to clone.neighbors. Then call helper and return.",
      "example": "function cloneGraph(node) {\n  const map = new Map();\n  \n  function cloneNode(original) {\n    if (original === null) return null;\n    \n    if (map.has(original)) {\n      return map.get(original);\n    }\n    \n    const clone = new Node(original.val);\n    map.set(original, clone);\n    \n    // Clone all neighbors\n    for (let neighbor of original.neighbors) {\n      clone.neighbors.push(cloneNode(neighbor));\n    }\n    \n    return clone;\n  }\n  \n  return cloneNode(node);\n}",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "test-code-js",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** Graph with 2 nodes: 1--2\nExpected: Cloned graph with same structure\n\n**Test 2:** Graph with 4 nodes in square: 1--2, 1--4, 2--3, 4--3\nExpected: Cloned graph with same structure\n\n**Test 3:** Single node: 1\nExpected: Cloned node 1'\n\n**Test 4:** Empty graph: null\nExpected: null\n\n**Test 5:** Graph with cycle: 1--2, 2--1\nExpected: Cloned graph with cycle preserved\n\n**Test 6:** Verify clones are deep copies (not references to original)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 1--2 â†’ Clone: 1'--2'\nTest 2: Square graph â†’ Clone with same structure",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Python?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-python"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-python"
        }
      ]
    },
    {
      "stepId": "variable-explanation-python",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": " map = new Map();  // Map original -> clone",
      "action": "continue",
      "next": "function-check-python"
    },
    {
      "stepId": "function-check-python",
      "mentorSays": "Do you know what a function is in Python?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-python"
        },
        {
          "label": "No",
          "next": "function-explanation-python"
        }
      ]
    },
    {
      "stepId": "function-explanation-python",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-python"
    },
    {
      "stepId": "parameter-check-python",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-python"
        },
        {
          "label": "No",
          "next": "parameter-explanation-python"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-python",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-python"
    },
    {
      "stepId": "graph-check-python",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "hashmap-check-python"
        },
        {
          "label": "No",
          "next": "graph-explanation-python"
        }
      ]
    },
    {
      "stepId": "graph-explanation-python",
      "mentorSays": "A graph is a collection of nodes connected by edges. Each node can have neighbors.",
      "action": "continue",
      "next": "hashmap-check-python"
    },
    {
      "stepId": "hashmap-check-python",
      "mentorSays": "We'll use a hash map to track clones. Do you know what a hash map is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-python"
        },
        {
          "label": "No",
          "next": "hashmap-explanation-python"
        }
      ]
    },
    {
      "stepId": "hashmap-explanation-python",
      "mentorSays": "A hash map stores key-value pairs. We'll map original nodes to cloned nodes.",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "coding-start-python",
      "mentorSays": "Perfect! Let's implement the solution in Python.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-init-map-python"
    },
    {
      "stepId": "coding-init-map-python",
      "mentorSays": "Initialize hash map.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-helper-python"
    },
    {
      "stepId": "coding-helper-python",
      "mentorSays": "Create clone helper function.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-base-case-python"
    },
    {
      "stepId": "coding-base-case-python",
      "mentorSays": "Handle base case (null node).",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-check-map-python"
    },
    {
      "stepId": "coding-check-map-python",
      "mentorSays": "Check if node already in map.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-create-clone-python"
    },
    {
      "stepId": "coding-create-clone-python",
      "mentorSays": "Create clone node and add to map.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-clone-neighbors-python"
    },
    {
      "stepId": "coding-clone-neighbors-python",
      "mentorSays": "Clone neighbors recursively, return clone.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "test-code-python",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** Graph with 2 nodes: 1--2\nExpected: Cloned graph with same structure\n\n**Test 2:** Graph with 4 nodes in square: 1--2, 1--4, 2--3, 4--3\nExpected: Cloned graph with same structure\n\n**Test 3:** Single node: 1\nExpected: Cloned node 1'\n\n**Test 4:** Empty graph: null\nExpected: null\n\n**Test 5:** Graph with cycle: 1--2, 2--1\nExpected: Cloned graph with cycle preserved\n\n**Test 6:** Verify clones are deep copies (not references to original)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 1--2 â†’ Clone: 1'--2'\nTest 2: Square graph â†’ Clone with same structure",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Java?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-java"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-java"
        }
      ]
    },
    {
      "stepId": "variable-explanation-java",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "Node map = new Map();  // Map original -> clone",
      "action": "continue",
      "next": "function-check-java"
    },
    {
      "stepId": "function-check-java",
      "mentorSays": "Do you know what a function is in Java?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-java"
        },
        {
          "label": "No",
          "next": "function-explanation-java"
        }
      ]
    },
    {
      "stepId": "function-explanation-java",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-java"
    },
    {
      "stepId": "parameter-check-java",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-java"
        },
        {
          "label": "No",
          "next": "parameter-explanation-java"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-java",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-java"
    },
    {
      "stepId": "graph-check-java",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "hashmap-check-java"
        },
        {
          "label": "No",
          "next": "graph-explanation-java"
        }
      ]
    },
    {
      "stepId": "graph-explanation-java",
      "mentorSays": "A graph is a collection of nodes connected by edges. Each node can have neighbors.",
      "action": "continue",
      "next": "hashmap-check-java"
    },
    {
      "stepId": "hashmap-check-java",
      "mentorSays": "We'll use a hash map to track clones. Do you know what a hash map is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-java"
        },
        {
          "label": "No",
          "next": "hashmap-explanation-java"
        }
      ]
    },
    {
      "stepId": "hashmap-explanation-java",
      "mentorSays": "A hash map stores key-value pairs. We'll map original nodes to cloned nodes.",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "coding-start-java",
      "mentorSays": "Perfect! Let's implement the solution in Java.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-init-map-java"
    },
    {
      "stepId": "coding-init-map-java",
      "mentorSays": "Initialize hash map.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-helper-java"
    },
    {
      "stepId": "coding-helper-java",
      "mentorSays": "Create clone helper function.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-base-case-java"
    },
    {
      "stepId": "coding-base-case-java",
      "mentorSays": "Handle base case (null node).",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-check-map-java"
    },
    {
      "stepId": "coding-check-map-java",
      "mentorSays": "Check if node already in map.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-create-clone-java"
    },
    {
      "stepId": "coding-create-clone-java",
      "mentorSays": "Create clone node and add to map.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-clone-neighbors-java"
    },
    {
      "stepId": "coding-clone-neighbors-java",
      "mentorSays": "Clone neighbors recursively, return clone.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "test-code-java",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** Graph with 2 nodes: 1--2\nExpected: Cloned graph with same structure\n\n**Test 2:** Graph with 4 nodes in square: 1--2, 1--4, 2--3, 4--3\nExpected: Cloned graph with same structure\n\n**Test 3:** Single node: 1\nExpected: Cloned node 1'\n\n**Test 4:** Empty graph: null\nExpected: null\n\n**Test 5:** Graph with cycle: 1--2, 2--1\nExpected: Cloned graph with cycle preserved\n\n**Test 6:** Verify clones are deep copies (not references to original)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 1--2 â†’ Clone: 1'--2'\nTest 2: Square graph â†’ Clone with same structure",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in C++?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-cpp"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "variable-explanation-cpp",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "Node* map = new Map();  // Map original -> clone",
      "action": "continue",
      "next": "function-check-cpp"
    },
    {
      "stepId": "function-check-cpp",
      "mentorSays": "Do you know what a function is in C++?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-cpp"
        },
        {
          "label": "No",
          "next": "function-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "function-explanation-cpp",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-cpp"
    },
    {
      "stepId": "parameter-check-cpp",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-cpp"
        },
        {
          "label": "No",
          "next": "parameter-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-cpp",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-cpp"
    },
    {
      "stepId": "graph-check-cpp",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "hashmap-check-cpp"
        },
        {
          "label": "No",
          "next": "graph-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "graph-explanation-cpp",
      "mentorSays": "A graph is a collection of nodes connected by edges. Each node can have neighbors.",
      "action": "continue",
      "next": "hashmap-check-cpp"
    },
    {
      "stepId": "hashmap-check-cpp",
      "mentorSays": "We'll use a hash map to track clones. Do you know what a hash map is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-cpp"
        },
        {
          "label": "No",
          "next": "hashmap-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "hashmap-explanation-cpp",
      "mentorSays": "A hash map stores key-value pairs. We'll map original nodes to cloned nodes.",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "coding-start-cpp",
      "mentorSays": "Perfect! Let's implement the solution in C++.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-init-map-cpp"
    },
    {
      "stepId": "coding-init-map-cpp",
      "mentorSays": "Initialize hash map.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-helper-cpp"
    },
    {
      "stepId": "coding-helper-cpp",
      "mentorSays": "Create clone helper function.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-base-case-cpp"
    },
    {
      "stepId": "coding-base-case-cpp",
      "mentorSays": "Handle base case (null node).",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-check-map-cpp"
    },
    {
      "stepId": "coding-check-map-cpp",
      "mentorSays": "Check if node already in map.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-create-clone-cpp"
    },
    {
      "stepId": "coding-create-clone-cpp",
      "mentorSays": "Create clone node and add to map.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-clone-neighbors-cpp"
    },
    {
      "stepId": "coding-clone-neighbors-cpp",
      "mentorSays": "Clone neighbors recursively, return clone.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "test-code-cpp",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** Graph with 2 nodes: 1--2\nExpected: Cloned graph with same structure\n\n**Test 2:** Graph with 4 nodes in square: 1--2, 1--4, 2--3, 4--3\nExpected: Cloned graph with same structure\n\n**Test 3:** Single node: 1\nExpected: Cloned node 1'\n\n**Test 4:** Empty graph: null\nExpected: null\n\n**Test 5:** Graph with cycle: 1--2, 2--1\nExpected: Cloned graph with cycle preserved\n\n**Test 6:** Verify clones are deep copies (not references to original)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 1--2 â†’ Clone: 1'--2'\nTest 2: Square graph â†’ Clone with same structure",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-ts"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-ts"
        }
      ]
    },
    {
      "stepId": "variable-explanation-ts",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let map = new Map();  // Map original -> clone",
      "action": "continue",
      "next": "function-check-ts"
    },
    {
      "stepId": "function-check-ts",
      "mentorSays": "Do you know what a function is in TypeScript?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-ts"
        },
        {
          "label": "No",
          "next": "function-explanation-ts"
        }
      ]
    },
    {
      "stepId": "function-explanation-ts",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-ts"
    },
    {
      "stepId": "parameter-check-ts",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-ts"
        },
        {
          "label": "No",
          "next": "parameter-explanation-ts"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-ts",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-ts"
    },
    {
      "stepId": "graph-check-ts",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "hashmap-check-ts"
        },
        {
          "label": "No",
          "next": "graph-explanation-ts"
        }
      ]
    },
    {
      "stepId": "graph-explanation-ts",
      "mentorSays": "A graph is a collection of nodes connected by edges. Each node can have neighbors.",
      "action": "continue",
      "next": "hashmap-check-ts"
    },
    {
      "stepId": "hashmap-check-ts",
      "mentorSays": "We'll use a hash map to track clones. Do you know what a hash map is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-ts"
        },
        {
          "label": "No",
          "next": "hashmap-explanation-ts"
        }
      ]
    },
    {
      "stepId": "hashmap-explanation-ts",
      "mentorSays": "A hash map stores key-value pairs. We'll map original nodes to cloned nodes.",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "coding-start-ts",
      "mentorSays": "Perfect! Let's implement the solution in TypeScript.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-init-map-ts"
    },
    {
      "stepId": "coding-init-map-ts",
      "mentorSays": "Initialize hash map.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-helper-ts"
    },
    {
      "stepId": "coding-helper-ts",
      "mentorSays": "Create clone helper function.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-base-case-ts"
    },
    {
      "stepId": "coding-base-case-ts",
      "mentorSays": "Handle base case (null node).",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-check-map-ts"
    },
    {
      "stepId": "coding-check-map-ts",
      "mentorSays": "Check if node already in map.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-create-clone-ts"
    },
    {
      "stepId": "coding-create-clone-ts",
      "mentorSays": "Create clone node and add to map.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-clone-neighbors-ts"
    },
    {
      "stepId": "coding-clone-neighbors-ts",
      "mentorSays": "Clone neighbors recursively, return clone.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "test-code-ts",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** Graph with 2 nodes: 1--2\nExpected: Cloned graph with same structure\n\n**Test 2:** Graph with 4 nodes in square: 1--2, 1--4, 2--3, 4--3\nExpected: Cloned graph with same structure\n\n**Test 3:** Single node: 1\nExpected: Cloned node 1'\n\n**Test 4:** Empty graph: null\nExpected: null\n\n**Test 5:** Graph with cycle: 1--2, 2--1\nExpected: Cloned graph with cycle preserved\n\n**Test 6:** Verify clones are deep copies (not references to original)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 1--2 â†’ Clone: 1'--2'\nTest 2: Square graph â†’ Clone with same structure",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "final",
      "mentorSays": "ðŸŽ‰ Well done! You've successfully implemented Clone Graph!\n\n**Time Complexity:** O(n)\n- We visit each node exactly once\n- Each node's neighbors are processed once\n\n**Space Complexity:** O(n)\n- Hash map uses O(n) space\n- Recursion stack uses O(n) space in worst case\n\n**Key Takeaways:**\n1. **Hash map is crucial**: Prevents cycles and ensures each node cloned once\n2. **DFS/BFS**: Both work, DFS is often simpler\n3. **Deep copy**: Create new nodes, not references\n4. **Neighbor relationships**: Preserve the graph structure\n5. **Cycle handling**: Hash map automatically handles cycles\n\n**Related Practice Problems:**\n- Copy List with Random Pointer (LeetCode #138) - similar concept\n- Clone Binary Tree (similar structure)\n- Graph Valid Tree (LeetCode #261) - graph validation\n\nKeep practicing graph problems - they're common in interviews!",
      "action": "continue"
    }
  ]
}