{
  "id": "insertion-sort",
  "title": "Insertion sort",
  "pattern": "sorting",
  "difficulty": "easy",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "title",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand how insertion sort works\n2. Insert each element into its correct position in the sorted portion\n3. Shift elements to make room for insertion\n4. Implement insertion sort step by step in your chosen language",
      "action": "continue",
      "next": "problem-illustration"
    },
    {
      "stepId": "problem-illustration",
      "mentorSays": "Perfect! Now let's understand what Insertion Sort does.\n\nImagine you have an unsorted array: [5, 2, 8, 1, 9]\n\nYour task: Sort it in ascending order (smallest to largest).\n\nInsertion sort works like sorting cards in your hand! You pick up each card (element) and insert it into its correct position in the already sorted portion.\n\nLet's trace through the algorithm:\n\n**Initial**: [5, 2, 8, 1, 9]\n- Sorted portion: [5] (first element is always sorted)\n- Current element: 2 at index 1\n- Insert 2: Compare with 5, 2 < 5, shift 5 right, insert 2 â†’ [2, 5, 8, 1, 9]\n\n**After iteration 1**: [2, 5, 8, 1, 9]\n- Sorted portion: [2, 5]\n- Current element: 8 at index 2\n- Insert 8: Compare with 5, 8 > 5, already in place â†’ [2, 5, 8, 1, 9]\n\n**After iteration 2**: [2, 5, 8, 1, 9]\n- Sorted portion: [2, 5, 8]\n- Current element: 1 at index 3\n- Insert 1: Compare with 8, 1 < 8, shift 8 right\n- Compare with 5, 1 < 5, shift 5 right\n- Compare with 2, 1 < 2, shift 2 right\n- Insert 1 at index 0 â†’ [1, 2, 5, 8, 9]\n\n**After iteration 3**: [1, 2, 5, 8, 9]\n- Sorted portion: [1, 2, 5, 8]\n- Current element: 9 at index 4\n- Insert 9: Compare with 8, 9 > 8, already in place â†’ [1, 2, 5, 8, 9]\n\n**Final**: [1, 2, 5, 8, 9] (sorted!)\n\nEach iteration inserts the next element into its correct position in the sorted portion.",
      "example": "nums = [5, 2, 8, 1, 9]\n\nIteration 1: Insert 2 â†’ Compare with 5, shift 5, insert 2 â†’ [2, 5, 8, 1, 9]\nIteration 2: Insert 8 â†’ Compare with 5, 8 > 5, in place â†’ [2, 5, 8, 1, 9]\nIteration 3: Insert 1 â†’ Compare with 8,5,2, shift all, insert 1 â†’ [1, 2, 5, 8, 9]\nIteration 4: Insert 9 â†’ Compare with 8, 9 > 8, in place â†’ [1, 2, 5, 8, 9]\n\nFinal: [1, 2, 5, 8, 9]",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand what insertion sort does, here's the real question:\n\nHow would YOU implement insertion sort?\n\nThink about it for a moment. What approach feels natural to you?",
      "choices": [
        {
          "label": "Use nested loops: outer loop for each element, inner loop to find insertion position",
          "next": "explore-nested-loops"
        },
        {
          "label": "Use a single loop and binary search to find insertion position",
          "next": "explore-binary-search"
        },
        {
          "label": "Use recursion to sort smaller portions",
          "next": "explore-recursion"
        }
      ]
    },
    {
      "stepId": "explore-binary-search",
      "mentorSays": "Great thinking! Binary search can find the insertion position faster, but it makes the code more complex. The standard approach uses nested loops which is simpler and more intuitive.\n\nLet's learn the standard nested loops approach, which is the most common way to implement insertion sort.",
      "action": "continue",
      "next": "explore-nested-loops"
    },
    {
      "stepId": "explore-recursion",
      "mentorSays": "Recursion is creative thinking! However, insertion sort is typically implemented iteratively (with loops) rather than recursively. The iterative approach is simpler and more intuitive for this algorithm.\n\nLet's learn the standard nested loops approach, which is the most common way to implement insertion sort.",
      "action": "continue",
      "next": "explore-nested-loops"
    },
    {
      "stepId": "explore-nested-loops",
      "mentorSays": "Excellent choice! The nested loops approach is the standard way to implement insertion sort. Here's the core idea:\n\n1. **Outer loop**: Iterate through each element starting from index 1 (first element is already sorted).\n2. **Store current element**: Save the element we're inserting (it might get overwritten during shifting).\n3. **Inner loop**: Move backwards through the sorted portion, shifting elements right until we find the correct position.\n4. **Insert**: Place the stored element in its correct position.\n\nLet's trace this with [5, 2, 8, 1, 9]:\n\n- **Iteration 1** (i=1, element=2):\n  - Store: key = 2\n  - j = 0: Compare 2 with arr[0]=5, 2 < 5, shift 5 right â†’ [5, 5, 8, 1, 9]\n  - j = -1: Stop, insert key at index 0 â†’ [2, 5, 8, 1, 9]\n\n- **Iteration 2** (i=2, element=8):\n  - Store: key = 8\n  - j = 1: Compare 8 with arr[1]=5, 8 > 5, stop\n  - Insert key at index 2 (already in place) â†’ [2, 5, 8, 1, 9]\n\n- **Iteration 3** (i=3, element=1):\n  - Store: key = 1\n  - j = 2: Compare 1 with arr[2]=8, 1 < 8, shift 8 right â†’ [2, 5, 8, 8, 9]\n  - j = 1: Compare 1 with arr[1]=5, 1 < 5, shift 5 right â†’ [2, 5, 5, 8, 9]\n  - j = 0: Compare 1 with arr[0]=2, 1 < 2, shift 2 right â†’ [2, 2, 5, 8, 9]\n  - j = -1: Stop, insert key at index 0 â†’ [1, 2, 5, 8, 9]\n\n- **Iteration 4** (i=4, element=9):\n  - Store: key = 9\n  - j = 3: Compare 9 with arr[3]=8, 9 > 8, stop\n  - Insert key at index 4 (already in place) â†’ [1, 2, 5, 8, 9]\n\nThis is O(nÂ²) time complexity in worst case, but O(n) for nearly sorted arrays! Now let's code it step by step.",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Great! Now let's code this solution. Which programming language would you like to use?",
      "choices": [
        {
          "label": "JavaScript",
          "next": "main-variables-check-js"
        },
        {
          "label": "Python",
          "next": "variable-check-python"
        },
        {
          "label": "Java",
          "next": "variable-check-java"
        },
        {
          "label": "C++",
          "next": "variable-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "variable-check-ts"
        }
      ]
    },
    {
      "stepId": "main-variables-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-functions-check-js"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-js"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-js",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in JavaScript, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-js"
    },
    {
      "stepId": "main-functions-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-parameters-check-js"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-js"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-js",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the function does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-js"
    },
    {
      "stepId": "main-parameters-check-js",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-loops-check-js"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-js"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-js",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-js"
    },
    {
      "stepId": "main-loops-check-js",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "coding-start-js"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-js"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-js",
      "mentorSays": "A nested loop is a loop inside another loop. The outer loop runs once, and for each iteration, the inner loop runs completely.\n\nFor example, 'for (let i = 0; i < 2; i++)' with a nested 'for (let j = 0; j < 3; j++)' means: for each i (0, 1), run j from 0 to 2.",
      "example": "for (let i = 0; i < 2; i++) {\n  for (let j = 0; j < 3; j++) {\n    console.log(i, j);\n  }\n}\n\nThis prints: (0,0), (0,1), (0,2), (1,0), (1,1), (1,2)",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Perfect! Let's implement insertion sort in JavaScript. We'll create a function that takes an array and sorts it in-place by inserting each element into its correct position.",
      "example": "function insertionSort(arr) {\n  // Your code here\n}",
      "action": "continue",
      "next": "coding-outer-loop-js"
    },
    {
      "stepId": "coding-outer-loop-js",
      "mentorSays": "First, let's create the outer loop. This loop starts from index 1 (the first element is already sorted) and goes through each element.",
      "example": "function insertionSort(arr) {\n  const n = arr.length;\n  \n  // Outer loop: start from index 1\n  for (let i = 1; i < n; i++) {\n    // Each iteration inserts arr[i] into the sorted portion\n  }\n}",
      "action": "continue",
      "next": "coding-store-key-js"
    },
    {
      "stepId": "coding-store-key-js",
      "mentorSays": "Store the current element in a variable called 'key'. We'll need it later because elements might shift and overwrite it.",
      "example": "function insertionSort(arr) {\n  const n = arr.length;\n  \n  for (let i = 1; i < n; i++) {\n    // Store the element we're inserting\n    const key = arr[i];\n    // Now find where to insert it\n  }\n}",
      "action": "continue",
      "next": "coding-inner-loop-js"
    },
    {
      "stepId": "coding-inner-loop-js",
      "mentorSays": "Now, let's create the inner loop. This loop moves backwards through the sorted portion (from i-1 to 0), shifting elements right until we find the correct position for key.",
      "example": "function insertionSort(arr) {\n  const n = arr.length;\n  \n  for (let i = 1; i < n; i++) {\n    const key = arr[i];\n    let j = i - 1;\n    \n    // Inner loop: shift elements right while key is smaller\n    while (j >= 0 && arr[j] > key) {\n      arr[j + 1] = arr[j];\n      j--;\n    }\n  }\n}",
      "action": "continue",
      "next": "coding-insert-js"
    },
    {
      "stepId": "coding-insert-js",
      "mentorSays": "Finally, insert the key at position j+1. This is the correct position where all elements to the left are smaller than key.",
      "example": "function insertionSort(arr) {\n  const n = arr.length;\n  \n  for (let i = 1; i < n; i++) {\n    const key = arr[i];\n    let j = i - 1;\n    \n    // Shift elements right while key is smaller\n    while (j >= 0 && arr[j] > key) {\n      arr[j + 1] = arr[j];\n      j--;\n    }\n    \n    // Insert key at the correct position\n    arr[j + 1] = key;\n  }\n}",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "test-code-js",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [5, 2, 8, 1, 9]\n\nAfter calling insertionSort(arr), the array should be:\n[1, 2, 5, 8, 9]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [5, 2, 8, 1, 9]\n\nAfter insertionSort(arr):\narr = [1, 2, 5, 8, 9]\n\nAll elements are sorted in ascending order.",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "main-variables-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Python?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-functions-check-python"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-python"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-python",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in Python, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-python"
    },
    {
      "stepId": "main-functions-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in Python?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-parameters-check-python"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-python"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-python",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the function does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-python"
    },
    {
      "stepId": "main-parameters-check-python",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-loops-check-python"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-python"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-python",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-python"
    },
    {
      "stepId": "main-loops-check-python",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in Python?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "coding-start-python"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-python"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-python",
      "mentorSays": "A nested loop is a loop inside another loop. The outer loop runs once, and for each iteration, the inner loop runs completely.",
      "example": "for i in range(2):\n    for j in range(3):\n        print(i, j)\n\nThis prints: (0,0), (0,1), (0,2), (1,0), (1,1), (1,2)",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "coding-start-python",
      "mentorSays": "Perfect! Let's implement insertion sort in Python. We'll create a function that takes a list and sorts it in-place by inserting each element into its correct position.",
      "example": "def insertion_sort(arr):\n    # Your code here\n    pass",
      "action": "continue",
      "next": "coding-outer-loop-python"
    },
    {
      "stepId": "coding-outer-loop-python",
      "mentorSays": "First, let's create the outer loop. This loop starts from index 1 (the first element is already sorted) and goes through each element.",
      "example": "def insertion_sort(arr):\n    n = len(arr)\n    \n    # Outer loop: start from index 1\n    for i in range(1, n):\n        # Each iteration inserts arr[i] into the sorted portion",
      "action": "continue",
      "next": "coding-store-key-python"
    },
    {
      "stepId": "coding-store-key-python",
      "mentorSays": "Store the current element in a variable called 'key'. We'll need it later because elements might shift and overwrite it.",
      "example": "def insertion_sort(arr):\n    n = len(arr)\n    \n    for i in range(1, n):\n        # Store the element we're inserting\n        key = arr[i]\n        # Now find where to insert it",
      "action": "continue",
      "next": "coding-inner-loop-python"
    },
    {
      "stepId": "coding-inner-loop-python",
      "mentorSays": "Now, let's create the inner loop. This loop moves backwards through the sorted portion, shifting elements right until we find the correct position for key.",
      "example": "def insertion_sort(arr):\n    n = len(arr)\n    \n    for i in range(1, n):\n        key = arr[i]\n        j = i - 1\n        \n        # Inner loop: shift elements right while key is smaller\n        while j >= 0 and arr[j] > key:\n            arr[j + 1] = arr[j]\n            j -= 1",
      "action": "continue",
      "next": "coding-insert-python"
    },
    {
      "stepId": "coding-insert-python",
      "mentorSays": "Finally, insert the key at position j+1. This is the correct position where all elements to the left are smaller than key.",
      "example": "def insertion_sort(arr):\n    n = len(arr)\n    \n    for i in range(1, n):\n        key = arr[i]\n        j = i - 1\n        \n        # Shift elements right while key is smaller\n        while j >= 0 and arr[j] > key:\n            arr[j + 1] = arr[j]\n            j -= 1\n        \n        # Insert key at the correct position\n        arr[j + 1] = key",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "test-code-python",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [5, 2, 8, 1, 9]\n\nAfter calling insertion_sort(arr), the list should be:\n[1, 2, 5, 8, 9]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [5, 2, 8, 1, 9]\n\nAfter insertion_sort(arr):\narr = [1, 2, 5, 8, 9]",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "main-variables-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Java?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-functions-check-java"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-java"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-java",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in Java, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-java"
    },
    {
      "stepId": "main-functions-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a method is in Java?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-parameters-check-java"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-java"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-java",
      "mentorSays": "A method is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the method does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-java"
    },
    {
      "stepId": "main-parameters-check-java",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-loops-check-java"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-java"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-java",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-java"
    },
    {
      "stepId": "main-loops-check-java",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in Java?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "coding-start-java"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-java"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-java",
      "mentorSays": "A nested loop is a loop inside another loop. The outer loop runs once, and for each iteration, the inner loop runs completely.",
      "example": "for (int i = 0; i < 2; i++) {\n    for (int j = 0; j < 3; j++) {\n        System.out.println(i + \" \" + j);\n    }\n}",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "coding-start-java",
      "mentorSays": "Perfect! Let's implement insertion sort in Java. We'll create a method that takes an array and sorts it in-place by inserting each element into its correct position.",
      "example": "public void insertionSort(int[] arr) {\n    // Your code here\n}",
      "action": "continue",
      "next": "coding-outer-loop-java"
    },
    {
      "stepId": "coding-outer-loop-java",
      "mentorSays": "First, let's create the outer loop. This loop starts from index 1 (the first element is already sorted) and goes through each element.",
      "example": "public void insertionSort(int[] arr) {\n    int n = arr.length;\n    \n    // Outer loop: start from index 1\n    for (int i = 1; i < n; i++) {\n        // Each iteration inserts arr[i] into the sorted portion\n    }\n}",
      "action": "continue",
      "next": "coding-store-key-java"
    },
    {
      "stepId": "coding-store-key-java",
      "mentorSays": "Store the current element in a variable called 'key'. We'll need it later because elements might shift and overwrite it.",
      "example": "public void insertionSort(int[] arr) {\n    int n = arr.length;\n    \n    for (int i = 1; i < n; i++) {\n        // Store the element we're inserting\n        int key = arr[i];\n        // Now find where to insert it\n    }\n}",
      "action": "continue",
      "next": "coding-inner-loop-java"
    },
    {
      "stepId": "coding-inner-loop-java",
      "mentorSays": "Now, let's create the inner loop. This loop moves backwards through the sorted portion, shifting elements right until we find the correct position for key.",
      "example": "public void insertionSort(int[] arr) {\n    int n = arr.length;\n    \n    for (int i = 1; i < n; i++) {\n        int key = arr[i];\n        int j = i - 1;\n        \n        // Inner loop: shift elements right while key is smaller\n        while (j >= 0 && arr[j] > key) {\n            arr[j + 1] = arr[j];\n            j--;\n        }\n    }\n}",
      "action": "continue",
      "next": "coding-insert-java"
    },
    {
      "stepId": "coding-insert-java",
      "mentorSays": "Finally, insert the key at position j+1. This is the correct position where all elements to the left are smaller than key.",
      "example": "public void insertionSort(int[] arr) {\n    int n = arr.length;\n    \n    for (int i = 1; i < n; i++) {\n        int key = arr[i];\n        int j = i - 1;\n        \n        // Shift elements right while key is smaller\n        while (j >= 0 && arr[j] > key) {\n            arr[j + 1] = arr[j];\n            j--;\n        }\n        \n        // Insert key at the correct position\n        arr[j + 1] = key;\n    }\n}",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "test-code-java",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [5, 2, 8, 1, 9]\n\nAfter calling insertionSort(arr), the array should be:\n[1, 2, 5, 8, 9]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [5, 2, 8, 1, 9]\n\nAfter insertionSort(arr):\narr = [1, 2, 5, 8, 9]",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "main-variables-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in C++?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-functions-check-cpp"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-cpp",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in C++, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-cpp"
    },
    {
      "stepId": "main-functions-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in C++?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-parameters-check-cpp"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-cpp",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the function does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-cpp"
    },
    {
      "stepId": "main-parameters-check-cpp",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-loops-check-cpp"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-cpp",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-cpp"
    },
    {
      "stepId": "main-loops-check-cpp",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in C++?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "coding-start-cpp"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-cpp",
      "mentorSays": "A nested loop is a loop inside another loop. The outer loop runs once, and for each iteration, the inner loop runs completely.",
      "example": "for (int i = 0; i < 2; i++) {\n    for (int j = 0; j < 3; j++) {\n        cout << i << \" \" << j << endl;\n    }\n}",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "coding-start-cpp",
      "mentorSays": "Perfect! Let's implement insertion sort in C++. We'll create a function that takes a vector and sorts it in-place by inserting each element into its correct position.",
      "example": "void insertionSort(vector<int>& arr) {\n    // Your code here\n}",
      "action": "continue",
      "next": "coding-outer-loop-cpp"
    },
    {
      "stepId": "coding-outer-loop-cpp",
      "mentorSays": "First, let's create the outer loop. This loop starts from index 1 (the first element is already sorted) and goes through each element.",
      "example": "void insertionSort(vector<int>& arr) {\n    int n = arr.size();\n    \n    // Outer loop: start from index 1\n    for (int i = 1; i < n; i++) {\n        // Each iteration inserts arr[i] into the sorted portion\n    }\n}",
      "action": "continue",
      "next": "coding-store-key-cpp"
    },
    {
      "stepId": "coding-store-key-cpp",
      "mentorSays": "Store the current element in a variable called 'key'. We'll need it later because elements might shift and overwrite it.",
      "example": "void insertionSort(vector<int>& arr) {\n    int n = arr.size();\n    \n    for (int i = 1; i < n; i++) {\n        // Store the element we're inserting\n        int key = arr[i];\n        // Now find where to insert it\n    }\n}",
      "action": "continue",
      "next": "coding-inner-loop-cpp"
    },
    {
      "stepId": "coding-inner-loop-cpp",
      "mentorSays": "Now, let's create the inner loop. This loop moves backwards through the sorted portion, shifting elements right until we find the correct position for key.",
      "example": "void insertionSort(vector<int>& arr) {\n    int n = arr.size();\n    \n    for (int i = 1; i < n; i++) {\n        int key = arr[i];\n        int j = i - 1;\n        \n        // Inner loop: shift elements right while key is smaller\n        while (j >= 0 && arr[j] > key) {\n            arr[j + 1] = arr[j];\n            j--;\n        }\n    }\n}",
      "action": "continue",
      "next": "coding-insert-cpp"
    },
    {
      "stepId": "coding-insert-cpp",
      "mentorSays": "Finally, insert the key at position j+1. This is the correct position where all elements to the left are smaller than key.",
      "example": "void insertionSort(vector<int>& arr) {\n    int n = arr.size();\n    \n    for (int i = 1; i < n; i++) {\n        int key = arr[i];\n        int j = i - 1;\n        \n        // Shift elements right while key is smaller\n        while (j >= 0 && arr[j] > key) {\n            arr[j + 1] = arr[j];\n            j--;\n        }\n        \n        // Insert key at the correct position\n        arr[j + 1] = key;\n    }\n}",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "test-code-cpp",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [5, 2, 8, 1, 9]\n\nAfter calling insertionSort(arr), the vector should be:\n[1, 2, 5, 8, 9]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [5, 2, 8, 1, 9]\n\nAfter insertionSort(arr):\narr = [1, 2, 5, 8, 9]",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "main-variables-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "main-functions-check-ts"
        },
        {
          "label": "No, explain variables",
          "next": "main-variables-explanation-ts"
        }
      ]
    },
    {
      "stepId": "main-variables-explanation-ts",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'numbers') and put data inside it.\n\nFor example, in TypeScript, you can create a variable that stores an array. Later, you can use that variable name to refer to the array.",
      "example": "numbers = [3, 7, 2, 9, 5]\n\nNow the variable refers to the array\nWe can use the variable name to access this array",
      "action": "continue",
      "next": "main-function-check-ts"
    },
    {
      "stepId": "main-functions-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "main-parameters-check-ts"
        },
        {
          "label": "No, explain functions",
          "next": "main-functions-explanation-ts"
        }
      ]
    },
    {
      "stepId": "main-functions-explanation-ts",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the function does the work, and gives you a result (return value).",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "main-parameter-check-ts"
    },
    {
      "stepId": "main-parameters-check-ts",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "main-loops-check-ts"
        },
        {
          "label": "No, explain parameters",
          "next": "main-parameters-explanation-ts"
        }
      ]
    },
    {
      "stepId": "main-parameters-explanation-ts",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function findMax(arr)', the 'arr' is a parameter - it's a placeholder that will receive an actual array when you call the function.\n\nWhen you call 'findMax([3, 7, 2, 9, 5])', the array [3, 7, 2, 9, 5] gets passed into the function and stored in the 'arr' parameter. Inside the function, you can use 'arr' to refer to that array.",
      "example": "function findMax(arr) {\n  // 'arr' is a parameter\n}\n\nfindMax([3, 7, 2, 9, 5]);\n// The array goes into 'arr'",
      "action": "continue",
      "next": "main-loop-check-ts"
    },
    {
      "stepId": "main-loops-check-ts",
      "mentorSays": "To solve this, we'll need to use a loop. Do you know what a loop is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know loops",
          "next": "coding-start-ts"
        },
        {
          "label": "No, explain loops",
          "next": "main-loops-explanation-ts"
        }
      ]
    },
    {
      "stepId": "main-loops-explanation-ts",
      "mentorSays": "A nested loop is a loop inside another loop. The outer loop runs once, and for each iteration, the inner loop runs completely.",
      "example": "for (let i = 0; i < 2; i++) {\n    for (let j = 0; j < 3; j++) {\n        console.log(i, j);\n    }\n}",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "coding-start-ts",
      "mentorSays": "Perfect! Let's implement insertion sort in TypeScript. We'll create a function that takes an array and sorts it in-place by inserting each element into its correct position.",
      "example": "function insertionSort(arr: number[]): void {\n    // Your code here\n}",
      "action": "continue",
      "next": "coding-outer-loop-ts"
    },
    {
      "stepId": "coding-outer-loop-ts",
      "mentorSays": "First, let's create the outer loop. This loop starts from index 1 (the first element is already sorted) and goes through each element.",
      "example": "function insertionSort(arr: number[]): void {\n    const n: number = arr.length;\n    \n    // Outer loop: start from index 1\n    for (let i = 1; i < n; i++) {\n        // Each iteration inserts arr[i] into the sorted portion\n    }\n}",
      "action": "continue",
      "next": "coding-store-key-ts"
    },
    {
      "stepId": "coding-store-key-ts",
      "mentorSays": "Store the current element in a variable called 'key'. We'll need it later because elements might shift and overwrite it.",
      "example": "function insertionSort(arr: number[]): void {\n    const n: number = arr.length;\n    \n    for (let i = 1; i < n; i++) {\n        // Store the element we're inserting\n        const key: number = arr[i];\n        // Now find where to insert it\n    }\n}",
      "action": "continue",
      "next": "coding-inner-loop-ts"
    },
    {
      "stepId": "coding-inner-loop-ts",
      "mentorSays": "Now, let's create the inner loop. This loop moves backwards through the sorted portion, shifting elements right until we find the correct position for key.",
      "example": "function insertionSort(arr: number[]): void {\n    const n: number = arr.length;\n    \n    for (let i = 1; i < n; i++) {\n        const key: number = arr[i];\n        let j: number = i - 1;\n        \n        // Inner loop: shift elements right while key is smaller\n        while (j >= 0 && arr[j] > key) {\n            arr[j + 1] = arr[j];\n            j--;\n        }\n    }\n}",
      "action": "continue",
      "next": "coding-insert-ts"
    },
    {
      "stepId": "coding-insert-ts",
      "mentorSays": "Finally, insert the key at position j+1. This is the correct position where all elements to the left are smaller than key.",
      "example": "function insertionSort(arr: number[]): void {\n    const n: number = arr.length;\n    \n    for (let i = 1; i < n; i++) {\n        const key: number = arr[i];\n        let j: number = i - 1;\n        \n        // Shift elements right while key is smaller\n        while (j >= 0 && arr[j] > key) {\n            arr[j + 1] = arr[j];\n            j--;\n        }\n        \n        // Insert key at the correct position\n        arr[j + 1] = key;\n    }\n}",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "test-code-ts",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [5, 2, 8, 1, 9]\n\nAfter calling insertionSort(arr), the array should be:\n[1, 2, 5, 8, 9]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [5, 2, 8, 1, 9]\n\nAfter insertionSort(arr):\narr = [1, 2, 5, 8, 9]",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "final",
      "mentorSays": "ðŸŽ‰ Well done! You've learned insertion sort. You understand how it inserts each element into its correct position in the sorted portion.\n\nInsertion sort is efficient for small arrays and nearly sorted arrays (O(n) best case). It's also stable and in-place! Keep practicing!",
      "action": "continue"
    }
  ]
}