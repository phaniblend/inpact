{
  "id": "kth-smallest-bst",
  "title": "Kth Smallest Element in BST",
  "pattern": "tree",
  "difficulty": "medium",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "title",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand what the Kth Smallest Element in BST problem asks for\n2. Use inorder traversal to get elements in sorted order\n3. Track the kth element during traversal\n4. Optimize with early termination\n5. Implement the solution step by step in your chosen language",
      "action": "continue",
      "next": "problem-illustration"
    },
    {
      "stepId": "problem-illustration",
      "mentorSays": "Perfect! Now let's understand what the Kth Smallest Element in BST problem is asking.\n\n**Problem Definition:**\nGiven the root of a binary search tree (BST) and an integer `k`, return the kth smallest value (1-indexed) of all the values of the nodes in the tree.\n\n**Key Observations:**\n- BST property: left < root < right\n- Inorder traversal of BST gives elements in sorted order\n- We need the kth smallest element (1-indexed, so k=1 is the smallest)\n- We can optimize by stopping early when we find the kth element\n\n**Example 1:**\nTree:\n    3\n   / \\\n  1   4\n   \\\n    2\n\nk = 1\n\nInorder traversal: [1, 2, 3, 4]\n1st smallest: 1\n\nAnswer: 1\n\n**Example 2:**\nSame tree, k = 3\n\nInorder traversal: [1, 2, 3, 4]\n3rd smallest: 3\n\nAnswer: 3\n\n**Step-by-step trace for Example 2 (Inorder traversal approach):**\n\nTree:\n    3\n   / \\\n  1   4\n   \\\n    2\n\nk = 3\n\nWe'll use inorder traversal with a counter:\n- **traverse(3)**:\n  - Go left: traverse(1)\n  - Visit 3: count = 3, found! Return 3 âœ“\n\n- **traverse(1)**:\n  - Go left: traverse(null) = null\n  - Visit 1: count = 1\n  - Go right: traverse(2)\n\n- **traverse(2)**:\n  - Go left: traverse(null) = null\n  - Visit 2: count = 2\n  - Go right: traverse(null) = null\n\n**Key Insight:**\nInorder traversal of a BST visits nodes in sorted order! So the kth node visited is the kth smallest element.\n\n**What makes this tricky:**\n1. Understanding that inorder traversal gives sorted order in BST\n2. Tracking which element we're on (counter)\n3. Early termination when we find the kth element\n4. Handling 1-indexed vs 0-indexed\n\n**Common pitfalls:**\n- Not using inorder traversal\n- Not tracking the counter correctly\n- Not stopping early (inefficient)\n- Off-by-one errors (1-indexed vs 0-indexed)",
      "example": "Example 1:\n    3\n   / \\\n  1   4\n   \\\n    2\n\nk=1 â†’ 1\nk=3 â†’ 3",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand what the problem wants, here's the real question:\n\nHow would YOU find the kth smallest element in a BST?\n\nThink about it for a moment. What approach feels natural to you?",
      "choices": [
        {
          "label": "Use inorder traversal - kth node visited is the kth smallest",
          "next": "explore-inorder"
        },
        {
          "label": "Store all values in array, sort, return kth",
          "next": "explore-sort"
        },
        {
          "label": "Use a priority queue/heap",
          "next": "explore-heap"
        }
      ]
    },
    {
      "stepId": "explore-sort",
      "mentorSays": "That's a straightforward approach! You're thinking: \"I'll collect all values, sort them, and return the kth.\"\n\nThis works! However, it's inefficient:\n- O(n) space to store all values\n- O(n log n) time to sort (even though BST is already sorted!)\n- Doesn't use the BST property\n\nThere's a more efficient approach using inorder traversal that uses the BST property. Would you like to learn that?",
      "action": "continue",
      "next": "explore-inorder"
    },
    {
      "stepId": "explore-heap",
      "mentorSays": "That's a creative approach! You're thinking: \"I'll use a heap to find the kth smallest.\"\n\nThis works, but it's more complex than needed and doesn't use the BST property.\n\nThere's a simpler approach using inorder traversal that leverages the BST structure. Would you like to learn that?",
      "action": "continue",
      "next": "explore-inorder"
    },
    {
      "stepId": "explore-inorder",
      "mentorSays": "Excellent choice! Inorder traversal is perfect for this problem. Here's the core idea:\n\n**The Algorithm:**\n1. **Use inorder traversal**: Visit left, then root, then right\n2. **Track counter**: Count how many nodes we've visited\n3. **Early termination**: When counter == k, we found it! Return the value\n4. **Return value**: The kth node visited is the kth smallest\n\n**Why it works**:\n- BST property ensures inorder traversal gives sorted order\n- The kth node visited in inorder = kth smallest element\n- We can stop early when we find it (optimization)\n\n**Key insight**: Inorder traversal of BST = sorted order! So we just need to visit k nodes.\n\nLet's trace with tree:\n    3\n   / \\\n  1   4\n   \\\n    2\n\nk = 3\n\n- **Inorder traversal**:\n  - Visit 1 (count = 1)\n  - Visit 2 (count = 2)\n  - Visit 3 (count = 3) â†’ Found! Return 3 âœ“\n\nThis is O(h + k) time (h to reach smallest, k to find kth) and O(h) space! Now let's code it step by step.",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Great! Now let's code this solution. Which programming language would you like to use?",
      "choices": [
        {
          "label": "JavaScript",
          "next": "variable-check-js"
        },
        {
          "label": "Python",
          "next": "variable-check-python"
        },
        {
          "label": "Java",
          "next": "variable-check-java"
        },
        {
          "label": "C++",
          "next": "variable-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "variable-check-ts"
        }
      ]
    },
    {
      "stepId": "variable-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-js"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-js"
        }
      ]
    },
    {
      "stepId": "variable-explanation-js",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let count = 0;  // Counter for visited nodes",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Do you know what a function is in JavaScript?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-js"
        },
        {
          "label": "No",
          "next": "function-explanation-js"
        }
      ]
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-js"
    },
    {
      "stepId": "parameter-check-js",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "bst-check-js"
        },
        {
          "label": "No",
          "next": "parameter-explanation-js"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-js",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "bst-check-js"
    },
    {
      "stepId": "bst-check-js",
      "mentorSays": "To solve this, we need to understand BST. Do you know what a BST is?",
      "choices": [
        {
          "label": "Yes",
          "next": "inorder-check-js"
        },
        {
          "label": "No",
          "next": "bst-explanation-js"
        }
      ]
    },
    {
      "stepId": "bst-explanation-js",
      "mentorSays": "BST (Binary Search Tree) has property: left < root < right. Inorder traversal gives sorted order.",
      "action": "continue",
      "next": "inorder-check-js"
    },
    {
      "stepId": "inorder-check-js",
      "mentorSays": "We'll use inorder traversal. Do you know what inorder traversal is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-js"
        },
        {
          "label": "No",
          "next": "inorder-explanation-js"
        }
      ]
    },
    {
      "stepId": "inorder-explanation-js",
      "mentorSays": "Inorder: visit left, then root, then right. For BST, this gives sorted order.",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Perfect! Let's implement kth smallest in JavaScript.",
      "example": "function kthSmallest(root, k) {\n  \n}",
      "action": "continue",
      "next": "coding-init-js"
    },
    {
      "stepId": "coding-init-js",
      "mentorSays": "Initialize a counter to track how many nodes we've visited.",
      "example": "function kthSmallest(root, k) {\n  let count = 0;\n  let result = null;\n  \n}",
      "action": "continue",
      "next": "coding-helper-js"
    },
    {
      "stepId": "coding-helper-js",
      "mentorSays": "Create a helper function for inorder traversal.",
      "example": "function kthSmallest(root, k) {\n  let count = 0;\n  let result = null;\n  \n  function inorder(node) {\n    // Traversal logic\n  }\n  \n}",
      "action": "continue",
      "next": "coding-base-case-js"
    },
    {
      "stepId": "coding-base-case-js",
      "mentorSays": "Handle base case: if node is null, return.",
      "example": "function kthSmallest(root, k) {\n  let count = 0;\n  let result = null;\n  \n  function inorder(node) {\n    if (node === null) return;\n    \n  }\n  \n}",
      "action": "continue",
      "next": "coding-visit-left-js"
    },
    {
      "stepId": "coding-visit-left-js",
      "mentorSays": "Recursively visit left subtree first (inorder: left before root).",
      "example": "function kthSmallest(root, k) {\n  let count = 0;\n  let result = null;\n  \n  function inorder(node) {\n    if (node === null) return;\n    \n    inorder(node.left);  // Visit left first\n    \n  }\n  \n}",
      "action": "continue",
      "next": "coding-visit-root-js"
    },
    {
      "stepId": "coding-visit-root-js",
      "mentorSays": "Visit current node: increment count, if count == k, save result and return.",
      "example": "function kthSmallest(root, k) {\n  let count = 0;\n  let result = null;\n  \n  function inorder(node) {\n    if (node === null) return;\n    \n    inorder(node.left);\n    \n    count++;  // Visit current node\n    if (count === k) {\n      result = node.val;\n      return;\n    }\n    \n  }\n  \n}",
      "action": "continue",
      "next": "coding-visit-right-js"
    },
    {
      "stepId": "coding-visit-right-js",
      "mentorSays": "Recursively visit right subtree, call helper, and return result.",
      "example": "function kthSmallest(root, k) {\n  let count = 0;\n  let result = null;\n  \n  function inorder(node) {\n    if (node === null) return;\n    \n    inorder(node.left);\n    \n    count++;\n    if (count === k) {\n      result = node.val;\n      return;\n    }\n    \n    inorder(node.right);  // Visit right\n  }\n  \n  inorder(root);\n  return result;\n}",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "test-code-js",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** root = [3,1,4,null,2], k = 1\nExpected: 1 (1st smallest)\n\n**Test 2:** Same tree, k = 3\nExpected: 3 (3rd smallest)\n\n**Test 3:** root = [5,3,6,2,4,null,null,1], k = 3\nExpected: 3\n\n**Test 4:** root = [1], k = 1\nExpected: 1\n\n**Test 5:** root = [2,1], k = 2\nExpected: 2\n\n**Test 6:** root = [5,3,6,2,4,null,null,1], k = 4\nExpected: 4\n\nTry these in your IDE or code editor!",
      "example": "Test 1: [3,1,4,null,2], k=1 â†’ 1\nTest 2: Same, k=3 â†’ 3",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Python?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-python"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-python"
        }
      ]
    },
    {
      "stepId": "variable-explanation-python",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": " count = 0;  // Counter for visited nodes",
      "action": "continue",
      "next": "function-check-python"
    },
    {
      "stepId": "function-check-python",
      "mentorSays": "Do you know what a function is in Python?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-python"
        },
        {
          "label": "No",
          "next": "function-explanation-python"
        }
      ]
    },
    {
      "stepId": "function-explanation-python",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-python"
    },
    {
      "stepId": "parameter-check-python",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "bst-check-python"
        },
        {
          "label": "No",
          "next": "parameter-explanation-python"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-python",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "bst-check-python"
    },
    {
      "stepId": "bst-check-python",
      "mentorSays": "To solve this, we need to understand BST. Do you know what a BST is?",
      "choices": [
        {
          "label": "Yes",
          "next": "inorder-check-python"
        },
        {
          "label": "No",
          "next": "bst-explanation-python"
        }
      ]
    },
    {
      "stepId": "bst-explanation-python",
      "mentorSays": "BST (Binary Search Tree) has property: left < root < right. Inorder traversal gives sorted order.",
      "action": "continue",
      "next": "inorder-check-python"
    },
    {
      "stepId": "inorder-check-python",
      "mentorSays": "We'll use inorder traversal. Do you know what inorder traversal is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-python"
        },
        {
          "label": "No",
          "next": "inorder-explanation-python"
        }
      ]
    },
    {
      "stepId": "inorder-explanation-python",
      "mentorSays": "Inorder: visit left, then root, then right. For BST, this gives sorted order.",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "coding-start-python",
      "mentorSays": "Perfect! Let's implement the solution in Python.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-init-python"
    },
    {
      "stepId": "coding-init-python",
      "mentorSays": "Initialize counter and result.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-helper-python"
    },
    {
      "stepId": "coding-helper-python",
      "mentorSays": "Create inorder helper function.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-base-case-python"
    },
    {
      "stepId": "coding-base-case-python",
      "mentorSays": "Handle base case (null node).",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-visit-left-python"
    },
    {
      "stepId": "coding-visit-left-python",
      "mentorSays": "Visit left subtree.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-visit-root-python"
    },
    {
      "stepId": "coding-visit-root-python",
      "mentorSays": "Visit root, check if kth element.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-visit-right-python"
    },
    {
      "stepId": "coding-visit-right-python",
      "mentorSays": "Visit right subtree, call helper, return result.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "test-code-python",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** root = [3,1,4,null,2], k = 1\nExpected: 1 (1st smallest)\n\n**Test 2:** Same tree, k = 3\nExpected: 3 (3rd smallest)\n\n**Test 3:** root = [5,3,6,2,4,null,null,1], k = 3\nExpected: 3\n\n**Test 4:** root = [1], k = 1\nExpected: 1\n\n**Test 5:** root = [2,1], k = 2\nExpected: 2\n\n**Test 6:** root = [5,3,6,2,4,null,null,1], k = 4\nExpected: 4\n\nTry these in your IDE or code editor!",
      "example": "Test 1: [3,1,4,null,2], k=1 â†’ 1\nTest 2: Same, k=3 â†’ 3",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Java?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-java"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-java"
        }
      ]
    },
    {
      "stepId": "variable-explanation-java",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "int count = 0;  // Counter for visited nodes",
      "action": "continue",
      "next": "function-check-java"
    },
    {
      "stepId": "function-check-java",
      "mentorSays": "Do you know what a function is in Java?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-java"
        },
        {
          "label": "No",
          "next": "function-explanation-java"
        }
      ]
    },
    {
      "stepId": "function-explanation-java",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-java"
    },
    {
      "stepId": "parameter-check-java",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "bst-check-java"
        },
        {
          "label": "No",
          "next": "parameter-explanation-java"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-java",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "bst-check-java"
    },
    {
      "stepId": "bst-check-java",
      "mentorSays": "To solve this, we need to understand BST. Do you know what a BST is?",
      "choices": [
        {
          "label": "Yes",
          "next": "inorder-check-java"
        },
        {
          "label": "No",
          "next": "bst-explanation-java"
        }
      ]
    },
    {
      "stepId": "bst-explanation-java",
      "mentorSays": "BST (Binary Search Tree) has property: left < root < right. Inorder traversal gives sorted order.",
      "action": "continue",
      "next": "inorder-check-java"
    },
    {
      "stepId": "inorder-check-java",
      "mentorSays": "We'll use inorder traversal. Do you know what inorder traversal is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-java"
        },
        {
          "label": "No",
          "next": "inorder-explanation-java"
        }
      ]
    },
    {
      "stepId": "inorder-explanation-java",
      "mentorSays": "Inorder: visit left, then root, then right. For BST, this gives sorted order.",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "coding-start-java",
      "mentorSays": "Perfect! Let's implement the solution in Java.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-init-java"
    },
    {
      "stepId": "coding-init-java",
      "mentorSays": "Initialize counter and result.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-helper-java"
    },
    {
      "stepId": "coding-helper-java",
      "mentorSays": "Create inorder helper function.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-base-case-java"
    },
    {
      "stepId": "coding-base-case-java",
      "mentorSays": "Handle base case (null node).",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-visit-left-java"
    },
    {
      "stepId": "coding-visit-left-java",
      "mentorSays": "Visit left subtree.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-visit-root-java"
    },
    {
      "stepId": "coding-visit-root-java",
      "mentorSays": "Visit root, check if kth element.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-visit-right-java"
    },
    {
      "stepId": "coding-visit-right-java",
      "mentorSays": "Visit right subtree, call helper, return result.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "test-code-java",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** root = [3,1,4,null,2], k = 1\nExpected: 1 (1st smallest)\n\n**Test 2:** Same tree, k = 3\nExpected: 3 (3rd smallest)\n\n**Test 3:** root = [5,3,6,2,4,null,null,1], k = 3\nExpected: 3\n\n**Test 4:** root = [1], k = 1\nExpected: 1\n\n**Test 5:** root = [2,1], k = 2\nExpected: 2\n\n**Test 6:** root = [5,3,6,2,4,null,null,1], k = 4\nExpected: 4\n\nTry these in your IDE or code editor!",
      "example": "Test 1: [3,1,4,null,2], k=1 â†’ 1\nTest 2: Same, k=3 â†’ 3",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in C++?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-cpp"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "variable-explanation-cpp",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "int count = 0;  // Counter for visited nodes",
      "action": "continue",
      "next": "function-check-cpp"
    },
    {
      "stepId": "function-check-cpp",
      "mentorSays": "Do you know what a function is in C++?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-cpp"
        },
        {
          "label": "No",
          "next": "function-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "function-explanation-cpp",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-cpp"
    },
    {
      "stepId": "parameter-check-cpp",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "bst-check-cpp"
        },
        {
          "label": "No",
          "next": "parameter-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-cpp",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "bst-check-cpp"
    },
    {
      "stepId": "bst-check-cpp",
      "mentorSays": "To solve this, we need to understand BST. Do you know what a BST is?",
      "choices": [
        {
          "label": "Yes",
          "next": "inorder-check-cpp"
        },
        {
          "label": "No",
          "next": "bst-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "bst-explanation-cpp",
      "mentorSays": "BST (Binary Search Tree) has property: left < root < right. Inorder traversal gives sorted order.",
      "action": "continue",
      "next": "inorder-check-cpp"
    },
    {
      "stepId": "inorder-check-cpp",
      "mentorSays": "We'll use inorder traversal. Do you know what inorder traversal is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-cpp"
        },
        {
          "label": "No",
          "next": "inorder-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "inorder-explanation-cpp",
      "mentorSays": "Inorder: visit left, then root, then right. For BST, this gives sorted order.",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "coding-start-cpp",
      "mentorSays": "Perfect! Let's implement the solution in C++.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-init-cpp"
    },
    {
      "stepId": "coding-init-cpp",
      "mentorSays": "Initialize counter and result.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-helper-cpp"
    },
    {
      "stepId": "coding-helper-cpp",
      "mentorSays": "Create inorder helper function.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-base-case-cpp"
    },
    {
      "stepId": "coding-base-case-cpp",
      "mentorSays": "Handle base case (null node).",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-visit-left-cpp"
    },
    {
      "stepId": "coding-visit-left-cpp",
      "mentorSays": "Visit left subtree.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-visit-root-cpp"
    },
    {
      "stepId": "coding-visit-root-cpp",
      "mentorSays": "Visit root, check if kth element.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-visit-right-cpp"
    },
    {
      "stepId": "coding-visit-right-cpp",
      "mentorSays": "Visit right subtree, call helper, return result.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "test-code-cpp",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** root = [3,1,4,null,2], k = 1\nExpected: 1 (1st smallest)\n\n**Test 2:** Same tree, k = 3\nExpected: 3 (3rd smallest)\n\n**Test 3:** root = [5,3,6,2,4,null,null,1], k = 3\nExpected: 3\n\n**Test 4:** root = [1], k = 1\nExpected: 1\n\n**Test 5:** root = [2,1], k = 2\nExpected: 2\n\n**Test 6:** root = [5,3,6,2,4,null,null,1], k = 4\nExpected: 4\n\nTry these in your IDE or code editor!",
      "example": "Test 1: [3,1,4,null,2], k=1 â†’ 1\nTest 2: Same, k=3 â†’ 3",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-ts"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-ts"
        }
      ]
    },
    {
      "stepId": "variable-explanation-ts",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let count = 0;  // Counter for visited nodes",
      "action": "continue",
      "next": "function-check-ts"
    },
    {
      "stepId": "function-check-ts",
      "mentorSays": "Do you know what a function is in TypeScript?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-ts"
        },
        {
          "label": "No",
          "next": "function-explanation-ts"
        }
      ]
    },
    {
      "stepId": "function-explanation-ts",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-ts"
    },
    {
      "stepId": "parameter-check-ts",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "bst-check-ts"
        },
        {
          "label": "No",
          "next": "parameter-explanation-ts"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-ts",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "bst-check-ts"
    },
    {
      "stepId": "bst-check-ts",
      "mentorSays": "To solve this, we need to understand BST. Do you know what a BST is?",
      "choices": [
        {
          "label": "Yes",
          "next": "inorder-check-ts"
        },
        {
          "label": "No",
          "next": "bst-explanation-ts"
        }
      ]
    },
    {
      "stepId": "bst-explanation-ts",
      "mentorSays": "BST (Binary Search Tree) has property: left < root < right. Inorder traversal gives sorted order.",
      "action": "continue",
      "next": "inorder-check-ts"
    },
    {
      "stepId": "inorder-check-ts",
      "mentorSays": "We'll use inorder traversal. Do you know what inorder traversal is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-ts"
        },
        {
          "label": "No",
          "next": "inorder-explanation-ts"
        }
      ]
    },
    {
      "stepId": "inorder-explanation-ts",
      "mentorSays": "Inorder: visit left, then root, then right. For BST, this gives sorted order.",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "coding-start-ts",
      "mentorSays": "Perfect! Let's implement the solution in TypeScript.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-init-ts"
    },
    {
      "stepId": "coding-init-ts",
      "mentorSays": "Initialize counter and result.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-helper-ts"
    },
    {
      "stepId": "coding-helper-ts",
      "mentorSays": "Create inorder helper function.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-base-case-ts"
    },
    {
      "stepId": "coding-base-case-ts",
      "mentorSays": "Handle base case (null node).",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-visit-left-ts"
    },
    {
      "stepId": "coding-visit-left-ts",
      "mentorSays": "Visit left subtree.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-visit-root-ts"
    },
    {
      "stepId": "coding-visit-root-ts",
      "mentorSays": "Visit root, check if kth element.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-visit-right-ts"
    },
    {
      "stepId": "coding-visit-right-ts",
      "mentorSays": "Visit right subtree, call helper, return result.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "test-code-ts",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** root = [3,1,4,null,2], k = 1\nExpected: 1 (1st smallest)\n\n**Test 2:** Same tree, k = 3\nExpected: 3 (3rd smallest)\n\n**Test 3:** root = [5,3,6,2,4,null,null,1], k = 3\nExpected: 3\n\n**Test 4:** root = [1], k = 1\nExpected: 1\n\n**Test 5:** root = [2,1], k = 2\nExpected: 2\n\n**Test 6:** root = [5,3,6,2,4,null,null,1], k = 4\nExpected: 4\n\nTry these in your IDE or code editor!",
      "example": "Test 1: [3,1,4,null,2], k=1 â†’ 1\nTest 2: Same, k=3 â†’ 3",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "final",
      "mentorSays": "ðŸŽ‰ Well done! You've successfully implemented Kth Smallest Element in BST!\n\n**Time Complexity:** O(h + k)\n- O(h) to reach the leftmost node (smallest)\n- O(k) to visit k nodes in inorder traversal\n- For balanced tree: O(log n + k)\n- For skewed tree: O(n + k)\n\n**Space Complexity:** O(h)\n- The recursion stack uses O(h) space\n- For balanced tree: O(log n)\n- For skewed tree: O(n)\n\n**Key Takeaways:**\n1. **Inorder = Sorted**: Inorder traversal of BST gives sorted order\n2. **Kth visited = Kth smallest**: The kth node visited is the kth smallest\n3. **Early termination**: Stop when count == k (optimization)\n4. **Counter tracking**: Use a counter to track which element we're on\n5. **BST property**: Leverages left < root < right property\n\n**Related Practice Problems:**\n- Binary Tree Inorder Traversal (LeetCode #94) - basic inorder\n- Validate Binary Search Tree (LeetCode #98) - BST validation\n- Second Minimum Node (LeetCode #671) - finding specific element\n\nKeep practicing BST problems - they're common in interviews!",
      "action": "continue"
    }
  ]
}