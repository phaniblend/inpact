{
  "id": "permutation-in-string",
  "title": "Permutation in String",
  "pattern": "sliding-window",
  "difficulty": "medium",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "objectives",
      "mentorSays": "Hey! Welcome to the Permutation in String lesson.\n\nIn this lesson, you'll learn a problem-solving pattern that shows up in coding interviews.\n\nAfter this, you'll be able to:\n- Understand the Permutation in String problem\n- Recognize the sliding-window pattern\n- Build a complete solution step-by-step\n\nLet's dive in!",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Before we dive into the problem, which programming language would you like to use?\n\nThis will help me make sure you have the right building blocks.",
      "choices": [
        {
          "label": "JavaScript",
          "next": "prereq-check-js"
        },
        {
          "label": "Python",
          "next": "prereq-check-python"
        },
        {
          "label": "Java",
          "next": "prereq-check-java"
        },
        {
          "label": "C++",
          "next": "prereq-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "prereq-check-ts"
        }
      ]
    },
    {
      "stepId": "prereq-check-js",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in JavaScript, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-js"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-js"
        }
      ]
    },
    {
      "stepId": "prereq-check-python",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in Python, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-python"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-python"
        }
      ]
    },
    {
      "stepId": "prereq-check-java",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in Java, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-java"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-java"
        }
      ]
    },
    {
      "stepId": "prereq-check-cpp",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in C++, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-cpp"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-cpp"
        }
      ]
    },
    {
      "stepId": "prereq-check-ts",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in TypeScript, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-ts"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-ts"
        }
      ]
    },
    {
      "stepId": "teach-all-prereqs-js",
      "mentorSays": "Great! Let me teach you the JavaScript concepts you'll need.",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Do you understand what a function is in JavaScript?",
      "example": "",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function groups logic into a reusable unit.\n\nWe'll write a function that:\n- Takes s1 and s2 as input\n- Returns true or false",
      "example": "function checkInclusion(s1, s2) {\n  return true;\n}",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "loop-check-js",
      "mentorSays": "Are you comfortable using loops?",
      "example": "",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "loop-explanation-js",
      "mentorSays": "Loops let us process each character step by step.\n\nWe'll loop over s2 once while sliding the window.",
      "example": "for (let i = 0; i < s2.length; i++) {\n  // process s2[i]\n}",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "teach-all-prereqs-python",
      "mentorSays": "Let me explain the Python concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "teach-all-prereqs-java",
      "mentorSays": "Let me explain the Java concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "teach-all-prereqs-cpp",
      "mentorSays": "Let me explain the C++ concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "teach-all-prereqs-ts",
      "mentorSays": "Let me explain the TypeScript concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "problem-understanding",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand what it means for a string to contain a permutation of another string\n2. Use a fixed-size sliding window to track character frequencies\n3. Explain why window expansion and contraction work for this problem\n4. Implement the solution step by step in multiple languages\n5. Analyze time and space complexity confidently",
      "example": null,
      "action": "continue",
      "next": "approach-exploration"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand the problem, how would YOU approach solving it?\n\nThink about it for a moment.",
      "choices": [
        {
          "label": "Check every possibility",
          "next": "explore-brute-force"
        },
        {
          "label": "Use a smarter approach",
          "next": "explore-optimal"
        },
        {
          "label": "I'm not sure, show me",
          "next": "explore-optimal"
        }
      ]
    },
    {
      "stepId": "explore-solution",
      "mentorSays": "Let me show you the optimal approach for this problem. [Strategy will be extracted from original lesson]",
      "action": "continue",
      "next": "solution-finalized"
    },
    {
      "stepId": "approach-exploration",
      "mentorSays": "Now that you understand the problem, let's think about how to solve it.\n\nWhat approach feels natural to you?",
      "choices": [
        {
          "label": "Try the straightforward approach first",
          "next": "explore-solution"
        },
        {
          "label": "Show me the optimal solution",
          "next": "explore-solution"
        }
      ]
    },
    {
      "stepId": "explore-brute-force",
      "mentorSays": "The brute force approach would check every possibility.\n\nThis works but is usually slow (O(n squared) or worse).\n\nLet's look at a smarter approach!",
      "action": "continue",
      "next": "explore-optimal"
    },
    {
      "stepId": "explore-optimal",
      "mentorSays": "The optimal approach uses a smarter strategy to avoid unnecessary work.\n\n[Strategy details will be added in Phase 2]",
      "action": "continue",
      "next": "solution-finalized"
    },
    {
      "stepId": "solution-finalized",
      "mentorSays": "Perfect! We've explored the approach. Now let's code the optimal solution.\n\nReady to write some code?",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Let's start coding.\n\nWe define the function and handle a quick edge case.",
      "example": "function checkInclusion(s1, s2) {\n  if (s1.length > s2.length) return false;\n\n  // we'll fill the rest next\n}",
      "action": "continue",
      "next": "coding-build-s1-freq-js"
    },
    {
      "stepId": "coding-build-s1-freq-js",
      "mentorSays": "First, build the frequency map for s1.\n\nThis defines what a valid permutation looks like.",
      "example": "function checkInclusion(s1, s2) {\n  if (s1.length > s2.length) return false;\n\n  let need = {};\n  for (let ch of s1) {\n    need[ch] = (need[ch] || 0) + 1;\n  }\n\n  // next: build window state\n}",
      "action": "continue",
      "next": "coding-init-window-js"
    },
    {
      "stepId": "coding-init-window-js",
      "mentorSays": "Now initialize the sliding window state.",
      "example": "function checkInclusion(s1, s2) {\n  if (s1.length > s2.length) return false;\n\n  let need = {};\n  for (let ch of s1) {\n    need[ch] = (need[ch] || 0) + 1;\n  }\n\n  let window = {};\n  let left = 0;\n  let matched = 0;\n\n  // next: expand with right pointer\n}",
      "action": "continue",
      "next": "coding-expand-window-js"
    },
    {
      "stepId": "coding-expand-window-js",
      "mentorSays": "We expand the window by moving the right pointer.\n\nEach new character updates the window frequency.",
      "example": "function checkInclusion(s1, s2) {\n  if (s1.length > s2.length) return false;\n\n  let need = {};\n  for (let ch of s1) {\n    need[ch] = (need[ch] || 0) + 1;\n  }\n\n  let window = {};\n  let left = 0;\n  let matched = 0;\n\n  for (let right = 0; right < s2.length; right++) {\n    let ch = s2[right];\n    window[ch] = (window[ch] || 0) + 1;\n\n    // next: update matched for this character\n  }\n\n  return false;\n}",
      "action": "continue",
      "next": "coding-check-match-js"
    },
    {
      "stepId": "coding-check-match-js",
      "mentorSays": "After adding a character, check if it satisfies the needed frequency.",
      "example": "function checkInclusion(s1, s2) {\n  if (s1.length > s2.length) return false;\n\n  let need = {};\n  for (let ch of s1) {\n    need[ch] = (need[ch] || 0) + 1;\n  }\n\n  let window = {};\n  let left = 0;\n  let matched = 0;\n\n  for (let right = 0; right < s2.length; right++) {\n    let ch = s2[right];\n    window[ch] = (window[ch] || 0) + 1;\n\n    if (need[ch] && window[ch] === need[ch]) {\n      matched++;\n    }\n\n    // next: shrink when window is too big\n  }\n\n  return false;\n}",
      "action": "continue",
      "next": "coding-shrink-window-js"
    },
    {
      "stepId": "coding-shrink-window-js",
      "mentorSays": "If window size exceeds s1 length, shrink from the left.",
      "example": "function checkInclusion(s1, s2) {\n  if (s1.length > s2.length) return false;\n\n  let need = {};\n  for (let ch of s1) {\n    need[ch] = (need[ch] || 0) + 1;\n  }\n\n  let window = {};\n  let left = 0;\n  let matched = 0;\n\n  for (let right = 0; right < s2.length; right++) {\n    let ch = s2[right];\n    window[ch] = (window[ch] || 0) + 1;\n\n    if (need[ch] && window[ch] === need[ch]) {\n      matched++;\n    }\n\n    while (right - left + 1 > s1.length) {\n      let leftChar = s2[left];\n      if (need[leftChar] && window[leftChar] === need[leftChar]) {\n        matched--;\n      }\n      window[leftChar]--;\n      left++;\n    }\n\n    // next: if all matched, return true\n  }\n\n  return false;\n}",
      "action": "continue",
      "next": "coding-found-permutation-js"
    },
    {
      "stepId": "coding-found-permutation-js",
      "mentorSays": "If all characters match, we found a permutation.",
      "example": "function checkInclusion(s1, s2) {\n  if (s1.length > s2.length) return false;\n\n  let need = {};\n  for (let ch of s1) {\n    need[ch] = (need[ch] || 0) + 1;\n  }\n\n  let window = {};\n  let left = 0;\n  let matched = 0;\n\n  for (let right = 0; right < s2.length; right++) {\n    let ch = s2[right];\n    window[ch] = (window[ch] || 0) + 1;\n\n    if (need[ch] && window[ch] === need[ch]) {\n      matched++;\n    }\n\n    while (right - left + 1 > s1.length) {\n      let leftChar = s2[left];\n      if (need[leftChar] && window[leftChar] === need[leftChar]) {\n        matched--;\n      }\n      window[leftChar]--;\n      left++;\n    }\n\n    if (matched === Object.keys(need).length) {\n      return true;\n    }\n  }\n\n  return false;\n}",
      "action": "continue",
      "next": "coding-return-js"
    },
    {
      "stepId": "coding-return-js",
      "mentorSays": "If the loop finishes without a match, return false.",
      "example": "function checkInclusion(s1, s2) {\n  if (s1.length > s2.length) return false;\n\n  let need = {};\n  for (let ch of s1) {\n    need[ch] = (need[ch] || 0) + 1;\n  }\n\n  let window = {};\n  let left = 0;\n  let matched = 0;\n\n  for (let right = 0; right < s2.length; right++) {\n    let ch = s2[right];\n    window[ch] = (window[ch] || 0) + 1;\n\n    if (need[ch] && window[ch] === need[ch]) {\n      matched++;\n    }\n\n    while (right - left + 1 > s1.length) {\n      let leftChar = s2[left];\n      if (need[leftChar] && window[leftChar] === need[leftChar]) {\n        matched--;\n      }\n      window[leftChar]--;\n      left++;\n    }\n\n    if (matched === Object.keys(need).length) {\n      return true;\n    }\n  }\n\n  return false;\n}",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "completion",
      "mentorSays": "ðŸŽ‰ **Congratulations!** You just solved Permutation in String!\n\n**What you've mastered:**\nâœ“ Understanding the problem requirements\nâœ“ Choosing an efficient approach\nâœ“ Building a complete solution from scratch\n\nYou're now ready to tackle more algorithms. Keep going! ðŸš€",
      "action": "complete"
    }
  ],
  "migrated": true,
  "migration_version": "5.0-light-touch",
  "migration_date": "2025-12-30"
}