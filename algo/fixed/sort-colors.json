{
  "id": "sort-colors",
  "title": "Sort colors (Dutch flag variant)",
  "pattern": "sorting",
  "difficulty": "medium",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "objectives",
      "mentorSays": "Hey! Welcome to the Sort colors (Dutch flag variant) lesson.\n\nIn this lesson, you'll learn a problem-solving pattern that shows up in coding interviews.\n\nAfter this, you'll be able to:\n- Understand the Sort colors (Dutch flag variant) problem\n- Recognize the sorting pattern\n- Build a complete solution step-by-step\n\nLet's dive in!",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Before we dive into the problem, which programming language would you like to use?\n\nThis will help me make sure you have the right building blocks.",
      "choices": [
        {
          "label": "JavaScript",
          "next": "prereq-check-js"
        },
        {
          "label": "Python",
          "next": "prereq-check-python"
        },
        {
          "label": "Java",
          "next": "prereq-check-java"
        },
        {
          "label": "C++",
          "next": "prereq-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "prereq-check-ts"
        }
      ]
    },
    {
      "stepId": "prereq-check-js",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in JavaScript, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-js"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-js"
        }
      ]
    },
    {
      "stepId": "prereq-check-python",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in Python, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-python"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-python"
        }
      ]
    },
    {
      "stepId": "prereq-check-java",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in Java, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-java"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-java"
        }
      ]
    },
    {
      "stepId": "prereq-check-cpp",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in C++, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-cpp"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-cpp"
        }
      ]
    },
    {
      "stepId": "prereq-check-ts",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in TypeScript, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-ts"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-ts"
        }
      ]
    },
    {
      "stepId": "teach-all-prereqs-js",
      "mentorSays": "Great! Let me teach you the JavaScript concepts you'll need.",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in JavaScript?",
      "example": "",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "teach-all-prereqs-python",
      "mentorSays": "Let me explain the Python concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "teach-all-prereqs-java",
      "mentorSays": "Let me explain the Java concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "teach-all-prereqs-cpp",
      "mentorSays": "Let me explain the C++ concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "teach-all-prereqs-ts",
      "mentorSays": "Let me explain the TypeScript concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "problem-understanding",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand how to sort an array with only 3 distinct values\n2. Use three pointers to partition the array into three sections\n3. Sort in one pass without using extra space\n4. Implement the solution step by step in your chosen language",
      "example": null,
      "action": "continue",
      "next": "approach-exploration"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand the problem, how would YOU approach solving it?\n\nThink about it for a moment.",
      "choices": [
        {
          "label": "Check every possibility",
          "next": "explore-brute-force"
        },
        {
          "label": "Use a smarter approach",
          "next": "explore-optimal"
        },
        {
          "label": "I'm not sure, show me",
          "next": "explore-optimal"
        }
      ]
    },
    {
      "stepId": "explore-solution",
      "mentorSays": "Let me show you the optimal approach for this problem. [Strategy will be extracted from original lesson]",
      "action": "continue",
      "next": "solution-finalized"
    },
    {
      "stepId": "approach-exploration",
      "mentorSays": "Now that you understand the problem, let's think about how to solve it.\n\nWhat approach feels natural to you?",
      "choices": [
        {
          "label": "Try the straightforward approach first",
          "next": "explore-solution"
        },
        {
          "label": "Show me the optimal solution",
          "next": "explore-solution"
        }
      ]
    },
    {
      "stepId": "explore-brute-force",
      "mentorSays": "The brute force approach would check every possibility.\n\nThis works but is usually slow (O(n squared) or worse).\n\nLet's look at a smarter approach!",
      "action": "continue",
      "next": "explore-optimal"
    },
    {
      "stepId": "explore-optimal",
      "mentorSays": "The optimal approach uses a smarter strategy to avoid unnecessary work.\n\n[Strategy details will be added in Phase 2]",
      "action": "continue",
      "next": "solution-finalized"
    },
    {
      "stepId": "solution-finalized",
      "mentorSays": "Perfect! We've explored the approach. Now let's code the optimal solution.\n\nReady to write some code?",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Perfect! Let's implement sort colors in JavaScript. We'll create a function that uses three pointers to sort the array in-place.",
      "example": "function sortColors(nums) {\n  // Your code here\n}",
      "action": "continue",
      "next": "coding-initialize-pointers-js"
    },
    {
      "stepId": "coding-initialize-pointers-js",
      "mentorSays": "Initialize three pointers: left (boundary for 0s), current (scanner), and right (boundary for 2s).",
      "example": "function sortColors(nums) {\n  let left = 0;        // Boundary for 0s\n  let current = 0;      // Current element being processed\n  let right = nums.length - 1;  // Boundary for 2s\n}",
      "action": "continue",
      "next": "coding-loop-js"
    },
    {
      "stepId": "coding-loop-js",
      "mentorSays": "Create a loop that processes elements while current â‰¤ right. We'll handle each case inside the loop.",
      "example": "function sortColors(nums) {\n  let left = 0;\n  let current = 0;\n  let right = nums.length - 1;\n  \n  while (current <= right) {\n    // Process nums[current]\n  }\n}",
      "action": "continue",
      "next": "coding-handle-zero-js"
    },
    {
      "stepId": "coding-handle-zero-js",
      "mentorSays": "If the current element is 0, swap it with the element at left, then move both left and current forward.",
      "example": "function sortColors(nums) {\n  // ... pointers and loop ...\n  \n  while (current <= right) {\n    if (nums[current] === 0) {\n      // Swap with left\n      [nums[current], nums[left]] = [nums[left], nums[current]];\n      left++;\n      current++;\n    }\n  }\n}",
      "action": "continue",
      "next": "coding-handle-one-js"
    },
    {
      "stepId": "coding-handle-one-js",
      "mentorSays": "If the current element is 1, keep it (1s belong in the middle), just move current forward.",
      "example": "function sortColors(nums) {\n  // ... handle 0 ...\n  \n  while (current <= right) {\n    if (nums[current] === 0) {\n      [nums[current], nums[left]] = [nums[left], nums[current]];\n      left++;\n      current++;\n    } else if (nums[current] === 1) {\n      // Keep 1 in place, just move forward\n      current++;\n    }\n  }\n}",
      "action": "continue",
      "next": "coding-handle-two-js"
    },
    {
      "stepId": "coding-handle-two-js",
      "mentorSays": "If the current element is 2, swap it with the element at right, then move right backward. Don't move current yet - we need to check the swapped element!",
      "example": "function sortColors(nums) {\n  // ... handle 0 and 1 ...\n  \n  while (current <= right) {\n    if (nums[current] === 0) {\n      [nums[current], nums[left]] = [nums[left], nums[current]];\n      left++;\n      current++;\n    } else if (nums[current] === 1) {\n      current++;\n    } else {  // nums[current] === 2\n      // Swap with right\n      [nums[current], nums[right]] = [nums[right], nums[current]];\n      right--;\n      // Don't increment current - check the swapped element!\n    }\n  }\n}",
      "action": "continue",
      "next": "coding-three-pointer-movement-js"
    },
    {
      "stepId": "coding-three-pointer-movement-js",
      "mentorSays": "Let's understand when each pointer moves.\n\nTHREE CASES:\n\nCase 1: arr[mid] = 0 (red)\n- Swap with left boundary\n- Move BOTH left and mid forward\n- This 0 is now in correct position\n\nCase 2: arr[mid] = 1 (white)\n- Already in middle section\n- Just move mid forward\n- No swap needed\n\nCase 3: arr[mid] = 2 (blue)\n- Swap with right boundary\n- Move right backward\n- DON'T move mid yet (need to examine swapped element)\n\nThis is the Dutch National Flag algorithm!",
      "example": "while (mid <= right) {\n  if (nums[mid] === 0) {\n    [nums[left], nums[mid]] = [nums[mid], nums[left]];\n    left++;\n    mid++;\n  } else if (nums[mid] === 1) {\n    mid++;\n  } else {\n    [nums[mid], nums[right]] = [nums[right], nums[mid]];\n    right--;\n  }\n}",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "completion",
      "mentorSays": "ðŸŽ‰ **Congratulations!** You just solved Sort colors (Dutch flag variant)!\n\n**What you've mastered:**\nâœ“ Understanding the problem requirements\nâœ“ Choosing an efficient approach\nâœ“ Building a complete solution from scratch\n\nYou're now ready to tackle more algorithms. Keep going! ðŸš€",
      "action": "complete"
    }
  ],
  "migrated": true,
  "migration_version": "5.0-light-touch",
  "migration_date": "2025-12-30"
}