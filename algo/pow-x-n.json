{
  "id": "pow-x-n",
  "title": "Pow(x, n)",
  "pattern": "binary-search",
  "difficulty": "medium",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "title",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand what the Pow(x, n) problem asks for\n2. Use fast exponentiation (binary exponentiation) to compute x^n efficiently\n3. Handle negative exponents by using 1/x\n4. Use recursion or iteration with bit manipulation\n5. Implement the solution step by step in your chosen language",
      "action": "continue",
      "next": "problem-illustration"
    },
    {
      "stepId": "problem-illustration",
      "mentorSays": "Perfect! Now let's understand what the Pow(x, n) problem is asking.\n\n**Problem Definition:**\nImplement `pow(x, n)`, which calculates `x` raised to the power `n` (i.e., x^n).\n\n**Key Observations:**\n- We need to compute x raised to the power n\n- n can be negative (x^-n = 1/x^n)\n- We should use fast exponentiation for efficiency\n- Handle edge cases: n = 0 (return 1), x = 0 (return 0)\n\n**Example 1:** x = 2.00000, n = 10\n\n2^10 = 1024\nAnswer: 1024.00000\n\n**Example 2:** x = 2.10000, n = 3\n\n2.1^3 = 9.261\nAnswer: 9.26100\n\n**Example 3:** x = 2.00000, n = -2\n\n2^-2 = 1/(2^2) = 1/4 = 0.25\nAnswer: 0.25000\n\n**Step-by-step trace for Example 1 (Fast exponentiation):**\n\nx = 2, n = 10\n\nWe'll use binary exponentiation:\n- n = 10 (binary: 1010)\n- Process bits from right to left:\n  - Bit 0 (0): result = 1, x = 2^2 = 4\n  - Bit 1 (1): result = 1 * 4 = 4, x = 4^2 = 16\n  - Bit 2 (0): result = 4, x = 16^2 = 256\n  - Bit 3 (1): result = 4 * 256 = 1024, x = 256^2\n- Result: 1024 âœ“\n\n**Key Insight:**\nInstead of multiplying x n times (O(n)), we can use:\n- x^n = (x^(n/2))^2 if n is even\n- x^n = x * (x^((n-1)/2))^2 if n is odd\n- This reduces to O(log n) time!\n\n**What makes this tricky:**\n1. Handling negative exponents\n2. Understanding fast exponentiation (binary exponentiation)\n3. Avoiding integer overflow\n4. Handling edge cases (n = 0, x = 0, n < 0)\n\n**Common pitfalls:**\n- Not handling negative exponents correctly\n- Using O(n) approach instead of O(log n)\n- Integer overflow for large n\n- Not handling n = 0 case",
      "example": "Example 1: x = 2.0, n = 10 â†’ 1024.0\nExample 2: x = 2.1, n = 3 â†’ 9.261\nExample 3: x = 2.0, n = -2 â†’ 0.25",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand what the problem wants, here's the real question:\n\nHow would YOU compute x raised to the power n efficiently?\n\nThink about it for a moment. What approach feels natural to you?",
      "choices": [
        {
          "label": "Use fast exponentiation - x^n = (x^(n/2))^2 for even n",
          "next": "explore-fast-exponentiation"
        },
        {
          "label": "Multiply x by itself n times",
          "next": "explore-naive"
        },
        {
          "label": "Use built-in power function",
          "next": "explore-builtin"
        }
      ]
    },
    {
      "stepId": "explore-naive",
      "mentorSays": "That's a straightforward approach! You're thinking: \"I'll multiply x by itself n times.\"\n\nThis works! However, it's O(n) time, which is slow for large n.\n\nThere's a much faster O(log n) approach using fast exponentiation. Would you like to learn that?",
      "action": "continue",
      "next": "explore-fast-exponentiation"
    },
    {
      "stepId": "explore-builtin",
      "mentorSays": "That's practical! However, the problem asks us to implement it ourselves, and using built-in functions defeats the learning purpose.\n\nThere's an elegant O(log n) approach using fast exponentiation that's commonly asked in interviews. Would you like to learn that?",
      "action": "continue",
      "next": "explore-fast-exponentiation"
    },
    {
      "stepId": "explore-fast-exponentiation",
      "mentorSays": "Excellent choice! Fast exponentiation (also called binary exponentiation) is the optimal solution. Here's the core idea:\n\n**The Algorithm:**\n1. **Handle negative n**: If n < 0, set x = 1/x and n = -n\n2. **Base case**: If n == 0, return 1\n3. **Recursive/Iterative approach**:\n   - If n is even: x^n = (x^(n/2))^2\n   - If n is odd: x^n = x * (x^((n-1)/2))^2\n4. **Iterative version**: Process bits of n, multiply result when bit is 1\n\n**Why it works**:\n- We reduce the exponent by half at each step\n- This gives us O(log n) time instead of O(n)\n- The key insight: x^10 = x^8 * x^2 (using binary representation)\n\n**Key insight**: We can express n in binary and use that to compute x^n efficiently!\n\nLet's trace with x = 2, n = 10:\n\n- **Recursive approach**:\n  - pow(2, 10) = pow(2, 5)^2\n  - pow(2, 5) = 2 * pow(2, 2)^2 = 2 * 4 = 8\n  - pow(2, 2) = pow(2, 1)^2 = 2^2 = 4\n  - pow(2, 1) = 2 * pow(2, 0)^2 = 2 * 1 = 2\n  - Result: 8^2 = 64... wait, let me recalculate\n  - Actually: pow(2, 10) = pow(2, 5)^2 = (2 * pow(2, 2)^2)^2 = (2 * 4)^2 = 8^2 = 64\n  - Hmm, that's not right. Let me think...\n  - pow(2, 10): n=10 is even, so pow(2, 5)^2\n  - pow(2, 5): n=5 is odd, so 2 * pow(2, 2)^2\n  - pow(2, 2): n=2 is even, so pow(2, 1)^2\n  - pow(2, 1): n=1 is odd, so 2 * pow(2, 0)^2 = 2 * 1 = 2\n  - pow(2, 2) = 2^2 = 4\n  - pow(2, 5) = 2 * 4^2 = 2 * 16 = 32\n  - pow(2, 10) = 32^2 = 1024 âœ“\n\nThis is O(log n) time and O(log n) space (recursion) or O(1) space (iterative)! Now let's code it step by step.",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Great! Now let's code this solution. Which programming language would you like to use?",
      "choices": [
        {
          "label": "JavaScript",
          "next": "variable-check-js"
        },
        {
          "label": "Python",
          "next": "variable-check-python"
        },
        {
          "label": "Java",
          "next": "variable-check-java"
        },
        {
          "label": "C++",
          "next": "variable-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "variable-check-ts"
        }
      ]
    },
    {
      "stepId": "variable-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-js"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-js"
        }
      ]
    },
    {
      "stepId": "variable-explanation-js",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'result' or 'power') and put data inside it.",
      "example": "let result = 1.0;  // Result accumulator\nlet power = n;  // Current power",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-js"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-js"
        }
      ]
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "function myPow(x, n) {\n  // Returns x raised to power n\n  return 0.0;\n}",
      "action": "continue",
      "next": "parameter-check-js"
    },
    {
      "stepId": "parameter-check-js",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "recursion-check-js"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-js"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-js",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function myPow(x, n)', the 'x' and 'n' are parameters.",
      "example": "function myPow(x, n) {\n  // Parameters receive values\n}\n\n// Call: myPow(2.0, 10)",
      "action": "continue",
      "next": "recursion-check-js"
    },
    {
      "stepId": "recursion-check-js",
      "mentorSays": "To solve this problem, we'll use recursion. Do you know what recursion is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "recursion-check-js"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-js"
        }
      ]
    },
    {
      "stepId": "recursion-check-js",
      "mentorSays": "Do you understand recursion and base cases?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "coding-start-js"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-js"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-js",
      "mentorSays": "Recursion is when a function calls itself. For power calculation, we can use recursion: x^n = x^(n/2) * x^(n/2) for even n, and x^n = x * x^(n-1) for odd n. The base case is when n = 0, return 1.\n\nfunction pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}\n\nGot it?",
      "example": "function pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "recursion-explanation-js",
      "mentorSays": "Recursion is when a function calls itself. For fast exponentiation, we use recursion to break down the problem:\n- x^n = (x^(n/2))^2 if n is even\n- x^n = x * (x^((n-1)/2))^2 if n is odd",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Recursive call\n  let half = myPow(x, Math.floor(n / 2));  // Recursive call!\n  \n  if (n % 2 === 0) {\n    return half * half;\n  } else {\n    return x * half * half;\n  }\n}",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Perfect! Let's implement the pow(x, n) solution in JavaScript. We'll create a function that takes x and n, and returns x^n.",
      "example": "function myPow(x, n) {\n  \n}",
      "action": "continue",
      "next": "coding-handle-negative-js"
    },
    {
      "stepId": "coding-handle-negative-js",
      "mentorSays": "First, handle negative exponent: if n < 0, convert to positive by setting x = 1/x and n = -n.",
      "example": "function myPow(x, n) {\n  // Handle negative exponent\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n}",
      "action": "continue",
      "next": "coding-base-case-js"
    },
    {
      "stepId": "coding-base-case-js",
      "mentorSays": "Handle base case: if n is 0, return 1 (any number to the power 0 is 1).",
      "example": "function myPow(x, n) {\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n  // Base case\n  if (n === 0) {\n    return 1;\n  }\n  \n}",
      "action": "continue",
      "next": "coding-recursive-call-js"
    },
    {
      "stepId": "coding-recursive-call-js",
      "mentorSays": "Make a recursive call to compute x^(n/2). We'll use Math.floor to handle integer division.",
      "example": "function myPow(x, n) {\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n  if (n === 0) {\n    return 1;\n  }\n  \n  // Recursive call: compute x^(n/2)\n  let half = myPow(x, Math.floor(n / 2));\n  \n}",
      "action": "continue",
      "next": "coding-handle-even-js"
    },
    {
      "stepId": "coding-handle-even-js",
      "mentorSays": "If n is even, return half * half (x^n = (x^(n/2))^2).",
      "example": "function myPow(x, n) {\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n  if (n === 0) {\n    return 1;\n  }\n  \n  let half = myPow(x, Math.floor(n / 2));\n  \n  // If n is even: x^n = (x^(n/2))^2\n  if (n % 2 === 0) {\n    return half * half;\n  }\n  \n}",
      "action": "continue",
      "next": "coding-negative-exponent-js"
    },
    {
      "stepId": "coding-negative-exponent-js",
      "mentorSays": "Let's handle negative exponents! When n is negative, we can convert it to a positive exponent by using the reciprocal.\n\nx^(-n) = 1 / x^n\n\nSo we calculate x^|n| and then take the reciprocal if n was negative.",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Handle negative exponent\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n  let half = myPow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "coding-handle-odd-js",
      "mentorSays": "If n is odd, return x * half * half (x^n = x * (x^((n-1)/2))^2).",
      "example": "function myPow(x, n) {\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n  if (n === 0) {\n    return 1;\n  }\n  \n  let half = myPow(x, Math.floor(n / 2));\n  \n  if (n % 2 === 0) {\n    return half * half;\n  } else {\n    // If n is odd: x^n = x * (x^((n-1)/2))^2\n    return x * half * half;\n  }\n}",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "test-code-js",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** x = 2.00000, n = 10\nExpected: 1024.00000\n\n**Test 2:** x = 2.10000, n = 3\nExpected: 9.26100\n\n**Test 3:** x = 2.00000, n = -2\nExpected: 0.25000\n\n**Test 4:** x = 1.00000, n = 2147483647\nExpected: 1.00000\n\n**Test 5:** x = 2.00000, n = 0\nExpected: 1.00000\n\n**Test 6:** x = 0.00001, n = 2147483647\nExpected: 0.00000 (very small)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 2.0^10 â†’ 1024.0\nTest 2: 2.1^3 â†’ 9.261\nTest 3: 2.0^-2 â†’ 0.25\nTest 4: 1.0^2147483647 â†’ 1.0\nTest 5: 2.0^0 â†’ 1.0\nTest 6: 0.00001^2147483647 â†’ 0.0",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Python?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-python"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-python"
        }
      ]
    },
    {
      "stepId": "variable-explanation-python",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'result' or 'power') and put data inside it.",
      "example": " result = 1.0;  // Result accumulator\n power = n;  // Current power",
      "action": "continue",
      "next": "function-check-python"
    },
    {
      "stepId": "function-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in Python?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-python"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-python"
        }
      ]
    },
    {
      "stepId": "function-explanation-python",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "def myPow(x, n) {\n  // Returns x raised to power n\n  return 0.0;\n}",
      "action": "continue",
      "next": "parameter-check-python"
    },
    {
      "stepId": "parameter-check-python",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "recursion-check-python"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-python"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-python",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'def myPow(x, n)', the 'x' and 'n' are parameters.",
      "example": "def myPow(x, n) {\n  // Parameters receive values\n}\n\n// Call: myPow(2.0, 10)",
      "action": "continue",
      "next": "recursion-check-python"
    },
    {
      "stepId": "recursion-check-python",
      "mentorSays": "To solve this problem, we'll use recursion. Do you know what recursion is in Python?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "recursion-check-python"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-python"
        }
      ]
    },
    {
      "stepId": "recursion-check-python",
      "mentorSays": "Do you understand recursion and base cases?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "coding-start-python"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-python"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-python",
      "mentorSays": "Recursion is when a function calls itself. For power calculation, we can use recursion: x^n = x^(n/2) * x^(n/2) for even n, and x^n = x * x^(n-1) for odd n. The base case is when n = 0, return 1.\n\nfunction pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}\n\nGot it?",
      "example": "function pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "recursion-explanation-python",
      "mentorSays": "Recursion is when a function calls itself. For fast exponentiation, we use recursion to break down the problem:\n- x^n = (x^(n/2))^2 if n is even\n- x^n = x * (x^((n-1)/2))^2 if n is odd",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Recursive call\n  let half = myPow(x, Math.floor(n / 2));  // Recursive call!\n  \n  if (n % 2 === 0) {\n    return half * half;\n  } else {\n    return x * half * half;\n  }\n}",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "coding-start-python",
      "mentorSays": "Perfect! Let's implement the solution in Python.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-handle-negative-python"
    },
    {
      "stepId": "coding-handle-negative-python",
      "mentorSays": "Handle negative exponent.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-base-case-python"
    },
    {
      "stepId": "coding-base-case-python",
      "mentorSays": "Handle base case (n = 0).",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-recursive-call-python"
    },
    {
      "stepId": "coding-recursive-call-python",
      "mentorSays": "Make recursive call for n/2.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-handle-even-python"
    },
    {
      "stepId": "coding-handle-even-python",
      "mentorSays": "Handle even n: return half * half.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-negative-exponent-python"
    },
    {
      "stepId": "coding-negative-exponent-python",
      "mentorSays": "Let's handle negative exponents! When n is negative, we can convert it to a positive exponent by using the reciprocal.\n\nx^(-n) = 1 / x^n\n\nSo we calculate x^|n| and then take the reciprocal if n was negative.",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Handle negative exponent\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n  let half = myPow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "coding-handle-odd-python",
      "mentorSays": "Handle odd n: return x * half * half.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "test-code-python",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** x = 2.00000, n = 10\nExpected: 1024.00000\n\n**Test 2:** x = 2.10000, n = 3\nExpected: 9.26100\n\n**Test 3:** x = 2.00000, n = -2\nExpected: 0.25000\n\n**Test 4:** x = 1.00000, n = 2147483647\nExpected: 1.00000\n\n**Test 5:** x = 2.00000, n = 0\nExpected: 1.00000\n\n**Test 6:** x = 0.00001, n = 2147483647\nExpected: 0.00000 (very small)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 2.0^10 â†’ 1024.0\nTest 2: 2.1^3 â†’ 9.261\nTest 3: 2.0^-2 â†’ 0.25\nTest 4: 1.0^2147483647 â†’ 1.0\nTest 5: 2.0^0 â†’ 1.0\nTest 6: 0.00001^2147483647 â†’ 0.0",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Java?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-java"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-java"
        }
      ]
    },
    {
      "stepId": "variable-explanation-java",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'result' or 'power') and put data inside it.",
      "example": "double result = 1.0;  // Result accumulator\ndouble power = n;  // Current power",
      "action": "continue",
      "next": "function-check-java"
    },
    {
      "stepId": "function-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in Java?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-java"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-java"
        }
      ]
    },
    {
      "stepId": "function-explanation-java",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "public double myPow(x, n) {\n  // Returns x raised to power n\n  return 0.0;\n}",
      "action": "continue",
      "next": "parameter-check-java"
    },
    {
      "stepId": "parameter-check-java",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "recursion-check-java"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-java"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-java",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'public double myPow(x, n)', the 'x' and 'n' are parameters.",
      "example": "public double myPow(x, n) {\n  // Parameters receive values\n}\n\n// Call: myPow(2.0, 10)",
      "action": "continue",
      "next": "recursion-check-java"
    },
    {
      "stepId": "recursion-check-java",
      "mentorSays": "To solve this problem, we'll use recursion. Do you know what recursion is in Java?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "recursion-check-java"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-java"
        }
      ]
    },
    {
      "stepId": "recursion-check-java",
      "mentorSays": "Do you understand recursion and base cases?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "coding-start-java"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-java"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-java",
      "mentorSays": "Recursion is when a function calls itself. For power calculation, we can use recursion: x^n = x^(n/2) * x^(n/2) for even n, and x^n = x * x^(n-1) for odd n. The base case is when n = 0, return 1.\n\nfunction pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}\n\nGot it?",
      "example": "function pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "recursion-explanation-java",
      "mentorSays": "Recursion is when a function calls itself. For fast exponentiation, we use recursion to break down the problem:\n- x^n = (x^(n/2))^2 if n is even\n- x^n = x * (x^((n-1)/2))^2 if n is odd",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Recursive call\n  let half = myPow(x, Math.floor(n / 2));  // Recursive call!\n  \n  if (n % 2 === 0) {\n    return half * half;\n  } else {\n    return x * half * half;\n  }\n}",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "coding-start-java",
      "mentorSays": "Perfect! Let's implement the solution in Java.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-handle-negative-java"
    },
    {
      "stepId": "coding-handle-negative-java",
      "mentorSays": "Handle negative exponent.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-base-case-java"
    },
    {
      "stepId": "coding-base-case-java",
      "mentorSays": "Handle base case (n = 0).",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-recursive-call-java"
    },
    {
      "stepId": "coding-recursive-call-java",
      "mentorSays": "Make recursive call for n/2.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-handle-even-java"
    },
    {
      "stepId": "coding-handle-even-java",
      "mentorSays": "Handle even n: return half * half.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-negative-exponent-java"
    },
    {
      "stepId": "coding-negative-exponent-java",
      "mentorSays": "Let's handle negative exponents! When n is negative, we can convert it to a positive exponent by using the reciprocal.\n\nx^(-n) = 1 / x^n\n\nSo we calculate x^|n| and then take the reciprocal if n was negative.",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Handle negative exponent\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n  let half = myPow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "coding-handle-odd-java",
      "mentorSays": "Handle odd n: return x * half * half.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "test-code-java",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** x = 2.00000, n = 10\nExpected: 1024.00000\n\n**Test 2:** x = 2.10000, n = 3\nExpected: 9.26100\n\n**Test 3:** x = 2.00000, n = -2\nExpected: 0.25000\n\n**Test 4:** x = 1.00000, n = 2147483647\nExpected: 1.00000\n\n**Test 5:** x = 2.00000, n = 0\nExpected: 1.00000\n\n**Test 6:** x = 0.00001, n = 2147483647\nExpected: 0.00000 (very small)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 2.0^10 â†’ 1024.0\nTest 2: 2.1^3 â†’ 9.261\nTest 3: 2.0^-2 â†’ 0.25\nTest 4: 1.0^2147483647 â†’ 1.0\nTest 5: 2.0^0 â†’ 1.0\nTest 6: 0.00001^2147483647 â†’ 0.0",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in C++?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-cpp"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "variable-explanation-cpp",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'result' or 'power') and put data inside it.",
      "example": "double result = 1.0;  // Result accumulator\ndouble power = n;  // Current power",
      "action": "continue",
      "next": "function-check-cpp"
    },
    {
      "stepId": "function-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in C++?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-cpp"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "function-explanation-cpp",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "double myPow(x, n) {\n  // Returns x raised to power n\n  return 0.0;\n}",
      "action": "continue",
      "next": "parameter-check-cpp"
    },
    {
      "stepId": "parameter-check-cpp",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "recursion-check-cpp"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-cpp",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'double myPow(x, n)', the 'x' and 'n' are parameters.",
      "example": "double myPow(x, n) {\n  // Parameters receive values\n}\n\n// Call: myPow(2.0, 10)",
      "action": "continue",
      "next": "recursion-check-cpp"
    },
    {
      "stepId": "recursion-check-cpp",
      "mentorSays": "To solve this problem, we'll use recursion. Do you know what recursion is in C++?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "recursion-check-cpp"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "recursion-check-cpp",
      "mentorSays": "Do you understand recursion and base cases?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "coding-start-cpp"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-cpp",
      "mentorSays": "Recursion is when a function calls itself. For power calculation, we can use recursion: x^n = x^(n/2) * x^(n/2) for even n, and x^n = x * x^(n-1) for odd n. The base case is when n = 0, return 1.\n\nfunction pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}\n\nGot it?",
      "example": "function pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "recursion-explanation-cpp",
      "mentorSays": "Recursion is when a function calls itself. For fast exponentiation, we use recursion to break down the problem:\n- x^n = (x^(n/2))^2 if n is even\n- x^n = x * (x^((n-1)/2))^2 if n is odd",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Recursive call\n  let half = myPow(x, Math.floor(n / 2));  // Recursive call!\n  \n  if (n % 2 === 0) {\n    return half * half;\n  } else {\n    return x * half * half;\n  }\n}",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "coding-start-cpp",
      "mentorSays": "Perfect! Let's implement the solution in C++.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-handle-negative-cpp"
    },
    {
      "stepId": "coding-handle-negative-cpp",
      "mentorSays": "Handle negative exponent.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-base-case-cpp"
    },
    {
      "stepId": "coding-base-case-cpp",
      "mentorSays": "Handle base case (n = 0).",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-recursive-call-cpp"
    },
    {
      "stepId": "coding-recursive-call-cpp",
      "mentorSays": "Make recursive call for n/2.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-handle-even-cpp"
    },
    {
      "stepId": "coding-handle-even-cpp",
      "mentorSays": "Handle even n: return half * half.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-negative-exponent-cpp"
    },
    {
      "stepId": "coding-negative-exponent-cpp",
      "mentorSays": "Let's handle negative exponents! When n is negative, we can convert it to a positive exponent by using the reciprocal.\n\nx^(-n) = 1 / x^n\n\nSo we calculate x^|n| and then take the reciprocal if n was negative.",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Handle negative exponent\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n  let half = myPow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "coding-handle-odd-cpp",
      "mentorSays": "Handle odd n: return x * half * half.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "test-code-cpp",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** x = 2.00000, n = 10\nExpected: 1024.00000\n\n**Test 2:** x = 2.10000, n = 3\nExpected: 9.26100\n\n**Test 3:** x = 2.00000, n = -2\nExpected: 0.25000\n\n**Test 4:** x = 1.00000, n = 2147483647\nExpected: 1.00000\n\n**Test 5:** x = 2.00000, n = 0\nExpected: 1.00000\n\n**Test 6:** x = 0.00001, n = 2147483647\nExpected: 0.00000 (very small)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 2.0^10 â†’ 1024.0\nTest 2: 2.1^3 â†’ 9.261\nTest 3: 2.0^-2 â†’ 0.25\nTest 4: 1.0^2147483647 â†’ 1.0\nTest 5: 2.0^0 â†’ 1.0\nTest 6: 0.00001^2147483647 â†’ 0.0",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-ts"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-ts"
        }
      ]
    },
    {
      "stepId": "variable-explanation-ts",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'result' or 'power') and put data inside it.",
      "example": "let result = 1.0;  // Result accumulator\nlet power = n;  // Current power",
      "action": "continue",
      "next": "function-check-ts"
    },
    {
      "stepId": "function-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-ts"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-ts"
        }
      ]
    },
    {
      "stepId": "function-explanation-ts",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "function myPow(x, n) {\n  // Returns x raised to power n\n  return 0.0;\n}",
      "action": "continue",
      "next": "parameter-check-ts"
    },
    {
      "stepId": "parameter-check-ts",
      "mentorSays": "When we write a function, we can give it inputs. These inputs are called 'parameters'. Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "recursion-check-ts"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-ts"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-ts",
      "mentorSays": "Parameters are like variables that receive values when you call the function. When you write 'function myPow(x, n)', the 'x' and 'n' are parameters.",
      "example": "function myPow(x, n) {\n  // Parameters receive values\n}\n\n// Call: myPow(2.0, 10)",
      "action": "continue",
      "next": "recursion-check-ts"
    },
    {
      "stepId": "recursion-check-ts",
      "mentorSays": "To solve this problem, we'll use recursion. Do you know what recursion is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "recursion-check-ts"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-ts"
        }
      ]
    },
    {
      "stepId": "recursion-check-ts",
      "mentorSays": "Do you understand recursion and base cases?",
      "choices": [
        {
          "label": "Yes, I know recursion",
          "next": "coding-start-ts"
        },
        {
          "label": "No, explain recursion",
          "next": "recursion-explanation-ts"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-ts",
      "mentorSays": "Recursion is when a function calls itself. For power calculation, we can use recursion: x^n = x^(n/2) * x^(n/2) for even n, and x^n = x * x^(n-1) for odd n. The base case is when n = 0, return 1.\n\nfunction pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}\n\nGot it?",
      "example": "function pow(x, n) {\n  // Base case\n  if (n === 0) return 1;\n  \n  // Recursive case\n  let half = pow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "recursion-explanation-ts",
      "mentorSays": "Recursion is when a function calls itself. For fast exponentiation, we use recursion to break down the problem:\n- x^n = (x^(n/2))^2 if n is even\n- x^n = x * (x^((n-1)/2))^2 if n is odd",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Recursive call\n  let half = myPow(x, Math.floor(n / 2));  // Recursive call!\n  \n  if (n % 2 === 0) {\n    return half * half;\n  } else {\n    return x * half * half;\n  }\n}",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "coding-start-ts",
      "mentorSays": "Perfect! Let's implement the solution in TypeScript.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-handle-negative-ts"
    },
    {
      "stepId": "coding-handle-negative-ts",
      "mentorSays": "Handle negative exponent.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-base-case-ts"
    },
    {
      "stepId": "coding-base-case-ts",
      "mentorSays": "Handle base case (n = 0).",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-recursive-call-ts"
    },
    {
      "stepId": "coding-recursive-call-ts",
      "mentorSays": "Make recursive call for n/2.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-handle-even-ts"
    },
    {
      "stepId": "coding-handle-even-ts",
      "mentorSays": "Handle even n: return half * half.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-negative-exponent-ts"
    },
    {
      "stepId": "coding-negative-exponent-ts",
      "mentorSays": "Let's handle negative exponents! When n is negative, we can convert it to a positive exponent by using the reciprocal.\n\nx^(-n) = 1 / x^n\n\nSo we calculate x^|n| and then take the reciprocal if n was negative.",
      "example": "function myPow(x, n) {\n  if (n === 0) return 1;\n  \n  // Handle negative exponent\n  if (n < 0) {\n    x = 1 / x;\n    n = -n;\n  }\n  \n  let half = myPow(x, Math.floor(n / 2));\n  return n % 2 === 0 ? half * half : x * half * half;\n}",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "coding-handle-odd-ts",
      "mentorSays": "Handle odd n: return x * half * half.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "test-code-ts",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** x = 2.00000, n = 10\nExpected: 1024.00000\n\n**Test 2:** x = 2.10000, n = 3\nExpected: 9.26100\n\n**Test 3:** x = 2.00000, n = -2\nExpected: 0.25000\n\n**Test 4:** x = 1.00000, n = 2147483647\nExpected: 1.00000\n\n**Test 5:** x = 2.00000, n = 0\nExpected: 1.00000\n\n**Test 6:** x = 0.00001, n = 2147483647\nExpected: 0.00000 (very small)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: 2.0^10 â†’ 1024.0\nTest 2: 2.1^3 â†’ 9.261\nTest 3: 2.0^-2 â†’ 0.25\nTest 4: 1.0^2147483647 â†’ 1.0\nTest 5: 2.0^0 â†’ 1.0\nTest 6: 0.00001^2147483647 â†’ 0.0",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "final",
      "mentorSays": "ðŸŽ‰ Well done! You've successfully implemented the Pow(x, n) solution!\n\n**Time Complexity:** O(log n)\n- We reduce the exponent by half at each recursive call\n- This gives us O(log n) time instead of O(n)\n- Much faster than naive O(n) approach!\n\n**Space Complexity:** O(log n)\n- The recursion stack uses O(log n) space\n- Each recursive call reduces n by half\n- Can be optimized to O(1) with iterative approach\n\n**Key Takeaways:**\n1. **Fast exponentiation**: Use x^n = (x^(n/2))^2 for even n\n2. **Handle negative**: Convert negative exponent to positive using 1/x\n3. **Base case**: n = 0 returns 1\n4. **Even vs Odd**: Different formulas for even and odd exponents\n5. **Efficiency**: O(log n) is much better than O(n) for large n\n\n**Related Practice Problems:**\n- Sqrt(x) (LeetCode #69) - similar binary search concept\n- Super Pow (LeetCode #372) - power with array exponent\n- Count Good Numbers (LeetCode #1922) - similar fast exponentiation\n\nKeep practicing fast exponentiation - it's a powerful technique!",
      "action": "continue"
    }
  ]
}