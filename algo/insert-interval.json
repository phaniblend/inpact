{
  "id": "insert-interval",
  "title": "Insert Interval",
  "pattern": "array",
  "difficulty": "medium",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "title",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand what Insert Interval asks for\n2. Find insertion position efficiently\n3. Merge overlapping intervals\n4. Handle edge cases correctly\n5. Implement the solution step by step in your chosen language",
      "action": "continue",
      "next": "problem-illustration"
    },
    {
      "stepId": "problem-illustration",
      "mentorSays": "Perfect! Now let's understand what Insert Interval is asking.\n\n**Problem Definition:**\nYou are given an array of non-overlapping intervals `intervals` where intervals[i] = [starti, endi] represent the start and the end of the ith interval and intervals is sorted in ascending order by starti. You are also given an interval `newInterval = [start, end]` that represents the start and end of another interval.\n\nInsert `newInterval` into `intervals` such that intervals is still sorted in ascending order by starti and intervals still does not have any overlapping intervals (merge overlapping intervals if necessary).\n\n**Example 1:** intervals = [[1,3],[6,9]], newInterval = [2,5]\nInsert and merge: [[1,5],[6,9]]\n\n**Key Insight:** Find where to insert, merge if overlaps, add result.",
      "example": "Example: intervals=[[1,3],[6,9]], newInterval=[2,5] → [[1,5],[6,9]]",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "How would YOU insert and merge an interval?",
      "choices": [
        {
          "label": "Find position, merge, insert",
          "next": "explore-insert"
        },
        {
          "label": "Add then merge all",
          "next": "explore-add"
        },
        {
          "label": "Use binary search",
          "next": "explore-binary"
        }
      ]
    },
    {
      "stepId": "explore-add",
      "mentorSays": "That works! Add newInterval, then merge all intervals.",
      "action": "continue",
      "next": "explore-insert"
    },
    {
      "stepId": "explore-binary",
      "mentorSays": "Binary search works but linear scan is simpler and sufficient.",
      "action": "continue",
      "next": "explore-insert"
    },
    {
      "stepId": "explore-insert",
      "mentorSays": "Find insertion position, merge overlapping intervals, insert result. O(n) time.",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Great! Now let's code this solution. Which programming language would you like to use?",
      "choices": [
        {
          "label": "JavaScript",
          "next": "variable-check-js"
        },
        {
          "label": "Python",
          "next": "variable-check-python"
        },
        {
          "label": "Java",
          "next": "variable-check-java"
        },
        {
          "label": "C++",
          "next": "variable-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "variable-check-ts"
        }
      ]
    },
    {
      "stepId": "variable-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-js"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-js"
        }
      ]
    },
    {
      "stepId": "variable-explanation-js",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Do you know what a function is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-js"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-js"
        }
      ]
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function insert() {}",
      "action": "continue",
      "next": "parameter-check-js"
    },
    {
      "stepId": "parameter-check-js",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-js"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-js"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-js",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-js"
    },
    {
      "stepId": "array-check-js",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-js"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-js"
        }
      ]
    },
    {
      "stepId": "array-explanation-js",
      "mentorSays": "Arrays store elements in order. You can insert, merge, and iterate through elements.",
      "example": "let intervals = [[1,3],[6,9]]; let newInterval = [2,5];",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Implement insert interval in JS.",
      "example": "function insert(intervals, newInterval) {}",
      "action": "continue",
      "next": "coding-init-js"
    },
    {
      "stepId": "coding-init-js",
      "mentorSays": "Initialize result array and variables.",
      "action": "continue",
      "next": "coding-loop-js"
    },
    {
      "stepId": "coding-loop-js",
      "mentorSays": "Loop through intervals, add non-overlapping ones before newInterval.",
      "action": "continue",
      "next": "coding-merge-js"
    },
    {
      "stepId": "coding-merge-js",
      "mentorSays": "Merge newInterval with all overlapping intervals.",
      "action": "continue",
      "next": "coding-add-js"
    },
    {
      "stepId": "coding-add-js",
      "mentorSays": "Add merged interval to result.",
      "action": "continue",
      "next": "coding-remaining-js"
    },
    {
      "stepId": "coding-remaining-js",
      "mentorSays": "Add remaining non-overlapping intervals.",
      "action": "continue",
      "next": "coding-return-js"
    },
    {
      "stepId": "coding-return-js",
      "mentorSays": "Return result array.",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "test-code-js",
      "mentorSays": "Test cases:\n1. intervals=[[1,3],[6,9]], newInterval=[2,5] → [[1,5],[6,9]]\n2. intervals=[[1,2],[3,5],[6,7],[8,10],[12,16]], newInterval=[4,8] → [[1,2],[3,10],[12,16]]\n3. intervals=[], newInterval=[5,7] → [[5,7]]\n4. intervals=[[1,5]], newInterval=[2,3] → [[1,5]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Python?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-python"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-python"
        }
      ]
    },
    {
      "stepId": "variable-explanation-python",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-python"
    },
    {
      "stepId": "function-check-python",
      "mentorSays": "Do you know what a function is in Python?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-python"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-python"
        }
      ]
    },
    {
      "stepId": "function-explanation-python",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function insert() {}",
      "action": "continue",
      "next": "parameter-check-python"
    },
    {
      "stepId": "parameter-check-python",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-python"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-python"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-python",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-python"
    },
    {
      "stepId": "array-check-python",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-python"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-python"
        }
      ]
    },
    {
      "stepId": "array-explanation-python",
      "mentorSays": "Arrays store elements in order. You can insert, merge, and iterate through elements.",
      "example": "let intervals = [[1,3],[6,9]]; let newInterval = [2,5];",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "coding-start-python",
      "mentorSays": "Implement insert interval in PYTHON.",
      "example": "function insert(intervals, newInterval) {}",
      "action": "continue",
      "next": "coding-init-python"
    },
    {
      "stepId": "coding-init-python",
      "mentorSays": "Initialize result array and variables.",
      "action": "continue",
      "next": "coding-loop-python"
    },
    {
      "stepId": "coding-loop-python",
      "mentorSays": "Loop through intervals, add non-overlapping ones before newInterval.",
      "action": "continue",
      "next": "coding-merge-python"
    },
    {
      "stepId": "coding-merge-python",
      "mentorSays": "Merge newInterval with all overlapping intervals.",
      "action": "continue",
      "next": "coding-add-python"
    },
    {
      "stepId": "coding-add-python",
      "mentorSays": "Add merged interval to result.",
      "action": "continue",
      "next": "coding-remaining-python"
    },
    {
      "stepId": "coding-remaining-python",
      "mentorSays": "Add remaining non-overlapping intervals.",
      "action": "continue",
      "next": "coding-return-python"
    },
    {
      "stepId": "coding-return-python",
      "mentorSays": "Return result array.",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "test-code-python",
      "mentorSays": "Test cases:\n1. intervals=[[1,3],[6,9]], newInterval=[2,5] → [[1,5],[6,9]]\n2. intervals=[[1,2],[3,5],[6,7],[8,10],[12,16]], newInterval=[4,8] → [[1,2],[3,10],[12,16]]\n3. intervals=[], newInterval=[5,7] → [[5,7]]\n4. intervals=[[1,5]], newInterval=[2,3] → [[1,5]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Java?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-java"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-java"
        }
      ]
    },
    {
      "stepId": "variable-explanation-java",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-java"
    },
    {
      "stepId": "function-check-java",
      "mentorSays": "Do you know what a function is in Java?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-java"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-java"
        }
      ]
    },
    {
      "stepId": "function-explanation-java",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function insert() {}",
      "action": "continue",
      "next": "parameter-check-java"
    },
    {
      "stepId": "parameter-check-java",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-java"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-java"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-java",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-java"
    },
    {
      "stepId": "array-check-java",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-java"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-java"
        }
      ]
    },
    {
      "stepId": "array-explanation-java",
      "mentorSays": "Arrays store elements in order. You can insert, merge, and iterate through elements.",
      "example": "let intervals = [[1,3],[6,9]]; let newInterval = [2,5];",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "coding-start-java",
      "mentorSays": "Implement insert interval in JAVA.",
      "example": "function insert(intervals, newInterval) {}",
      "action": "continue",
      "next": "coding-init-java"
    },
    {
      "stepId": "coding-init-java",
      "mentorSays": "Initialize result array and variables.",
      "action": "continue",
      "next": "coding-loop-java"
    },
    {
      "stepId": "coding-loop-java",
      "mentorSays": "Loop through intervals, add non-overlapping ones before newInterval.",
      "action": "continue",
      "next": "coding-merge-java"
    },
    {
      "stepId": "coding-merge-java",
      "mentorSays": "Merge newInterval with all overlapping intervals.",
      "action": "continue",
      "next": "coding-add-java"
    },
    {
      "stepId": "coding-add-java",
      "mentorSays": "Add merged interval to result.",
      "action": "continue",
      "next": "coding-remaining-java"
    },
    {
      "stepId": "coding-remaining-java",
      "mentorSays": "Add remaining non-overlapping intervals.",
      "action": "continue",
      "next": "coding-return-java"
    },
    {
      "stepId": "coding-return-java",
      "mentorSays": "Return result array.",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "test-code-java",
      "mentorSays": "Test cases:\n1. intervals=[[1,3],[6,9]], newInterval=[2,5] → [[1,5],[6,9]]\n2. intervals=[[1,2],[3,5],[6,7],[8,10],[12,16]], newInterval=[4,8] → [[1,2],[3,10],[12,16]]\n3. intervals=[], newInterval=[5,7] → [[5,7]]\n4. intervals=[[1,5]], newInterval=[2,3] → [[1,5]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in C++?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-cpp"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "variable-explanation-cpp",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-cpp"
    },
    {
      "stepId": "function-check-cpp",
      "mentorSays": "Do you know what a function is in C++?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-cpp"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "function-explanation-cpp",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function insert() {}",
      "action": "continue",
      "next": "parameter-check-cpp"
    },
    {
      "stepId": "parameter-check-cpp",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-cpp"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-cpp",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-cpp"
    },
    {
      "stepId": "array-check-cpp",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-cpp"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "array-explanation-cpp",
      "mentorSays": "Arrays store elements in order. You can insert, merge, and iterate through elements.",
      "example": "let intervals = [[1,3],[6,9]]; let newInterval = [2,5];",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "coding-start-cpp",
      "mentorSays": "Implement insert interval in CPP.",
      "example": "function insert(intervals, newInterval) {}",
      "action": "continue",
      "next": "coding-init-cpp"
    },
    {
      "stepId": "coding-init-cpp",
      "mentorSays": "Initialize result array and variables.",
      "action": "continue",
      "next": "coding-loop-cpp"
    },
    {
      "stepId": "coding-loop-cpp",
      "mentorSays": "Loop through intervals, add non-overlapping ones before newInterval.",
      "action": "continue",
      "next": "coding-merge-cpp"
    },
    {
      "stepId": "coding-merge-cpp",
      "mentorSays": "Merge newInterval with all overlapping intervals.",
      "action": "continue",
      "next": "coding-add-cpp"
    },
    {
      "stepId": "coding-add-cpp",
      "mentorSays": "Add merged interval to result.",
      "action": "continue",
      "next": "coding-remaining-cpp"
    },
    {
      "stepId": "coding-remaining-cpp",
      "mentorSays": "Add remaining non-overlapping intervals.",
      "action": "continue",
      "next": "coding-return-cpp"
    },
    {
      "stepId": "coding-return-cpp",
      "mentorSays": "Return result array.",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "test-code-cpp",
      "mentorSays": "Test cases:\n1. intervals=[[1,3],[6,9]], newInterval=[2,5] → [[1,5],[6,9]]\n2. intervals=[[1,2],[3,5],[6,7],[8,10],[12,16]], newInterval=[4,8] → [[1,2],[3,10],[12,16]]\n3. intervals=[], newInterval=[5,7] → [[5,7]]\n4. intervals=[[1,5]], newInterval=[2,3] → [[1,5]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-ts"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-ts"
        }
      ]
    },
    {
      "stepId": "variable-explanation-ts",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let result = [];",
      "action": "continue",
      "next": "function-check-ts"
    },
    {
      "stepId": "function-check-ts",
      "mentorSays": "Do you know what a function is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "parameter-check-ts"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-ts"
        }
      ]
    },
    {
      "stepId": "function-explanation-ts",
      "mentorSays": "A function is a reusable block of code.",
      "example": "function insert() {}",
      "action": "continue",
      "next": "parameter-check-ts"
    },
    {
      "stepId": "parameter-check-ts",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes, I know parameters",
          "next": "array-check-ts"
        },
        {
          "label": "No, explain parameters",
          "next": "parameter-explanation-ts"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-ts",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "array-check-ts"
    },
    {
      "stepId": "array-check-ts",
      "mentorSays": "Do you know how to work with arrays?",
      "choices": [
        {
          "label": "Yes, I know",
          "next": "coding-start-ts"
        },
        {
          "label": "No, explain",
          "next": "array-explanation-ts"
        }
      ]
    },
    {
      "stepId": "array-explanation-ts",
      "mentorSays": "Arrays store elements in order. You can insert, merge, and iterate through elements.",
      "example": "let intervals = [[1,3],[6,9]]; let newInterval = [2,5];",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "coding-start-ts",
      "mentorSays": "Implement insert interval in TS.",
      "example": "function insert(intervals, newInterval) {}",
      "action": "continue",
      "next": "coding-init-ts"
    },
    {
      "stepId": "coding-init-ts",
      "mentorSays": "Initialize result array and variables.",
      "action": "continue",
      "next": "coding-loop-ts"
    },
    {
      "stepId": "coding-loop-ts",
      "mentorSays": "Loop through intervals, add non-overlapping ones before newInterval.",
      "action": "continue",
      "next": "coding-merge-ts"
    },
    {
      "stepId": "coding-merge-ts",
      "mentorSays": "Merge newInterval with all overlapping intervals.",
      "action": "continue",
      "next": "coding-add-ts"
    },
    {
      "stepId": "coding-add-ts",
      "mentorSays": "Add merged interval to result.",
      "action": "continue",
      "next": "coding-remaining-ts"
    },
    {
      "stepId": "coding-remaining-ts",
      "mentorSays": "Add remaining non-overlapping intervals.",
      "action": "continue",
      "next": "coding-return-ts"
    },
    {
      "stepId": "coding-return-ts",
      "mentorSays": "Return result array.",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "test-code-ts",
      "mentorSays": "Test cases:\n1. intervals=[[1,3],[6,9]], newInterval=[2,5] → [[1,5],[6,9]]\n2. intervals=[[1,2],[3,5],[6,7],[8,10],[12,16]], newInterval=[4,8] → [[1,2],[3,10],[12,16]]\n3. intervals=[], newInterval=[5,7] → [[5,7]]\n4. intervals=[[1,5]], newInterval=[2,3] → [[1,5]]\n5. Verify all overlaps are merged\n6. Check edge cases",
      "example": "",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "final",
      "mentorSays": "Time: O(n), Space: O(n). Find position, merge overlapping, insert result.",
      "action": "continue"
    }
  ]
}