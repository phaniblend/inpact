{
  "id": "implement-trie",
  "title": "Implement Trie (Prefix Tree)",
  "pattern": "trie data structure",
  "difficulty": "medium",
  "language": "javascript",
  "status": "AI-GENERATED-V2-DIRECT",
  "standardsVersion": "lessonStandards.v2-inpact",
  "curriculum": {
    "lessonNumber": 51,
    "tier": "EXPERT",
    "lessonOrderTag": "EXPERT-51",
    "introduces": ["trie-concept", "trie-node", "prefix-tree", "insert-trie", "search-trie"],
    "assumesAlreadyTaught": ["objects", "hash-map", "recursion-concept"],
    "prerequisiteCheckRequired": true,
    "nextRecommended": ["word-search-ii"]
  },
  "pseudocode": [
    {"id": "ps1", "text": "Create TrieNode with children map and isEnd flag"},
    {"id": "ps2", "text": "Initialize Trie with empty root node"},
    {"id": "ps3", "text": "Insert: traverse character by character, create nodes as needed"},
    {"id": "ps4", "text": "Mark last character's node as end of word"},
    {"id": "ps5", "text": "Search: traverse character by character"},
    {"id": "ps6", "text": "Return true only if word exists and isEnd is true"},
    {"id": "ps7", "text": "StartsWith: like search but don't check isEnd"}
  ],
  "flow": [
    {"stepId": "objectives", "mentorSays": "Hey! Welcome to **Implement Trie** - building your first advanced data structure!\n\nA Trie (pronounced 'try') is a tree-like structure perfect for storing words and searching by prefix. It's used in autocomplete, spell checkers, and IP routing.\n\nYou'll learn:\n‚Ä¢ Building tree structures from scratch\n‚Ä¢ Character-by-character traversal\n‚Ä¢ Efficient prefix matching\n\nLet's dive in!", "action": "continue", "next": "language-selection"},
    {"stepId": "language-selection", "mentorSays": "Before we dive into the problem, which programming language would you like to use?\n\nThis will help me make sure you have the right building blocks.", "choices": [{"label": "üíõ JavaScript", "next": "prereq-check-js"}, {"label": "üêç Python", "next": "prereq-check-python"}, {"label": "‚òï Java", "next": "prereq-check-java"}, {"label": "‚ö° C++", "next": "prereq-check-cpp"}, {"label": "üíô TypeScript", "next": "prereq-check-ts"}]},
    {"stepId": "prereq-check-js", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in JavaScript, you'll need to know:\n- **Objects** - Creating and using objects as maps\n- **Hash map** - Key-value storage with objects\n- **Recursion concept** - Though we'll use iteration here\n\nDo you feel confident with these JavaScript concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-js"}, {"label": "I know some, not all", "next": "select-prereqs-js"}]},
    {"stepId": "teach-prereqs-js", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-js", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "prereq-check-python", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in Python, you'll need to know:\n- **Objects** - Creating and using classes\n- **Hash map** - Dictionaries for key-value storage\n- **Recursion concept** - Though we'll use iteration here\n\nDo you feel confident with these Python concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-python"}, {"label": "I know some, not all", "next": "select-prereqs-python"}]},
    {"stepId": "teach-prereqs-python", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-python", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "prereq-check-java", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in Java, you'll need to know:\n- **Objects** - Creating and using classes\n- **Hash map** - HashMap for key-value storage\n- **Recursion concept** - Though we'll use iteration here\n\nDo you feel confident with these Java concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-java"}, {"label": "I know some, not all", "next": "select-prereqs-java"}]},
    {"stepId": "teach-prereqs-java", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-java", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "prereq-check-cpp", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in C++, you'll need to know:\n- **Objects** - Creating and using classes/structs\n- **Hash map** - unordered_map for key-value storage\n- **Recursion concept** - Though we'll use iteration here\n\nDo you feel confident with these C++ concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-cpp"}, {"label": "I know some, not all", "next": "select-prereqs-cpp"}]},
    {"stepId": "teach-prereqs-cpp", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-cpp", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "prereq-check-ts", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in TypeScript, you'll need to know:\n- **Objects** - Creating and using objects/classes\n- **Hash map** - Map or objects for key-value storage\n- **Recursion concept** - Though we'll use iteration here\n\nDo you feel confident with these TypeScript concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-ts"}, {"label": "I know some, not all", "next": "select-prereqs-ts"}]},
    {"stepId": "teach-prereqs-ts", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-ts", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {
      "stepId": "problem-understanding",
      "mentorSays": "Perfect! Now let's understand what a Trie is.\n\n**Imagine organizing a dictionary** where you can quickly find words by their prefix. Instead of checking each word letter by letter, you follow a path through a tree where each node represents one letter.\n\nImplement a Trie with these operations:\n\n‚Ä¢ `insert(word)`: Add a word to the trie\n‚Ä¢ `search(word)`: Return true if the exact word exists\n‚Ä¢ `startsWith(prefix)`: Return true if any word starts with this prefix\n\nExample:\n```javascript\nconst trie = new Trie();\ntrie.insert(\"apple\");\ntrie.search(\"apple\");   // true\ntrie.search(\"app\");     // false\ntrie.startsWith(\"app\"); // true\ntrie.insert(\"app\");\ntrie.search(\"app\");     // true\n```",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {"stepId": "thinking-challenge", "mentorSays": "How should we structure the Trie?\n\nThink about how letters connect...", "choices": [{"label": "Store all words in an array and search linearly", "next": "wrong-choice"}, {"label": "Use tree nodes where each node has children map and isEnd flag", "next": "core-idea"}]},
    {"stepId": "wrong-choice", "mentorSays": "An array would work but defeats the purpose - we'd lose the prefix searching efficiency!\n\nA tree structure lets us share common prefixes. 'apple' and 'app' share 'a-p-p', so we store that path once.", "action": "next", "next": "core-idea"},
    {"stepId": "core-idea", "mentorSays": "The key insight is: **each node contains a children map and an isEnd flag**.\n\nStructure:\n‚Ä¢ **TrieNode**: `{ children: {}, isEnd: false }`\n‚Ä¢ **children**: map from character ‚Üí next TrieNode\n‚Ä¢ **isEnd**: true if a word ends at this node\n\n**Insert**: Walk character by character, creating nodes as needed. Mark last node as isEnd.\n\n**Search**: Walk character by character. Return true only if we reach a node with isEnd=true.\n\n**StartsWith**: Like search, but don't check isEnd - just verify the path exists!", "action": "next", "next": "walkthrough", "pseudocodeLineIds": ["ps1", "ps2", "ps3"]},
    {"stepId": "walkthrough", "mentorSays": "Let's trace inserting 'app' and 'apple':\n\n**Insert 'app':**\n```\nroot ‚Üí a ‚Üí p ‚Üí p (isEnd=true)\n```\n\n**Insert 'apple':**\n```\nroot ‚Üí a ‚Üí p ‚Üí p (isEnd=true)\n                ‚Üì\n                l ‚Üí e (isEnd=true)\n```\n\n**Search 'app':** Follow a‚Üíp‚Üíp, find isEnd=true ‚úì\n**Search 'appl':** Follow a‚Üíp‚Üíp‚Üíl, find isEnd=false ‚úó\n**StartsWith 'app':** Path exists ‚úì\n**StartsWith 'b':** No 'b' child from root ‚úó", "action": "next", "next": "pseudocode-step", "pseudocodeLineIds": ["ps1", "ps2", "ps3"]},
    {"stepId": "pseudocode-step", "mentorSays": "Here's our plan written as pseudocode:", "action": "next", "next": "coding-intro", "pseudocodeLineIds": ["ps1", "ps2", "ps3", "ps4", "ps5", "ps6", "ps7"]},
    {"stepId": "coding-intro", "mentorSays": "Now let's translate this into JavaScript, building it step by step.\n\nRemember: we'll add just 1-3 lines at a time!", "action": "next", "next": "code-01"},
    {"stepId": "code-01", "mentorSays": "Create the TrieNode class.\n\n```javascript\nclass TrieNode {\n  constructor() {\n    this.children = {};\n    this.isEnd = false;\n  }\n}\n```", "action": "next", "next": "code-02", "pseudocodeLineIds": ["ps1"], "example": "class TrieNode {\n  constructor() {\n    this.children = {};\n    this.isEnd = false;"
    },
    {"stepId": "code-02", "mentorSays": "Initialize Trie with root node.\n\n```javascript\nclass TrieNode {\n  constructor() {\n    this.children = {};\n    this.isEnd = false;\n  }\n}\n\nclass Trie {\n  constructor() {\n    this.root = new TrieNode();\n  }\n}\n```", "action": "next", "next": "code-03", "pseudocodeLineIds": ["ps2"], "example": "class Trie {\n  constructor() {\n    this.root = new TrieNode();"
    },
    {"stepId": "code-03", "mentorSays": "Implement insert: start from root.\n\n```javascript\nclass Trie {\n  constructor() {\n    this.root = new TrieNode();\n  }\n  \n  insert(word) {\n    let node = this.root;\n  }\n}\n```", "action": "next", "next": "code-04", "pseudocodeLineIds": ["ps3"], "example": "insert(word) {\n  let node = this.root;"
    },
    {"stepId": "code-04", "mentorSays": "Traverse each character, creating nodes as needed.\n\n```javascript\nclass Trie {\n  constructor() {\n    this.root = new TrieNode();\n  }\n  \n  insert(word) {\n    let node = this.root;\n    for (const char of word) {\n      if (!node.children[char]) {\n        node.children[char] = new TrieNode();\n      }\n      node = node.children[char];\n    }\n  }\n}\n```", "action": "next", "next": "code-05", "pseudocodeLineIds": ["ps3"], "example": "for (const char of word) {\n  if (!node.children[char]) node.children[char] = new TrieNode();\n  node = node.children[char];"
    },
    {"stepId": "code-05", "mentorSays": "Mark the end of the word.\n\n```javascript\nclass Trie {\n  constructor() {\n    this.root = new TrieNode();\n  }\n  \n  insert(word) {\n    let node = this.root;\n    for (const char of word) {\n      if (!node.children[char]) {\n        node.children[char] = new TrieNode();\n      }\n      node = node.children[char];\n    }\n    node.isEnd = true;\n  }\n}\n```", "action": "next", "next": "code-06", "pseudocodeLineIds": ["ps4"], "example": "node.isEnd = true;"
    },
    {"stepId": "code-06", "mentorSays": "Implement search: traverse and check isEnd.\n\n```javascript\nclass Trie {\n  constructor() {\n    this.root = new TrieNode();\n  }\n  \n  insert(word) {\n    let node = this.root;\n    for (const char of word) {\n      if (!node.children[char]) {\n        node.children[char] = new TrieNode();\n      }\n      node = node.children[char];\n    }\n    node.isEnd = true;\n  }\n  \n  search(word) {\n    let node = this.root;\n    for (const char of word) {\n      if (!node.children[char]) return false;\n      node = node.children[char];\n    }\n    return node.isEnd;\n  }\n}\n```", "action": "next", "next": "code-07", "pseudocodeLineIds": ["ps5", "ps6"], "example": "search(word) {\n  let node = this.root;\n  for (const char of word) {\n    if (!node.children[char]) return false;\n    node = node.children[char];\n  }\n  return node.isEnd;"
    },
    {"stepId": "code-07", "mentorSays": "Implement startsWith: like search but don't check isEnd.\n\n```javascript\nclass Trie {\n  constructor() {\n    this.root = new TrieNode();\n  }\n  \n  insert(word) {\n    let node = this.root;\n    for (const char of word) {\n      if (!node.children[char]) {\n        node.children[char] = new TrieNode();\n      }\n      node = node.children[char];\n    }\n    node.isEnd = true;\n  }\n  \n  search(word) {\n    let node = this.root;\n    for (const char of word) {\n      if (!node.children[char]) return false;\n      node = node.children[char];\n    }\n    return node.isEnd;\n  }\n  \n  startsWith(prefix) {\n    let node = this.root;\n    for (const char of prefix) {\n      if (!node.children[char]) return false;\n      node = node.children[char];\n    }\n    return true;\n  }\n}\n```", "action": "next", "next": "wrap-up", "pseudocodeLineIds": ["ps7"], "example": "startsWith(prefix) {\n  let node = this.root;\n  for (const char of prefix) {\n    if (!node.children[char]) return false;\n    node = node.children[char];\n  }\n  return true;"
    },
    {"stepId": "wrap-up", "mentorSays": "Excellent work! You've built a **Trie from scratch**!\n\nTries are used in:\n‚Ä¢ Autocomplete systems\n‚Ä¢ Spell checkers\n‚Ä¢ IP routing tables\n‚Ä¢ Word games\n\nNext: **Word Search II** - using Trie with backtracking!\n\nYou're mastering advanced data structures! üî•", "action": "complete"}
  ]
}
