{
  "id": "longest-common-subsequence",
  "title": "Longest Common Subsequence",
  "pattern": "DP (2D - strings)",
  "difficulty": "medium",
  "language": "javascript",
  "status": "AI-GENERATED-V2-DIRECT",
  "standardsVersion": "lessonStandards.v2-inpact",
  "curriculum": {
    "lessonNumber": 46,
    "tier": "ADVANCED",
    "lessonOrderTag": "ADVANCED-46",
    "introduces": ["2D-DP", "LCS-pattern", "string-matching-DP"],
    "assumesAlreadyTaught": ["dynamic-programming-concept", "strings", "nested-loops"],
    "prerequisiteCheckRequired": true,
    "nextRecommended": ["edit-distance"]
  },
  "pseudocode": [
    {"id": "ps1", "text": "Create 2D DP table: dp[i][j] = LCS of text1[0..i] and text2[0..j]"},
    {"id": "ps2", "text": "Initialize first row and column to 0"},
    {"id": "ps3", "text": "For each position (i,j):"},
    {"id": "ps4", "text": "  If characters match: dp[i][j] = 1 + dp[i-1][j-1]"},
    {"id": "ps5", "text": "  If different: dp[i][j] = max(dp[i-1][j], dp[i][j-1])"},
    {"id": "ps6", "text": "Return dp[m][n] (bottom-right cell)"}
  ],
  "flow": [
    {"stepId": "objectives", "mentorSays": "Hey! Welcome to **Longest Common Subsequence** - your first 2D dynamic programming problem!\n\nThis classic DP problem teaches you how to find the longest subsequence that appears in both strings (not necessarily consecutive).\n\nYou'll learn:\nâ€¢ Building 2D DP tables\nâ€¢ String matching with DP\nâ€¢ The LCS pattern used in diff tools\n\nLet's dive in!", "action": "continue", "next": "language-selection"},
    {"stepId": "language-selection", "mentorSays": "Before we dive into the problem, which programming language would you like to use?\n\nThis will help me make sure you have the right building blocks.", "choices": [{"label": "ðŸ’› JavaScript", "next": "prereq-check-js"}, {"label": "ðŸ Python", "next": "prereq-check-python"}, {"label": "â˜• Java", "next": "prereq-check-java"}, {"label": "âš¡ C++", "next": "prereq-check-cpp"}, {"label": "ðŸ’™ TypeScript", "next": "prereq-check-ts"}]},
    {"stepId": "prereq-check-js", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in JavaScript, you'll need to know:\n- **Dynamic programming concept** - Building solutions from subproblems\n- **Strings** - Character comparison and indexing\n- **Nested loops** - Iterating through 2D arrays\n\nDo you feel confident with these JavaScript concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-js"}, {"label": "I know some, not all", "next": "select-prereqs-js"}]},
    {"stepId": "teach-prereqs-js", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-js", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "prereq-check-python", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in Python, you'll need to know:\n- **Dynamic programming concept** - Building solutions from subproblems\n- **Strings** - Character comparison and indexing\n- **Nested loops** - Iterating through 2D arrays\n\nDo you feel confident with these Python concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-python"}, {"label": "I know some, not all", "next": "select-prereqs-python"}]},
    {"stepId": "teach-prereqs-python", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-python", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "prereq-check-java", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in Java, you'll need to know:\n- **Dynamic programming concept** - Building solutions from subproblems\n- **Strings** - Character comparison and indexing\n- **Nested loops** - Iterating through 2D arrays\n\nDo you feel confident with these Java concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-java"}, {"label": "I know some, not all", "next": "select-prereqs-java"}]},
    {"stepId": "teach-prereqs-java", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-java", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "prereq-check-cpp", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in C++, you'll need to know:\n- **Dynamic programming concept** - Building solutions from subproblems\n- **Strings** - Character comparison and indexing\n- **Nested loops** - Iterating through 2D arrays\n\nDo you feel confident with these C++ concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-cpp"}, {"label": "I know some, not all", "next": "select-prereqs-cpp"}]},
    {"stepId": "teach-prereqs-cpp", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-cpp", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "prereq-check-ts", "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in TypeScript, you'll need to know:\n- **Dynamic programming concept** - Building solutions from subproblems\n- **Strings** - Character comparison and indexing\n- **Nested loops** - Iterating through 2D arrays\n\nDo you feel confident with these TypeScript concepts?", "choices": [{"label": "Yes, I know all of them", "next": "problem-understanding"}, {"label": "No, please explain them", "next": "teach-prereqs-ts"}, {"label": "I know some, not all", "next": "select-prereqs-ts"}]},
    {"stepId": "teach-prereqs-ts", "mentorSays": "I'll teach you the prerequisites you need. [Full interactive teaching will be added in Phase 2]\n\nFor now, let's continue with the lesson!", "action": "continue", "next": "problem-understanding"},
    {"stepId": "select-prereqs-ts", "mentorSays": "Which concepts would you like me to explain? [Individual selection will be added in Phase 2]\n\nFor now, let's continue!", "action": "continue", "next": "problem-understanding"},
    {
      "stepId": "problem-understanding",
      "mentorSays": "Perfect! Now let's understand what this problem asks for.\n\n**Imagine comparing two DNA sequences** to find the longest common pattern, or using 'diff' to compare code files. A subsequence means the characters appear in order, but don't need to be consecutive.\n\nGiven two strings `text1` and `text2`, return the **length of their longest common subsequence**.\n\nA subsequence is characters that appear in the same order but can skip characters.\n\nExample:\n```\ntext1 = \"abcde\"\ntext2 = \"ace\"\n```\nOutput: `3`\n\nThe LCS is \"ace\" - we can skip 'b' and 'd' from text1 to match text2.\n\n```\ntext1 = \"abc\"\ntext2 = \"def\"\n```\nOutput: `0` (no common subsequence)",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {"stepId": "thinking-challenge", "mentorSays": "How can we find the longest common subsequence?\n\nThink about breaking it into smaller problems...", "choices": [{"label": "Try all possible subsequences recursively", "next": "wrong-choice"}, {"label": "Use 2D DP: if chars match extend previous LCS, else take max of skipping either char", "next": "core-idea"}]},
    {"stepId": "wrong-choice", "mentorSays": "Trying all subsequences is exponential time - way too slow!\n\nDP helps us avoid recalculating the same subproblems. We can build up the solution by comparing prefixes of both strings.", "action": "next", "next": "core-idea"},
    {"stepId": "core-idea", "mentorSays": "The key insight is: **dp[i][j] = LCS length for text1[0..i] and text2[0..j]**\n\nRecurrence relation:\nâ€¢ If `text1[i] == text2[j]`: characters match!\n  â†’ `dp[i][j] = 1 + dp[i-1][j-1]` (extend LCS)\n  \nâ€¢ If characters differ:\n  â†’ `dp[i][j] = max(dp[i-1][j], dp[i][j-1])`\n  â†’ Take the best by either skipping char from text1 or text2\n\nBase case: `dp[0][...] = dp[...][0] = 0` (empty string has no LCS)\n\nAnswer is in `dp[m][n]`!", "action": "next", "next": "walkthrough", "pseudocodeLineIds": ["ps1", "ps2", "ps3"]},
    {"stepId": "walkthrough", "mentorSays": "Let's build the DP table for text1=\"ace\", text2=\"abcde\":\n\n```\n    \"\" a  b  c  d  e\n\"\"   0  0  0  0  0  0\na    0  1  1  1  1  1  (a matches)\nc    0  1  1  2  2  2  (c matches)\ne    0  1  1  2  2  3  (e matches)\n```\n\n- **a vs a:** Match! `dp[1][1] = 1 + dp[0][0] = 1`\n- **a vs b:** Different. `dp[1][2] = max(dp[0][2], dp[1][1]) = 1`\n- **c vs c:** Match! `dp[2][3] = 1 + dp[1][2] = 2`\n- **e vs e:** Match! `dp[3][5] = 1 + dp[2][4] = 3`\n\nFinal answer: **3** (LCS = \"ace\")", "action": "next", "next": "pseudocode-step", "pseudocodeLineIds": ["ps1", "ps2", "ps3"]},
    {"stepId": "pseudocode-step", "mentorSays": "Here's our plan written as pseudocode:", "action": "next", "next": "coding-intro", "pseudocodeLineIds": ["ps1", "ps2", "ps3", "ps4", "ps5", "ps6"]},
    {"stepId": "coding-intro", "mentorSays": "Now let's translate this into JavaScript, building it step by step.\n\nRemember: we'll add just 1-3 lines at a time!", "action": "next", "next": "code-01"},
    {"stepId": "code-01", "mentorSays": "Create 2D DP table.\n\n```javascript\nfunction longestCommonSubsequence(text1, text2) {\n  const m = text1.length, n = text2.length;\n  const dp = Array.from({length: m + 1}, () => Array(n + 1).fill(0));\n}\n```", "action": "next", "next": "code-02", "pseudocodeLineIds": ["ps1", "ps2"], "example": "const m = text1.length, n = text2.length;\nconst dp = Array.from({length: m + 1}, () => Array(n + 1).fill(0));"
    },
    {"stepId": "code-02", "mentorSays": "Fill the DP table.\n\n```javascript\nfunction longestCommonSubsequence(text1, text2) {\n  const m = text1.length, n = text2.length;\n  const dp = Array.from({length: m + 1}, () => Array(n + 1).fill(0));\n  \n  for (let i = 1; i <= m; i++) {\n    for (let j = 1; j <= n; j++) {\n    }\n  }\n}\n```", "action": "next", "next": "code-03", "pseudocodeLineIds": ["ps3"], "example": "for (let i = 1; i <= m; i++) {\n  for (let j = 1; j <= n; j++) {"
    },
    {"stepId": "code-03", "mentorSays": "Check if characters match.\n\n```javascript\nfunction longestCommonSubsequence(text1, text2) {\n  const m = text1.length, n = text2.length;\n  const dp = Array.from({length: m + 1}, () => Array(n + 1).fill(0));\n  \n  for (let i = 1; i <= m; i++) {\n    for (let j = 1; j <= n; j++) {\n      if (text1[i - 1] === text2[j - 1]) {\n        dp[i][j] = 1 + dp[i - 1][j - 1];\n      }\n    }\n  }\n}\n```", "action": "next", "next": "code-04", "pseudocodeLineIds": ["ps4"], "example": "if (text1[i - 1] === text2[j - 1]) {\n  dp[i][j] = 1 + dp[i - 1][j - 1];"
    },
    {"stepId": "code-04", "mentorSays": "Handle when characters differ.\n\n```javascript\nfunction longestCommonSubsequence(text1, text2) {\n  const m = text1.length, n = text2.length;\n  const dp = Array.from({length: m + 1}, () => Array(n + 1).fill(0));\n  \n  for (let i = 1; i <= m; i++) {\n    for (let j = 1; j <= n; j++) {\n      if (text1[i - 1] === text2[j - 1]) {\n        dp[i][j] = 1 + dp[i - 1][j - 1];\n      } else {\n        dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);\n      }\n    }\n  }\n}\n```", "action": "next", "next": "code-05", "pseudocodeLineIds": ["ps5"], "example": "} else {\n  dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);"
    },
    {"stepId": "code-05", "mentorSays": "Return the final answer!\n\n```javascript\nfunction longestCommonSubsequence(text1, text2) {\n  const m = text1.length, n = text2.length;\n  const dp = Array.from({length: m + 1}, () => Array(n + 1).fill(0));\n  \n  for (let i = 1; i <= m; i++) {\n    for (let j = 1; j <= n; j++) {\n      if (text1[i - 1] === text2[j - 1]) {\n        dp[i][j] = 1 + dp[i - 1][j - 1];\n      } else {\n        dp[i][j] = Math.max(dp[i - 1][j], dp[i][j - 1]);\n      }\n    }\n  }\n  \n  return dp[m][n];\n}\n```", "action": "next", "next": "wrap-up", "pseudocodeLineIds": ["ps6"], "example": "return dp[m][n];"
    },
    {"stepId": "wrap-up", "mentorSays": "Excellent work! You've mastered **2D dynamic programming** and the **LCS pattern**!\n\nThis technique is used in:\nâ€¢ Version control diff tools\nâ€¢ DNA sequence analysis\nâ€¢ Spell checkers\n\nNext: **Edit Distance** - extending this to count operations!\n\nKeep crushing it! ðŸ’ª", "action": "complete"}
  ]
}
