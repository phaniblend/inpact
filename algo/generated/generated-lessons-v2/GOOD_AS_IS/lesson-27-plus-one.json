{
  "id": "plus-one",
  "title": "Plus One",
  "pattern": "array math",
  "difficulty": "easy",
  "language": "javascript",
  "status": "AI-GENERATED-V2-BATCH",
  "standardsVersion": "lessonStandards.v2-inpact",
  "curriculum": {
    "lessonNumber": 27,
    "tier": "FOUNDATION",
    "lessonOrderTag": "FOUNDATION-27",
    "introduces": [
      "carry-propagation",
      "right-to-left-processing",
      "array-unshift"
    ],
    "assumesAlreadyTaught": [
      "arrays",
      "loops"
    ],
    "prerequisiteCheckRequired": true,
    "nextRecommended": [
      "sqrt-x"
    ]
  },
  "pseudocode": [
    {
      "id": "ps1",
      "text": "Start from the rightmost digit (last index) of the array"
    },
    {
      "id": "ps2",
      "text": "Add 1 to the current digit"
    },
    {
      "id": "ps3",
      "text": "If the digit is less than 10, return the array (no carry needed)"
    },
    {
      "id": "ps4",
      "text": "If the digit equals 10, set it to 0 and move to the next digit left"
    },
    {
      "id": "ps5",
      "text": "Repeat steps 2-4 for each digit moving leftward"
    },
    {
      "id": "ps6",
      "text": "If all digits were 9 (carry propagated through entire array), create new array with 1 followed by all zeros"
    }
  ],
  "flow": [
    {
      "stepId": "objectives",
      "mentorSays": "Hey! Ready to level up your math skills? Today we're exploring the \"Plus One\" pattern - it's all about using arrays to make adding one super visual and easy to understand.\n\nHere's what you'll master:\n‚Ä¢ Recognize how arrays grow when you add just one more item\n‚Ä¢ Use visual patterns to solve plus one problems instantly\n‚Ä¢ Connect array pictures to addition equations like a pro\n\nThis builds perfectly on what you learned about single numbers, and you're going to love seeing math come to life with arrays! Let's dive in!",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Before we dive into the problem, which programming language would you like to use?\n\nThis will help me make sure you have the right building blocks.",
      "choices": [
        {
          "label": "üíõ JavaScript",
          "next": "prereq-check-js"
        },
        {
          "label": "üêç Python",
          "next": "prereq-check-python"
        },
        {
          "label": "‚òï Java",
          "next": "prereq-check-java"
        },
        {
          "label": "‚ö° C++",
          "next": "prereq-check-cpp"
        },
        {
          "label": "üíô TypeScript",
          "next": "prereq-check-ts"
        }
      ]
    },
    {
      "stepId": "prereq-check-js",
      "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in JavaScript, you'll need to know:\n- **Array-indexing** - Accessing and modifying elements at specific positions in an array\n- **Carry-arithmetic** - Understanding how addition works with carry-over between digits\n- **Array-traversal** - Iterating through arrays in reverse order from end to beginning\n- **Modular-arithmetic** - Working with remainder operations and digit manipulation\n\nDo you feel confident with these JavaScript concepts?",
      "choices": [
        {
          "label": "Yes, I know all of them",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-js"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-js"
        }
      ]
    },
    {
      "stepId": "teach-prereqs-js",
      "mentorSays": "Let me give you a quick refresher on the key concepts:\n\n**Arrays:** Use `[]` to create, `arr[i]` to access, `arr.length` for size.\n\n**Loops:** `for (let i = 0; i < arr.length; i++)` iterates through array.\n\n**Objects/Maps:** `const map = {}` creates a map. `map[key] = value` stores, `map[key]` retrieves.\n\n**Functions:** `function name(params) { return value; }` defines a function.\n\nLet's continue with the lesson!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "select-prereqs-js",
      "mentorSays": "Here's a quick refresher on the key concepts you'll need:\n\n**Arrays:** `const arr = [1, 2, 3]` creates an array. `arr[0]` accesses first element.\n\n**Loops:** `for (let i = 0; i < arr.length; i++)` iterates through array.\n\n**Objects/Maps:** `const map = {}` creates a map. `map[key] = value` stores, `map[key]` retrieves, `key in map` checks existence.\n\n**Functions:** `function name(params) { return value; }` defines a function.\n\nLet's continue!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "prereq-check-python",
      "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in Python, you'll need to know:\n- **Array-indexing** - Accessing and modifying elements at specific positions in an array\n- **Carry-arithmetic** - Understanding how addition works with carry-over between digits\n- **Array-traversal** - Iterating through arrays in reverse order from end to beginning\n- **Modular-arithmetic** - Working with remainder operations and digit manipulation\n\nDo you feel confident with these Python concepts?",
      "choices": [
        {
          "label": "Yes, I know all of them",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-python"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-python"
        }
      ]
    },
    {
      "stepId": "teach-prereqs-python",
      "mentorSays": "Let me give you a quick refresher on the key concepts:\n\n**Lists:** Use `[]` to create, `lst[i]` to access, `len(lst)` for size.\n\n**Loops:** `for i in range(len(lst))` iterates through list.\n\n**Dictionaries:** `dict = {}` creates a dict. `dict[key] = value` stores, `dict[key]` retrieves.\n\n**Functions:** `def name(params): return value` defines a function.\n\nLet's continue with the lesson!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "select-prereqs-python",
      "mentorSays": "Here's a quick refresher on the key concepts you'll need:\n\n**Lists:** `lst = [1, 2, 3]` creates a list. `lst[0]` accesses first element.\n\n**Loops:** `for i in range(len(lst))` iterates through list.\n\n**Dictionaries:** `dict = {}` creates a dict. `dict[key] = value` stores, `dict[key]` retrieves, `key in dict` checks existence.\n\n**Functions:** `def name(params): return value` defines a function.\n\nLet's continue!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "prereq-check-java",
      "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in Java, you'll need to know:\n- **Array-indexing** - Accessing and modifying elements at specific positions in an array\n- **Carry-arithmetic** - Understanding how addition works with carry-over between digits\n- **Array-traversal** - Iterating through arrays in reverse order from end to beginning\n- **Modular-arithmetic** - Working with remainder operations and digit manipulation\n\nDo you feel confident with these Java concepts?",
      "choices": [
        {
          "label": "Yes, I know all of them",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-java"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-java"
        }
      ]
    },
    {
      "stepId": "teach-prereqs-java",
      "mentorSays": "Let me give you a quick refresher on the key concepts:\n\n**Arrays:** Use `int[] arr = new int[size]` to create, `arr[i]` to access, `arr.length` for size.\n\n**Loops:** `for (int i = 0; i < arr.length; i++)` iterates through array.\n\n**HashMaps:** `Map<K, V> map = new HashMap<>()` creates a map. `map.put(key, value)` stores, `map.get(key)` retrieves.\n\n**Functions:** `public returnType name(params) { return value; }` defines a method.\n\nLet's continue with the lesson!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "select-prereqs-java",
      "mentorSays": "Here's a quick refresher on the key concepts you'll need:\n\n**Arrays:** `int[] arr = {1, 2, 3}` creates an array. `arr[0]` accesses first element.\n\n**Loops:** `for (int i = 0; i < arr.length; i++)` iterates through array.\n\n**HashMaps:** `Map<K, V> map = new HashMap<>()` creates a map. `map.put(key, value)` stores, `map.get(key)` retrieves, `map.containsKey(key)` checks existence.\n\n**Functions:** `public returnType name(params) { return value; }` defines a method.\n\nLet's continue!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "prereq-check-cpp",
      "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in C++, you'll need to know:\n- **Array-indexing** - Accessing and modifying elements at specific positions in an array\n- **Carry-arithmetic** - Understanding how addition works with carry-over between digits\n- **Array-traversal** - Iterating through arrays in reverse order from end to beginning\n- **Modular-arithmetic** - Working with remainder operations and digit manipulation\n\nDo you feel confident with these C++ concepts?",
      "choices": [
        {
          "label": "Yes, I know all of them",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-cpp"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-cpp"
        }
      ]
    },
    {
      "stepId": "teach-prereqs-cpp",
      "mentorSays": "Let me give you a quick refresher on the key concepts:\n\n**Arrays:** Use `vector<int> arr` to create, `arr[i]` to access, `arr.size()` for size.\n\n**Loops:** `for (int i = 0; i < arr.size(); i++)` iterates through array.\n\n**Maps:** `unordered_map<K, V> map` creates a map. `map[key] = value` stores, `map[key]` retrieves.\n\n**Functions:** `returnType name(params) { return value; }` defines a function.\n\nLet's continue with the lesson!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "select-prereqs-cpp",
      "mentorSays": "Here's a quick refresher on the key concepts you'll need:\n\n**Vectors:** `vector<int> arr = {1, 2, 3}` creates a vector. `arr[0]` accesses first element.\n\n**Loops:** `for (int i = 0; i < arr.size(); i++)` iterates through vector.\n\n**Maps:** `unordered_map<K, V> map` creates a map. `map[key] = value` stores, `map[key]` retrieves, `map.count(key)` checks existence.\n\n**Functions:** `returnType name(params) { return value; }` defines a function.\n\nLet's continue!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "prereq-check-ts",
      "mentorSays": "Great choice! Before we tackle this problem, let me make sure you have the building blocks.\n\nTo solve this in TypeScript, you'll need to know:\n- **Array-indexing** - Accessing and modifying elements at specific positions in an array\n- **Carry-arithmetic** - Understanding how addition works with carry-over between digits\n- **Array-traversal** - Iterating through arrays in reverse order from end to beginning\n- **Modular-arithmetic** - Working with remainder operations and digit manipulation\n\nDo you feel confident with these TypeScript concepts?",
      "choices": [
        {
          "label": "Yes, I know all of them",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-ts"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-ts"
        }
      ]
    },
    {
      "stepId": "teach-prereqs-ts",
      "mentorSays": "Let me give you a quick refresher on the key concepts:\n\n**Arrays:** Use `[]` to create, `arr[i]` to access, `arr.length` for size.\n\n**Loops:** `for (let i = 0; i < arr.length; i++)` iterates through array.\n\n**Maps:** `const map = new Map<K, V>()` creates a map. `map.set(key, value)` stores, `map.get(key)` retrieves.\n\n**Functions:** `function name(params): returnType { return value; }` defines a function.\n\nLet's continue with the lesson!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "select-prereqs-ts",
      "mentorSays": "Here's a quick refresher on the key concepts you'll need:\n\n**Arrays:** `const arr: number[] = [1, 2, 3]` creates an array. `arr[0]` accesses first element.\n\n**Loops:** `for (let i = 0; i < arr.length; i++)` iterates through array.\n\n**Maps:** `const map = new Map<K, V>()` creates a map. `map.set(key, value)` stores, `map.get(key)` retrieves, `map.has(key)` checks existence.\n\n**Functions:** `function name(params): returnType { return value; }` defines a function.\n\nLet's continue!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "problem-understanding",
      "mentorSays": "Perfect! Now let's understand what the Plus One problem asks for.\n\nImagine you have a row of odometer dials in your car, each showing digits 0-9. When you drive one more mile and the rightmost dial is at 9, it flips to 0 and \"carries over\" to make the next dial increase by 1 - just like adding 1 to a number represented as an array of digits, where 9s become 0s and trigger carries moving left.\n\n# Plus One Problem\n\n## What we're trying to do\nYou're given an array of digits that represents a large integer, and you need to add 1 to it. The catch? You can't just convert it to a number (because it might be too big for standard integer types), so you have to work with the array directly and return the result as an array.\n\n## Let's see it in action\nTake the array `[1,2,9]` - this represents the number 129.\n\nWhen we add 1 to 129, we get 130.\n\nSo `[1,2,9]` becomes `[1,3,0]`.\n\n## Why this works\nThink about adding 1 by hand:\n- We start from the rightmost digit (9)\n- 9 + 1 = 10, so we write down 0 and carry the 1\n- Move to the next digit: 2 + 1 (carry) = 3, no carry needed\n- The leftmost digit (1) stays the same since there's no carry\n\nThe tricky cases happen when you have trailing 9s (like `[9,9,9]` ‚Üí `[1,0,0,0]`) because the carry propagates all the way to the front and creates a new digit!",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "You need to add 1 to [9,9,9]. How would YOU approach this?",
      "choices": [
        {
          "label": "Convert to integer, add 1, convert back to array",
          "next": "wrong-choice"
        },
        {
          "label": "Start from rightmost digit, add 1, handle carries digit by digit",
          "next": "core-idea"
        }
      ]
    },
    {
      "stepId": "wrong-choice",
      "mentorSays": "This fails for very large numbers that exceed language integer limits. For example, a 100-digit number would cause overflow errors, making this approach unreliable for the general case.",
      "action": "next",
      "next": "pattern-recognition"
    },
    {
      "stepId": "pattern-recognition",
      "mentorSays": "### Pattern Recognition: Digit-by-Digit Arithmetic\n\n**This problem follows the \"simulate arithmetic operations\" pattern:**\n- **Right-to-left processing** - Start from least significant digit (rightmost)\n- **Carry propagation** - Handle carries that cascade leftward\n- **Early termination** - Stop when no carry remains\n- **Edge case handling** - May need to add new digit (e.g., 999 + 1 = 1000)\n\n**Similar problems:**\n- Add Two Numbers (linked list version)\n- Multiply Strings (similar digit manipulation)\n- Add Binary (binary addition with carries)\n\n**Key insight:** Process digits from right to left, just like manual addition. When a digit becomes 10, set it to 0 and carry 1 to the next position.",
      "action": "next",
      "next": "invariant"
    },
    {
      "stepId": "invariant",
      "mentorSays": "### Invariant: Processed Digits Are Correct, Carry Propagates Left\n\n**Invariant maintained throughout:**\n- **After processing digit i:** All digits from `i+1` to `length-1` are correct\n- **Carry state:** If `carry > 0`, we continue processing leftward\n- **Early termination:** If `carry === 0` and digit < 10, all remaining digits are unchanged\n\n**Why this works:**\n- Start from rightmost digit (least significant)\n- Add 1 (or carry) to current digit\n- If result < 10, we're done (no carry)\n- If result = 10, set digit to 0, carry = 1, continue left\n- If we reach index 0 with carry = 1, insert new digit at front\n\n**Invariant guarantee:** After processing digit `i`, the digits `[i+1..length-1]` represent the correct result of adding 1 to the original number's digits `[i+1..length-1]`.",
      "action": "next",
      "next": "core-idea"
    },
    {
      "stepId": "core-idea",
      "mentorSays": "The key insight is to **simulate elementary addition** by processing digits from right to left with **carry propagation**. When adding 1 to a digit, if the result is less than 10, we can stop immediately since no carry is needed. If the result equals 10, we set the current digit to 0 and carry 1 to the next position, continuing this process until no carry remains. This works because it mimics how we naturally add numbers by hand, handling the cascade of carries that can occur when digits become 10 or greater.",
      "action": "next",
      "next": "walkthrough"
    },
    {
      "stepId": "walkthrough",
      "mentorSays": "Let's trace through `[1,2,9]`:\n- Step 1: Start from rightmost digit (9), add 1 ‚Üí 9 + 1 = 10, write 0 and carry 1\n- Step 2: Move to digit 2, add carry 1 ‚Üí 2 + 1 = 3, no carry needed\n- Step 3: Move to digit 1, no carry to add ‚Üí digit stays 1\n- Final answer: **[1,3,0]**",
      "action": "next",
      "next": "pseudocode-step",
      "pseudocodeLineIds": [
        "ps1",
        "ps2",
        "ps3"
      ]
    },
    {
      "stepId": "pseudocode-step",
      "mentorSays": "Here's our plan written as pseudocode:",
      "action": "next",
      "next": "coding-intro",
      "pseudocodeLineIds": [
        "ps1",
        "ps2",
        "ps3",
        "ps4",
        "ps5",
        "ps6"
      ]
    },
    {
      "stepId": "coding-intro",
      "mentorSays": "Now let's translate this into JavaScript, building it step by step.\n\nRemember: we'll add just 1-3 lines at a time!",
      "action": "next",
      "next": "code-01"
    },
    {
      "stepId": "code-01",
      "mentorSays": "Set up function signature and get last index\n\n```javascript\nfunction plusOne(digits) {\n    let i = digits.length - 1;\n}\n```",
      "action": "next",
      "next": "code-02",
      "pseudocodeLineIds": [
        "ps1"
      ],
      "example": "function plusOne(digits) {\n    let i = digits.length - 1;\n}"
    },
    {
      "stepId": "code-02",
      "mentorSays": "Start loop from rightmost digit moving left\n\n```javascript\nfunction plusOne(digits) {\n    let i = digits.length - 1;\n    while (i >= 0) {\n    }\n}\n```",
      "action": "next",
      "next": "code-03",
      "pseudocodeLineIds": [
        "ps2"
      ],
      "example": "    while (i >= 0) {\n    }"
    },
    {
      "stepId": "code-03",
      "mentorSays": "Add 1 to current digit\n\n```javascript\nfunction plusOne(digits) {\n    let i = digits.length - 1;\n    while (i >= 0) {\n        digits[i]++;\n    }\n}\n```",
      "action": "next",
      "next": "code-04",
      "pseudocodeLineIds": [
        "ps3"
      ],
      "example": "        digits[i]++;"
    },
    {
      "stepId": "code-04",
      "mentorSays": "Check if digit is less than 10 - if so, we're done\n\n```javascript\nfunction plusOne(digits) {\n    let i = digits.length - 1;\n    while (i >= 0) {\n        digits[i]++;\n        if (digits[i] < 10) {\n            return digits;\n        }\n    }\n}\n```",
      "action": "next",
      "next": "code-05",
      "pseudocodeLineIds": [
        "ps4"
      ],
      "example": "        if (digits[i] < 10) {\n            return digits;\n        }"
    },
    {
      "stepId": "code-05",
      "mentorSays": "If digit is 10, set to 0 and continue carrying left\n\n```javascript\nfunction plusOne(digits) {\n    let i = digits.length - 1;\n    while (i >= 0) {\n        digits[i]++;\n        if (digits[i] < 10) {\n            return digits;\n        }\n        digits[i] = 0;\n        i--;\n    }\n}\n```",
      "action": "next",
      "next": "code-06",
      "pseudocodeLineIds": [
        "ps5"
      ],
      "example": "        digits[i] = 0;\n        i--;"
    },
    {
      "stepId": "code-06",
      "mentorSays": "Handle overflow case - all digits were 9\n\n```javascript\nfunction plusOne(digits) {\n    let i = digits.length - 1;\n    while (i >= 0) {\n        digits[i]++;\n        if (digits[i] < 10) {\n            return digits;\n        }\n        digits[i] = 0;\n        i--;\n    }\n    return [1, ...digits];\n}\n```",
      "action": "next",
      "next": "common-mistakes",
      "pseudocodeLineIds": [
        "ps6"
      ],
      "example": "    return [1, ...digits];"
    },
    {
      "stepId": "common-mistakes",
      "mentorSays": "### Common Mistakes\n\n1. **Off-by-one errors** - Check array bounds and loop conditions carefully\n2. **Edge cases** - Handle empty inputs, single elements, and boundary conditions\n3. **Wrong data structure** - Choose the right structure (array, map, set, etc.) for the problem\n4. **Incorrect loop conditions** - Ensure loops terminate correctly\n5. **Type errors** - Make sure variable types match expected operations",
      "action": "next",
      "next": "interview-talk-track"
    },
    {
      "stepId": "interview-talk-track",
      "mentorSays": "### Interview Talk Track (30 seconds)\n\n**How to explain this solution in an interview:**\n\n1. **\"I'll use the optimal approach for this problem\"**\n2. **\"The key insight is [problem-specific insight]\"**\n3. **\"I'll implement this by [main steps]\"**\n4. **\"This gives us [time complexity] time complexity with [space complexity] space\"**\n5. **\"The tradeoff is [any tradeoffs mentioned]\"**",
      "action": "next",
      "next": "wrap-up"
    },
    {
      "stepId": "wrap-up",
      "mentorSays": "Great work mastering array manipulation and mathematical edge cases! You've shown excellent problem-solving skills by handling the tricky carry operations that make \"Plus One\" more challenging than it first appears. Next, we'll tackle sqrt-x, where you'll dive into binary search algorithms and precision mathematics.\n\n**Follow-up variant:**\n\nHow would you modify this solution if [problem constraint changed]? What would be the new time/space complexity?",
      "action": "complete"
    }
  ]
}