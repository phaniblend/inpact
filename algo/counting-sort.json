{
  "id": "counting-sort",
  "title": "Counting sort",
  "pattern": "sorting",
  "difficulty": "medium",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "title",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand how counting sort works\n2. Count occurrences of each value\n3. Use cumulative counts to place elements in sorted order\n4. Implement counting sort step by step in your chosen language",
      "action": "continue",
      "next": "problem-illustration"
    },
    {
      "stepId": "problem-illustration",
      "mentorSays": "Counting Sort is a non-comparison sorting algorithm.\n\nIt's FASTER than O(n log n) when the range of values is small!\n\nEXAMPLE: Sort [3, 1, 4, 1, 5, 2, 3]\nRange: 0 to 5\n\nSTEP 1: Count occurrences\nWe create a count array to track how many times each value appears.\n\ncount[0] = 0  (zero 0s)\ncount[1] = 2  (two 1s)\ncount[2] = 1  (one 2)\ncount[3] = 2  (two 3s)\ncount[4] = 1  (one 4)\ncount[5] = 1  (one 5)\n\nSTEP 2: Convert to cumulative sum\nWe convert the count array to cumulative sums. This tells us where each value should be placed.\n\ncumsum[0] = 0\ncumsum[1] = 0 + 2 = 2  (all 1s go in positions 0-1)\ncumsum[2] = 2 + 1 = 3  (all 2s go in position 2)\ncumsum[3] = 3 + 2 = 5  (all 3s go in positions 3-4)\ncumsum[4] = 5 + 1 = 6  (all 4s go in position 5)\ncumsum[5] = 6 + 1 = 7  (all 5s go in position 6)\n\nSTEP 3: Build output (go backwards to maintain stability)\nWe process the original array from right to left to maintain stability.\n\nFor each element in original array (right to left):\n  Place it at position cumsum[element] - 1\n  Decrement cumsum[element]\n\nProcessing [3, 1, 4, 1, 5, 2, 3] from right to left:\n- 3 â†’ position 4 (cumsum[3]-1), cumsum[3] = 4\n- 2 â†’ position 2 (cumsum[2]-1), cumsum[2] = 2\n- 5 â†’ position 6 (cumsum[5]-1), cumsum[5] = 6\n- 1 â†’ position 1 (cumsum[1]-1), cumsum[1] = 1\n- 4 â†’ position 5 (cumsum[4]-1), cumsum[4] = 5\n- 1 â†’ position 0 (cumsum[1]-1), cumsum[1] = 0\n- 3 â†’ position 3 (cumsum[3]-1), cumsum[3] = 3\n\nResult: [1, 1, 2, 3, 3, 4, 5] âœ“ SORTED!\n\nWHY GO BACKWARDS?\nGoing backwards maintains stability - equal elements keep their original relative order.\n\nTIME COMPLEXITY: O(n + k) where k = range of values\nSPACE COMPLEXITY: O(n + k)\n\nWhen to use: k is small (k â‰ˆ n or k << nÂ²)\nWhen NOT to use: k is very large (k >> n)\n\nCOMPARISON WITH OTHER SORTS:\n- Quick Sort: O(n log n) average\n- Merge Sort: O(n log n) worst case\n- Counting Sort: O(n + k) - FASTER when k is small!\n\nExample: Sorting 1 million numbers in range [0, 100]\n- Quick Sort: ~20 million comparisons\n- Counting Sort: ~1.1 million operations âœ“",
      "example": "arr = [4, 2, 2, 8, 3, 3, 1]\n\nStep 1: Find range â†’ min=1, max=8, range=8\nStep 2: Count â†’ count[0]=1, count[1]=2, count[2]=2, count[3]=1, count[7]=1\nStep 3: Cumulative â†’ [1, 3, 5, 6, 6, 6, 6, 7]\nStep 4: Place â†’ [1, 2, 2, 3, 3, 4, 8]\n\nFinal: [1, 2, 2, 3, 3, 4, 8]",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand what counting sort does, here's the real question:\n\nHow would YOU implement counting sort?\n\nThink about it for a moment. What approach feels natural to you?",
      "choices": [
        {
          "label": "Count occurrences, build cumulative counts, then place elements",
          "next": "explore-counting-approach"
        },
        {
          "label": "Use a different sorting approach",
          "next": "explore-alternative"
        }
      ]
    },
    {
      "stepId": "explore-alternative",
      "mentorSays": "Other sorting approaches like bubble sort or merge sort work, but counting sort is special - it's a non-comparison sort that's very efficient for small ranges!\n\nLet's learn the counting sort approach, which is O(n + k) time - much better than O(nÂ²) or O(n log n) when the range k is small.",
      "action": "continue",
      "next": "explore-counting-approach"
    },
    {
      "stepId": "explore-counting-approach",
      "mentorSays": "Excellent choice! Counting sort is a non-comparison sorting algorithm. Here's the core idea:\n\n1. **Find range**: Determine min and max values to know the range\n2. **Count array**: Create array to count occurrences of each value\n3. **Count occurrences**: Count how many times each value appears\n4. **Cumulative counts**: Convert to cumulative counts (how many elements â‰¤ each value)\n5. **Place elements**: Use cumulative counts to place each element in correct position\n\nLet's trace this with [4, 2, 2, 8, 3, 3, 1]:\n\n- **Range**: min=1, max=8, size=8\n- **Count**: [1, 2, 2, 1, 0, 0, 0, 1] (for values 1-8)\n- **Cumulative**: [1, 3, 5, 6, 6, 6, 6, 7]\n- **Place**: Use cumulative to determine positions, going backwards through original array\n- **Result**: [1, 2, 2, 3, 3, 4, 8]\n\nThis is O(n + k) time complexity where k is the range - much better than O(nÂ²) for small ranges! Now let's code it step by step.",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Great! Now let's code this solution. Which programming language would you like to use?",
      "choices": [
        {
          "label": "JavaScript",
          "next": "variable-check-js"
        },
        {
          "label": "Python",
          "next": "variable-check-python"
        },
        {
          "label": "Java",
          "next": "variable-check-java"
        },
        {
          "label": "C++",
          "next": "variable-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "variable-check-ts"
        }
      ]
    },
    {
      "stepId": "variable-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-js"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-js"
        }
      ]
    },
    {
      "stepId": "variable-explanation-js",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'count') and put data inside it.\n\nFor example, 'let count = 0;' creates a variable that stores the number 0. Later, you can use that variable name to refer to it.",
      "example": "let count = 0;\n\nNow the variable refers to the number 0",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "array-check-js"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-js"
        }
      ]
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "function add(a, b) {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "array-check-js"
    },
    {
      "stepId": "array-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what an array is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know arrays",
          "next": "counting-array-check-js"
        },
        {
          "label": "No, explain arrays",
          "next": "array-explanation-js"
        }
      ]
    },
    {
      "stepId": "counting-array-check-js",
      "mentorSays": "Do you understand what a count array is?",
      "choices": [
        {
          "label": "Yes, I know counting-array",
          "next": "stable-sort-check-js"
        },
        {
          "label": "No, explain counting-array",
          "next": "counting-array-explanation-js"
        }
      ]
    },
    {
      "stepId": "stable-sort-check-js",
      "mentorSays": "Do you understand what a stable sort is?",
      "choices": [
        {
          "label": "Yes, I know stable-sort",
          "next": "coding-start-js"
        },
        {
          "label": "No, explain stable-sort",
          "next": "stable-sort-explanation-js"
        }
      ]
    },
    {
      "stepId": "stable-sort-explanation-js",
      "mentorSays": "A stable sort preserves the relative order of equal elements. Example: [(3,a), (1,b), (3,c), (1,d)]. Stable sort: [(1,b), (1,d), (3,a), (3,c)]. Notice: (1,b) comes before (1,d) - original order preserved! Counting sort IS stable when implemented correctly.\n\n// Stable sort preserves relative order:\n// Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n// Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n// Notice: (1,'b') before (1,'d') - original order preserved!\n\nGot it?",
      "example": "// Stable sort preserves relative order:\n// Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n// Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n// Notice: (1,'b') before (1,'d') - original order preserved!",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "counting-array-explanation-js",
      "mentorSays": "A count array tracks how many times each value appears. Example: arr = [3, 1, 2, 3, 1]. Range: 0 to 3. count[0] = 0, count[1] = 2, count[2] = 1, count[3] = 2. This is the foundation of counting sort!\n\n// Count array tracks occurrences:\nlet arr = [3, 1, 2, 3, 1];\nlet count = [0, 0, 0, 0];  // for range 0-3\n\nfor (let num of arr) {\n  count[num]++;\n}\n// count = [0, 2, 1, 2]\n\nGot it?",
      "example": "// Count array tracks occurrences:\nlet arr = [3, 1, 2, 3, 1];\nlet count = [0, 0, 0, 0];  // for range 0-3\n\nfor (let num of arr) {\n  count[num]++;\n}\n// count = [0, 2, 1, 2]",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "array-explanation-js",
      "mentorSays": "An array is like a list of items that keeps them in order. Each item has a position number called an 'index'. Array indices start counting from 0.",
      "example": "arr = [1, 2, 3]\n\narr[0] = 1\narr[1] = 2\narr[2] = 3",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Perfect! Let's implement counting sort in JavaScript. We'll create a function that counts occurrences and places elements in sorted order.",
      "example": "function countingSort(arr) {\n  // Your code here\n}",
      "action": "continue",
      "next": "coding-find-range-js"
    },
    {
      "stepId": "coding-find-range-js",
      "mentorSays": "First, let's find the minimum and maximum values to determine the range. We'll also handle the edge case of an empty array.",
      "example": "function countingSort(arr) {\n  if (arr.length === 0) return arr;\n  \n  // Find min and max\n  let min = arr[0];\n  let max = arr[0];\n  for (let i = 1; i < arr.length; i++) {\n    if (arr[i] < min) min = arr[i];\n    if (arr[i] > max) max = arr[i];\n  }\n  \n  const range = max - min + 1;",
      "action": "continue",
      "next": "coding-create-count-js"
    },
    {
      "stepId": "coding-create-count-js",
      "mentorSays": "Now, create a count array to store occurrences of each value. The size is the range (max - min + 1).",
      "example": "function countingSort(arr) {\n  // ... find range ...\n  \n  // Create count array\n  const count = new Array(range).fill(0);",
      "action": "continue",
      "next": "coding-count-occurrences-js"
    },
    {
      "stepId": "coding-count-occurrences-js",
      "mentorSays": "Count how many times each value appears in the array. We map each value to an index: value - min.",
      "example": "function countingSort(arr) {\n  // ... count array ...\n  \n  // Count occurrences\n  for (let i = 0; i < arr.length; i++) {\n    count[arr[i] - min]++;\n  }",
      "action": "continue",
      "next": "coding-cumulative-js"
    },
    {
      "stepId": "coding-cumulative-js",
      "mentorSays": "Convert count array to cumulative counts. Each position now represents how many elements are â‰¤ that value.",
      "example": "function countingSort(arr) {\n  // ... count occurrences ...\n  \n  // Build cumulative counts\n  for (let i = 1; i < range; i++) {\n    count[i] += count[i - 1];\n  }",
      "action": "continue",
      "next": "coding-place-elements-js"
    },
    {
      "stepId": "coding-place-elements-js",
      "mentorSays": "Create output array and place each element in its correct position using cumulative counts. We go backwards through the original array to maintain stability.",
      "example": "function countingSort(arr) {\n  // ... cumulative counts ...\n  \n  // Place elements in sorted order\n  const output = new Array(arr.length);\n  for (let i = arr.length - 1; i >= 0; i--) {\n    output[count[arr[i] - min] - 1] = arr[i];\n    count[arr[i] - min]--;\n  }\n  \n  return output;",
      "action": "continue",
      "next": "coding-return-js"
    },
    {
      "stepId": "coding-return-js",
      "mentorSays": "Finally, return the sorted output array.",
      "example": "return output;",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "test-code-js",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter calling countingSort(arr), it should return:\n[1, 2, 2, 3, 3, 4, 8]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter countingSort(arr):\n[1, 2, 2, 3, 3, 4, 8]",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Python?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-python"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-python"
        }
      ]
    },
    {
      "stepId": "variable-explanation-python",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'count') and put data inside it.\n\nFor example, 'count = 0' creates a variable that stores the number 0.",
      "example": "count = 0\n\nNow the variable refers to the number 0",
      "action": "continue",
      "next": "function-check-python"
    },
    {
      "stepId": "function-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in Python?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "array-check-python"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-python"
        }
      ]
    },
    {
      "stepId": "function-explanation-python",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "def add(a, b):\n    return a + b\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "array-check-python"
    },
    {
      "stepId": "array-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a list is in Python?",
      "choices": [
        {
          "label": "Yes, I know lists",
          "next": "counting-array-check-python"
        },
        {
          "label": "No, explain lists",
          "next": "array-explanation-python"
        }
      ]
    },
    {
      "stepId": "counting-array-check-python",
      "mentorSays": "Do you understand what a count array is?",
      "choices": [
        {
          "label": "Yes, I know counting-array",
          "next": "stable-sort-check-python"
        },
        {
          "label": "No, explain counting-array",
          "next": "counting-array-explanation-python"
        }
      ]
    },
    {
      "stepId": "stable-sort-check-python",
      "mentorSays": "Do you understand what a stable sort is?",
      "choices": [
        {
          "label": "Yes, I know stable-sort",
          "next": "coding-start-python"
        },
        {
          "label": "No, explain stable-sort",
          "next": "stable-sort-explanation-python"
        }
      ]
    },
    {
      "stepId": "stable-sort-explanation-python",
      "mentorSays": "A stable sort preserves the relative order of equal elements. Example: [(3,a), (1,b), (3,c), (1,d)]. Stable sort: [(1,b), (1,d), (3,a), (3,c)]. Notice: (1,b) comes before (1,d) - original order preserved! Counting sort IS stable when implemented correctly.\n\n# Stable sort preserves relative order:\n# Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n# Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n# Notice: (1,'b') before (1,'d') - original order preserved!\n\nGot it?",
      "example": "# Stable sort preserves relative order:\n# Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n# Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n# Notice: (1,'b') before (1,'d') - original order preserved!",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "counting-array-explanation-python",
      "mentorSays": "A count array tracks how many times each value appears. Example: arr = [3, 1, 2, 3, 1]. Range: 0 to 3. count[0] = 0, count[1] = 2, count[2] = 1, count[3] = 2. This is the foundation of counting sort!\n\n# Count array tracks occurrences:\narr = [3, 1, 2, 3, 1]\ncount = [0] * 4  # for range 0-3\n\nfor num in arr:\n    count[num] += 1\n# count = [0, 2, 1, 2]\n\nGot it?",
      "example": "# Count array tracks occurrences:\narr = [3, 1, 2, 3, 1]\ncount = [0] * 4  # for range 0-3\n\nfor num in arr:\n    count[num] += 1\n# count = [0, 2, 1, 2]",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "array-explanation-python",
      "mentorSays": "A list is like an array - a collection of items that keeps them in order. Each item has a position number called an 'index'. List indices start counting from 0.",
      "example": "arr = [1, 2, 3]\n\narr[0] = 1\narr[1] = 2\narr[2] = 3",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "coding-start-python",
      "mentorSays": "Perfect! Let's implement counting sort in Python. We'll create a function that counts occurrences and places elements in sorted order.",
      "example": "def counting_sort(arr):\n    # Your code here\n    pass",
      "action": "continue",
      "next": "coding-find-range-python"
    },
    {
      "stepId": "coding-find-range-python",
      "mentorSays": "First, let's find the minimum and maximum values to determine the range. We'll also handle the edge case of an empty list.",
      "example": "def counting_sort(arr):\n    if len(arr) == 0:\n        return arr\n    \n    # Find min and max\n    min_val = min(arr)\n    max_val = max(arr)\n    range_size = max_val - min_val + 1",
      "action": "continue",
      "next": "coding-create-count-python"
    },
    {
      "stepId": "coding-create-count-python",
      "mentorSays": "Now, create a count list to store occurrences of each value. The size is the range (max - min + 1).",
      "example": "def counting_sort(arr):\n    # ... find range ...\n    \n    # Create count list\n    count = [0] * range_size",
      "action": "continue",
      "next": "coding-count-occurrences-python"
    },
    {
      "stepId": "coding-count-occurrences-python",
      "mentorSays": "Count how many times each value appears in the list. We map each value to an index: value - min_val.",
      "example": "def counting_sort(arr):\n    # ... count list ...\n    \n    # Count occurrences\n    for num in arr:\n        count[num - min_val] += 1",
      "action": "continue",
      "next": "coding-cumulative-python"
    },
    {
      "stepId": "coding-cumulative-python",
      "mentorSays": "Convert count list to cumulative counts. Each position now represents how many elements are â‰¤ that value.",
      "example": "def counting_sort(arr):\n    # ... count occurrences ...\n    \n    # Build cumulative counts\n    for i in range(1, range_size):\n        count[i] += count[i - 1]",
      "action": "continue",
      "next": "coding-place-elements-python"
    },
    {
      "stepId": "coding-place-elements-python",
      "mentorSays": "Create output list and place each element in its correct position using cumulative counts. We go backwards through the original list to maintain stability.",
      "example": "def counting_sort(arr):\n    # ... cumulative counts ...\n    \n    # Place elements in sorted order\n    output = [0] * len(arr)\n    for i in range(len(arr) - 1, -1, -1):\n        output[count[arr[i] - min_val] - 1] = arr[i]\n        count[arr[i] - min_val] -= 1\n    \n    return output",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "test-code-python",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter calling counting_sort(arr), it should return:\n[1, 2, 2, 3, 3, 4, 8]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter counting_sort(arr):\n[1, 2, 2, 3, 3, 4, 8]",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Java?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-java"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-java"
        }
      ]
    },
    {
      "stepId": "variable-explanation-java",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'count') and put data inside it.\n\nFor example, 'int count = 0;' creates a variable that stores the number 0.",
      "example": "int count = 0;\n\nNow the variable refers to the number 0",
      "action": "continue",
      "next": "function-check-java"
    },
    {
      "stepId": "function-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a method is in Java?",
      "choices": [
        {
          "label": "Yes, I know methods",
          "next": "array-check-java"
        },
        {
          "label": "No, explain methods",
          "next": "function-explanation-java"
        }
      ]
    },
    {
      "stepId": "function-explanation-java",
      "mentorSays": "A method is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "public int add(int a, int b) {\n    return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "array-check-java"
    },
    {
      "stepId": "array-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what an array is in Java?",
      "choices": [
        {
          "label": "Yes, I know arrays",
          "next": "counting-array-check-java"
        },
        {
          "label": "No, explain arrays",
          "next": "array-explanation-java"
        }
      ]
    },
    {
      "stepId": "counting-array-check-java",
      "mentorSays": "Do you understand what a count array is?",
      "choices": [
        {
          "label": "Yes, I know counting-array",
          "next": "stable-sort-check-java"
        },
        {
          "label": "No, explain counting-array",
          "next": "counting-array-explanation-java"
        }
      ]
    },
    {
      "stepId": "stable-sort-check-java",
      "mentorSays": "Do you understand what a stable sort is?",
      "choices": [
        {
          "label": "Yes, I know stable-sort",
          "next": "coding-start-java"
        },
        {
          "label": "No, explain stable-sort",
          "next": "stable-sort-explanation-java"
        }
      ]
    },
    {
      "stepId": "stable-sort-explanation-java",
      "mentorSays": "A stable sort preserves the relative order of equal elements. Example: [(3,a), (1,b), (3,c), (1,d)]. Stable sort: [(1,b), (1,d), (3,a), (3,c)]. Notice: (1,b) comes before (1,d) - original order preserved! Counting sort IS stable when implemented correctly.\n\n// Stable sort preserves relative order:\n// Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n// Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n// Notice: (1,'b') before (1,'d') - original order preserved!\n\nGot it?",
      "example": "// Stable sort preserves relative order:\n// Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n// Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n// Notice: (1,'b') before (1,'d') - original order preserved!",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "counting-array-explanation-java",
      "mentorSays": "A count array tracks how many times each value appears. Example: arr = [3, 1, 2, 3, 1]. Range: 0 to 3. count[0] = 0, count[1] = 2, count[2] = 1, count[3] = 2. This is the foundation of counting sort!\n\n// Count array tracks occurrences:\nint[] arr = {3, 1, 2, 3, 1};\nint[] count = new int[4];  // for range 0-3\n\nfor (int num : arr) {\n    count[num]++;\n}\n// count = [0, 2, 1, 2]\n\nGot it?",
      "example": "// Count array tracks occurrences:\nint[] arr = {3, 1, 2, 3, 1};\nint[] count = new int[4];  // for range 0-3\n\nfor (int num : arr) {\n    count[num]++;\n}\n// count = [0, 2, 1, 2]",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "array-explanation-java",
      "mentorSays": "An array is like a list of items that keeps them in order. Each item has a position number called an 'index'. Array indices start counting from 0.",
      "example": "int[] arr = {1, 2, 3};\n\narr[0] = 1\narr[1] = 2\narr[2] = 3",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "coding-start-java",
      "mentorSays": "Perfect! Let's implement counting sort in Java. We'll create a method that counts occurrences and places elements in sorted order.",
      "example": "public static int[] countingSort(int[] arr) {\n    // Your code here\n}",
      "action": "continue",
      "next": "coding-find-range-java"
    },
    {
      "stepId": "coding-find-range-java",
      "mentorSays": "First, let's find the minimum and maximum values to determine the range. We'll also handle the edge case of an empty array.",
      "example": "public static int[] countingSort(int[] arr) {\n    if (arr.length == 0) return arr;\n    \n    // Find min and max\n    int min = arr[0];\n    int max = arr[0];\n    for (int i = 1; i < arr.length; i++) {\n        if (arr[i] < min) min = arr[i];\n        if (arr[i] > max) max = arr[i];\n    }\n    \n    int range = max - min + 1;",
      "action": "continue",
      "next": "coding-create-count-java"
    },
    {
      "stepId": "coding-create-count-java",
      "mentorSays": "Now, create a count array to store occurrences of each value. The size is the range (max - min + 1).",
      "example": "public static int[] countingSort(int[] arr) {\n    // ... find range ...\n    \n    // Create count array\n    int[] count = new int[range];",
      "action": "continue",
      "next": "coding-count-occurrences-java"
    },
    {
      "stepId": "coding-count-occurrences-java",
      "mentorSays": "Count how many times each value appears in the array. We map each value to an index: value - min.",
      "example": "public static int[] countingSort(int[] arr) {\n    // ... count array ...\n    \n    // Count occurrences\n    for (int i = 0; i < arr.length; i++) {\n        count[arr[i] - min]++;\n    }",
      "action": "continue",
      "next": "coding-cumulative-java"
    },
    {
      "stepId": "coding-cumulative-java",
      "mentorSays": "Convert count array to cumulative counts. Each position now represents how many elements are â‰¤ that value.",
      "example": "public static int[] countingSort(int[] arr) {\n    // ... count occurrences ...\n    \n    // Build cumulative counts\n    for (int i = 1; i < range; i++) {\n        count[i] += count[i - 1];\n    }",
      "action": "continue",
      "next": "coding-place-elements-java"
    },
    {
      "stepId": "coding-place-elements-java",
      "mentorSays": "Create output array and place each element in its correct position using cumulative counts. We go backwards through the original array to maintain stability.",
      "example": "public static int[] countingSort(int[] arr) {\n    // ... cumulative counts ...\n    \n    // Place elements in sorted order\n    int[] output = new int[arr.length];\n    for (int i = arr.length - 1; i >= 0; i--) {\n        output[count[arr[i] - min] - 1] = arr[i];\n        count[arr[i] - min]--;\n    }\n    \n    return output;",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "test-code-java",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter calling countingSort(arr), it should return:\n[1, 2, 2, 3, 3, 4, 8]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter countingSort(arr):\n[1, 2, 2, 3, 3, 4, 8]",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in C++?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-cpp"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "variable-explanation-cpp",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'count') and put data inside it.\n\nFor example, 'int count = 0;' creates a variable that stores the number 0.",
      "example": "int count = 0;\n\nNow the variable refers to the number 0",
      "action": "continue",
      "next": "function-check-cpp"
    },
    {
      "stepId": "function-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in C++?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "array-check-cpp"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "function-explanation-cpp",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "int add(int a, int b) {\n    return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "array-check-cpp"
    },
    {
      "stepId": "array-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a vector is in C++?",
      "choices": [
        {
          "label": "Yes, I know vectors",
          "next": "counting-array-check-cpp"
        },
        {
          "label": "No, explain vectors",
          "next": "array-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "counting-array-check-cpp",
      "mentorSays": "Do you understand what a count array is?",
      "choices": [
        {
          "label": "Yes, I know counting-array",
          "next": "stable-sort-check-cpp"
        },
        {
          "label": "No, explain counting-array",
          "next": "counting-array-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "stable-sort-check-cpp",
      "mentorSays": "Do you understand what a stable sort is?",
      "choices": [
        {
          "label": "Yes, I know stable-sort",
          "next": "coding-start-cpp"
        },
        {
          "label": "No, explain stable-sort",
          "next": "stable-sort-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "stable-sort-explanation-cpp",
      "mentorSays": "A stable sort preserves the relative order of equal elements. Example: [(3,a), (1,b), (3,c), (1,d)]. Stable sort: [(1,b), (1,d), (3,a), (3,c)]. Notice: (1,b) comes before (1,d) - original order preserved! Counting sort IS stable when implemented correctly.\n\n// Stable sort preserves relative order:\n// Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n// Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n// Notice: (1,'b') before (1,'d') - original order preserved!\n\nGot it?",
      "example": "// Stable sort preserves relative order:\n// Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n// Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n// Notice: (1,'b') before (1,'d') - original order preserved!",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "counting-array-explanation-cpp",
      "mentorSays": "A count array tracks how many times each value appears. Example: arr = [3, 1, 2, 3, 1]. Range: 0 to 3. count[0] = 0, count[1] = 2, count[2] = 1, count[3] = 2. This is the foundation of counting sort!\n\n// Count array tracks occurrences:\nvector<int> arr = {3, 1, 2, 3, 1};\nvector<int> count(4, 0);  // for range 0-3\n\nfor (int num : arr) {\n    count[num]++;\n}\n// count = [0, 2, 1, 2]\n\nGot it?",
      "example": "// Count array tracks occurrences:\nvector<int> arr = {3, 1, 2, 3, 1};\nvector<int> count(4, 0);  // for range 0-3\n\nfor (int num : arr) {\n    count[num]++;\n}\n// count = [0, 2, 1, 2]",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "array-explanation-cpp",
      "mentorSays": "A vector is like an array - a collection of items that keeps them in order. Each item has a position number called an 'index'. Vector indices start counting from 0.",
      "example": "vector<int> arr = {1, 2, 3};\n\narr[0] = 1\narr[1] = 2\narr[2] = 3",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "coding-start-cpp",
      "mentorSays": "Perfect! Let's implement counting sort in C++. We'll create a function that counts occurrences and places elements in sorted order.",
      "example": "vector<int> countingSort(vector<int>& arr) {\n    // Your code here\n}",
      "action": "continue",
      "next": "coding-find-range-cpp"
    },
    {
      "stepId": "coding-find-range-cpp",
      "mentorSays": "First, let's find the minimum and maximum values to determine the range. We'll also handle the edge case of an empty vector.",
      "example": "vector<int> countingSort(vector<int>& arr) {\n    if (arr.empty()) return arr;\n    \n    // Find min and max\n    int min = arr[0];\n    int max = arr[0];\n    for (int i = 1; i < arr.size(); i++) {\n        if (arr[i] < min) min = arr[i];\n        if (arr[i] > max) max = arr[i];\n    }\n    \n    int range = max - min + 1;",
      "action": "continue",
      "next": "coding-create-count-cpp"
    },
    {
      "stepId": "coding-create-count-cpp",
      "mentorSays": "Now, create a count vector to store occurrences of each value. The size is the range (max - min + 1).",
      "example": "vector<int> countingSort(vector<int>& arr) {\n    // ... find range ...\n    \n    // Create count vector\n    vector<int> count(range, 0);",
      "action": "continue",
      "next": "coding-count-occurrences-cpp"
    },
    {
      "stepId": "coding-count-occurrences-cpp",
      "mentorSays": "Count how many times each value appears in the vector. We map each value to an index: value - min.",
      "example": "vector<int> countingSort(vector<int>& arr) {\n    // ... count vector ...\n    \n    // Count occurrences\n    for (int i = 0; i < arr.size(); i++) {\n        count[arr[i] - min]++;\n    }",
      "action": "continue",
      "next": "coding-cumulative-cpp"
    },
    {
      "stepId": "coding-cumulative-cpp",
      "mentorSays": "Convert count vector to cumulative counts. Each position now represents how many elements are â‰¤ that value.",
      "example": "vector<int> countingSort(vector<int>& arr) {\n    // ... count occurrences ...\n    \n    // Build cumulative counts\n    for (int i = 1; i < range; i++) {\n        count[i] += count[i - 1];\n    }",
      "action": "continue",
      "next": "coding-place-elements-cpp"
    },
    {
      "stepId": "coding-place-elements-cpp",
      "mentorSays": "Create output vector and place each element in its correct position using cumulative counts. We go backwards through the original vector to maintain stability.",
      "example": "vector<int> countingSort(vector<int>& arr) {\n    // ... cumulative counts ...\n    \n    // Place elements in sorted order\n    vector<int> output(arr.size());\n    for (int i = arr.size() - 1; i >= 0; i--) {\n        output[count[arr[i] - min] - 1] = arr[i];\n        count[arr[i] - min]--;\n    }\n    \n    return output;",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "test-code-cpp",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter calling countingSort(arr), it should return:\n[1, 2, 2, 3, 3, 4, 8]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter countingSort(arr):\n[1, 2, 2, 3, 3, 4, 8]",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-ts"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-ts"
        }
      ]
    },
    {
      "stepId": "variable-explanation-ts",
      "mentorSays": "A variable is like a labeled box where you can store a value. You give it a name (like 'arr' or 'count') and put data inside it.\n\nFor example, 'let count: number = 0;' creates a variable that stores the number 0.",
      "example": "let count: number = 0;\n\nNow the variable refers to the number 0",
      "action": "continue",
      "next": "function-check-ts"
    },
    {
      "stepId": "function-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know functions",
          "next": "array-check-ts"
        },
        {
          "label": "No, explain functions",
          "next": "function-explanation-ts"
        }
      ]
    },
    {
      "stepId": "function-explanation-ts",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.",
      "example": "function add(a: number, b: number): number {\n  return a + b;\n}\n\nadd(3, 5) returns 8",
      "action": "continue",
      "next": "array-check-ts"
    },
    {
      "stepId": "array-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what an array is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know arrays",
          "next": "counting-array-check-ts"
        },
        {
          "label": "No, explain arrays",
          "next": "array-explanation-ts"
        }
      ]
    },
    {
      "stepId": "counting-array-check-ts",
      "mentorSays": "Do you understand what a count array is?",
      "choices": [
        {
          "label": "Yes, I know counting-array",
          "next": "stable-sort-check-ts"
        },
        {
          "label": "No, explain counting-array",
          "next": "counting-array-explanation-ts"
        }
      ]
    },
    {
      "stepId": "stable-sort-check-ts",
      "mentorSays": "Do you understand what a stable sort is?",
      "choices": [
        {
          "label": "Yes, I know stable-sort",
          "next": "coding-start-ts"
        },
        {
          "label": "No, explain stable-sort",
          "next": "stable-sort-explanation-ts"
        }
      ]
    },
    {
      "stepId": "stable-sort-explanation-ts",
      "mentorSays": "A stable sort preserves the relative order of equal elements. Example: [(3,a), (1,b), (3,c), (1,d)]. Stable sort: [(1,b), (1,d), (3,a), (3,c)]. Notice: (1,b) comes before (1,d) - original order preserved! Counting sort IS stable when implemented correctly.\n\n// Stable sort preserves relative order:\n// Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n// Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n// Notice: (1,'b') before (1,'d') - original order preserved!\n\nGot it?",
      "example": "// Stable sort preserves relative order:\n// Input: [(3,'a'), (1,'b'), (3,'c'), (1,'d')]\n// Stable: [(1,'b'), (1,'d'), (3,'a'), (3,'c')]\n// Notice: (1,'b') before (1,'d') - original order preserved!",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "counting-array-explanation-ts",
      "mentorSays": "A count array tracks how many times each value appears. Example: arr = [3, 1, 2, 3, 1]. Range: 0 to 3. count[0] = 0, count[1] = 2, count[2] = 1, count[3] = 2. This is the foundation of counting sort!\n\n// Count array tracks occurrences:\nlet arr = [3, 1, 2, 3, 1];\nlet count: number[] = [0, 0, 0, 0];  // for range 0-3\n\nfor (let num of arr) {\n  count[num]++;\n}\n// count = [0, 2, 1, 2]\n\nGot it?",
      "example": "// Count array tracks occurrences:\nlet arr = [3, 1, 2, 3, 1];\nlet count: number[] = [0, 0, 0, 0];  // for range 0-3\n\nfor (let num of arr) {\n  count[num]++;\n}\n// count = [0, 2, 1, 2]",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "array-explanation-ts",
      "mentorSays": "An array is like a list of items that keeps them in order. Each item has a position number called an 'index'. Array indices start counting from 0.",
      "example": "arr: number[] = [1, 2, 3]\n\narr[0] = 1\narr[1] = 2\narr[2] = 3",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "coding-start-ts",
      "mentorSays": "Perfect! Let's implement counting sort in TypeScript. We'll create a function that counts occurrences and places elements in sorted order.",
      "example": "function countingSort(arr: number[]): number[] {\n  // Your code here\n}",
      "action": "continue",
      "next": "coding-find-range-ts"
    },
    {
      "stepId": "coding-find-range-ts",
      "mentorSays": "First, let's find the minimum and maximum values to determine the range. We'll also handle the edge case of an empty array.",
      "example": "function countingSort(arr: number[]): number[] {\n  if (arr.length === 0) return arr;\n  \n  // Find min and max\n  let min: number = arr[0];\n  let max: number = arr[0];\n  for (let i = 1; i < arr.length; i++) {\n    if (arr[i] < min) min = arr[i];\n    if (arr[i] > max) max = arr[i];\n  }\n  \n  const range: number = max - min + 1;",
      "action": "continue",
      "next": "coding-create-count-ts"
    },
    {
      "stepId": "coding-create-count-ts",
      "mentorSays": "Now, create a count array to store occurrences of each value. The size is the range (max - min + 1).",
      "example": "function countingSort(arr: number[]): number[] {\n  // ... find range ...\n  \n  // Create count array\n  const count: number[] = new Array(range).fill(0);",
      "action": "continue",
      "next": "coding-count-occurrences-ts"
    },
    {
      "stepId": "coding-count-occurrences-ts",
      "mentorSays": "Count how many times each value appears in the array. We map each value to an index: value - min.",
      "example": "function countingSort(arr: number[]): number[] {\n  // ... count array ...\n  \n  // Count occurrences\n  for (let i = 0; i < arr.length; i++) {\n    count[arr[i] - min]++;\n  }",
      "action": "continue",
      "next": "coding-cumulative-ts"
    },
    {
      "stepId": "coding-cumulative-ts",
      "mentorSays": "Convert count array to cumulative counts. Each position now represents how many elements are â‰¤ that value.",
      "example": "function countingSort(arr: number[]): number[] {\n  // ... count occurrences ...\n  \n  // Build cumulative counts\n  for (let i = 1; i < range; i++) {\n    count[i] += count[i - 1];\n  }",
      "action": "continue",
      "next": "coding-place-elements-ts"
    },
    {
      "stepId": "coding-place-elements-ts",
      "mentorSays": "Create output array and place each element in its correct position using cumulative counts. We go backwards through the original array to maintain stability.",
      "example": "function countingSort(arr: number[]): number[] {\n  // ... cumulative counts ...\n  \n  // Place elements in sorted order\n  const output: number[] = new Array(arr.length);\n  for (let i = arr.length - 1; i >= 0; i--) {\n    output[count[arr[i] - min] - 1] = arr[i];\n    count[arr[i] - min]--;\n  }\n  \n  return output;",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "test-code-ts",
      "mentorSays": "Perfect! Now test your code with the example we used earlier:\n\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter calling countingSort(arr), it should return:\n[1, 2, 2, 3, 3, 4, 8]\n\nTry it in your IDE or code editor!",
      "example": "Test input:\narr = [4, 2, 2, 8, 3, 3, 1]\n\nAfter countingSort(arr):\n[1, 2, 2, 3, 3, 4, 8]",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "final",
      "mentorSays": "ðŸŽ‰ Well done! You've learned counting sort. You understand how it counts occurrences and places elements efficiently!\n\nCounting sort is O(n + k) time - excellent for small ranges! Keep practicing!",
      "action": "continue"
    }
  ]
}