{
  "id": "course-schedule",
  "title": "Course Schedule",
  "pattern": "graph",
  "difficulty": "medium",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "title",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand what the Course Schedule problem asks for\n2. Detect cycles in a directed graph\n3. Use DFS with coloring (white/gray/black) to detect cycles\n4. Understand topological sort concept\n5. Implement the solution step by step in your chosen language",
      "action": "continue",
      "next": "problem-illustration"
    },
    {
      "stepId": "problem-illustration",
      "mentorSays": "Perfect! Now let's understand what the Course Schedule problem is asking.\n\n**Problem Definition:**\nThere are a total of `numCourses` courses you have to take, labeled from 0 to numCourses - 1. You are given an array `prerequisites` where prerequisites[i] = [ai, bi] indicates that you must take course bi before course ai.\n\nReturn `true` if you can finish all courses. Otherwise, return `false`.\n\n**Key Observations:**\n- This is a cycle detection problem in a directed graph\n- If there's a cycle, we can't complete all courses\n- We can model courses as nodes and prerequisites as edges\n- Use DFS with coloring: white (unvisited), gray (visiting), black (visited)\n\n**Example 1:** numCourses = 2, prerequisites = [[1,0]]\n\nGraph: 0 â†’ 1\n\nCourse 0 must be taken before course 1.\nNo cycle, so we can complete: 0 â†’ 1\nAnswer: true\n\n**Example 2:** numCourses = 2, prerequisites = [[1,0],[0,1]]\n\nGraph: 0 â†” 1 (cycle!)\n\nCourse 0 requires course 1, and course 1 requires course 0.\nCycle detected! Can't complete.\nAnswer: false\n\n**Step-by-step trace for Example 2 (DFS with coloring):**\n\nGraph: 0 â†” 1\n\nWe'll use DFS with three colors:\n- **White (0)**: Unvisited\n- **Gray (1)**: Currently visiting (in recursion stack)\n- **Black (2)**: Fully visited\n\n- **DFS(0)**:\n  - Mark 0 as gray (visiting)\n  - Visit neighbor 1: DFS(1)\n    - Mark 1 as gray\n    - Visit neighbor 0: DFS(0)\n      - 0 is gray! Cycle detected! Return false\n  - Return false\n\n**Key Insight:**\nIf we encounter a gray node during DFS, we've found a back edge = cycle!\n\n**What makes this tricky:**\n1. Understanding cycle detection in directed graphs\n2. Using three colors (white/gray/black)\n3. Detecting back edges (gray node = cycle)\n4. Building the graph from prerequisites\n\n**Common pitfalls:**\n- Not detecting cycles correctly\n- Confusing directed vs undirected graphs\n- Not handling disconnected components\n- Forgetting to mark nodes as black after processing",
      "example": "Example 1: numCourses=2, prerequisites=[[1,0]] â†’ true\nExample 2: numCourses=2, prerequisites=[[1,0],[0,1]] â†’ false",
      "action": "continue",
      "next": "thinking-challenge"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand what the problem wants, here's the real question:\n\nHow would YOU determine if all courses can be completed?\n\nThink about it for a moment. What approach feels natural to you?",
      "choices": [
        {
          "label": "Use DFS with coloring to detect cycles",
          "next": "explore-dfs"
        },
        {
          "label": "Use Kahn's algorithm (topological sort)",
          "next": "explore-kahn"
        },
        {
          "label": "Try all possible orderings",
          "next": "explore-brute"
        }
      ]
    },
    {
      "stepId": "explore-kahn",
      "mentorSays": "That's a great approach! Kahn's algorithm uses in-degree counting and a queue. It's efficient and works well!\n\nHowever, DFS with coloring is often simpler to implement. Would you like to learn that?",
      "action": "continue",
      "next": "explore-dfs"
    },
    {
      "stepId": "explore-brute",
      "mentorSays": "That's thorough, but trying all orderings is exponential time and inefficient.\n\nThere's a much more efficient approach using DFS. Would you like to learn that?",
      "action": "continue",
      "next": "explore-dfs"
    },
    {
      "stepId": "explore-dfs",
      "mentorSays": "Excellent choice! DFS with coloring is perfect for cycle detection. Here's the core idea:\n\n**The Algorithm:**\n1. **Build graph**: Create adjacency list from prerequisites\n2. **Color array**: Track node colors (0=white, 1=gray, 2=black)\n3. **DFS function**:\n   - If node is gray: cycle detected! Return false\n   - If node is black: already processed, return true\n   - Mark node as gray (visiting)\n   - For each neighbor: recursively DFS\n   - If any neighbor returns false, return false\n   - Mark node as black (visited)\n   - Return true\n4. **Check all nodes**: For each unvisited node, run DFS\n\n**Why it works**:\n- Gray nodes are in the current recursion path\n- If we see a gray node, we've found a back edge = cycle\n- Black nodes are fully processed (no cycle through them)\n\n**Key insight**: Gray node during DFS = back edge = cycle!\n\nThis is O(V + E) time and O(V + E) space! Now let's code it step by step.",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Great! Now let's code this solution. Which programming language would you like to use?",
      "choices": [
        {
          "label": "JavaScript",
          "next": "variable-check-js"
        },
        {
          "label": "Python",
          "next": "variable-check-python"
        },
        {
          "label": "Java",
          "next": "variable-check-java"
        },
        {
          "label": "C++",
          "next": "variable-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "variable-check-ts"
        }
      ]
    },
    {
      "stepId": "variable-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in JavaScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-js"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-js"
        }
      ]
    },
    {
      "stepId": "variable-explanation-js",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let graph = [];  // Adjacency list",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Do you know what a function is in JavaScript?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-js"
        },
        {
          "label": "No",
          "next": "function-explanation-js"
        }
      ]
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-js"
    },
    {
      "stepId": "parameter-check-js",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-js"
        },
        {
          "label": "No",
          "next": "parameter-explanation-js"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-js",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-js"
    },
    {
      "stepId": "graph-check-js",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "recursion-check-js"
        },
        {
          "label": "No",
          "next": "graph-explanation-js"
        }
      ]
    },
    {
      "stepId": "graph-explanation-js",
      "mentorSays": "A graph is a collection of nodes connected by edges.",
      "action": "continue",
      "next": "recursion-check-js"
    },
    {
      "stepId": "recursion-check-js",
      "mentorSays": "We'll use recursion for DFS. Do you know what recursion is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-js"
        },
        {
          "label": "No",
          "next": "recursion-explanation-js"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-js",
      "mentorSays": "Recursion is when a function calls itself.",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Perfect! Let's implement course schedule in JavaScript.",
      "example": "function canFinish(numCourses, prerequisites) {\n  \n}",
      "action": "continue",
      "next": "coding-build-graph-js"
    },
    {
      "stepId": "coding-build-graph-js",
      "mentorSays": "Build the adjacency list graph from prerequisites.",
      "example": "function canFinish(numCourses, prerequisites) {\n  // Build graph\n  const graph = Array(numCourses).fill(0).map(() => []);\n  for (let [course, prereq] of prerequisites) {\n    graph[prereq].push(course);\n  }\n  \n}",
      "action": "continue",
      "next": "coding-init-color-js"
    },
    {
      "stepId": "coding-init-color-js",
      "mentorSays": "Initialize color array (0=white, 1=gray, 2=black).",
      "example": "function canFinish(numCourses, prerequisites) {\n  const graph = Array(numCourses).fill(0).map(() => []);\n  for (let [course, prereq] of prerequisites) {\n    graph[prereq].push(course);\n  }\n  \n  const color = Array(numCourses).fill(0);  // 0=white, 1=gray, 2=black\n  \n}",
      "action": "continue",
      "next": "coding-dfs-helper-js"
    },
    {
      "stepId": "coding-dfs-helper-js",
      "mentorSays": "Create DFS helper function that detects cycles.",
      "example": "function canFinish(numCourses, prerequisites) {\n  const graph = Array(numCourses).fill(0).map(() => []);\n  for (let [course, prereq] of prerequisites) {\n    graph[prereq].push(course);\n  }\n  const color = Array(numCourses).fill(0);\n  \n  function dfs(node) {\n    // DFS logic\n  }\n  \n}",
      "action": "continue",
      "next": "coding-check-cycle-js"
    },
    {
      "stepId": "coding-check-cycle-js",
      "mentorSays": "In DFS, check if node is gray (cycle detected).",
      "example": "function canFinish(numCourses, prerequisites) {\n  // ... graph and color setup ...\n  \n  function dfs(node) {\n    if (color[node] === 1) return false;  // Gray = cycle!\n    if (color[node] === 2) return true;   // Black = processed\n    \n  }\n  \n}",
      "action": "continue",
      "next": "coding-mark-gray-js"
    },
    {
      "stepId": "coding-mark-gray-js",
      "mentorSays": "Mark node as gray, visit neighbors, mark as black.",
      "example": "function canFinish(numCourses, prerequisites) {\n  // ... setup ...\n  \n  function dfs(node) {\n    if (color[node] === 1) return false;\n    if (color[node] === 2) return true;\n    \n    color[node] = 1;  // Mark as gray\n    \n    for (let neighbor of graph[node]) {\n      if (!dfs(neighbor)) return false;\n    }\n    \n    color[node] = 2;  // Mark as black\n    return true;\n  }\n  \n}",
      "action": "continue",
      "next": "coding-call-dfs-js"
    },
    {
      "stepId": "coding-call-dfs-js",
      "mentorSays": "Call DFS for all nodes and return result.",
      "example": "function canFinish(numCourses, prerequisites) {\n  const graph = Array(numCourses).fill(0).map(() => []);\n  for (let [course, prereq] of prerequisites) {\n    graph[prereq].push(course);\n  }\n  const color = Array(numCourses).fill(0);\n  \n  function dfs(node) {\n    if (color[node] === 1) return false;\n    if (color[node] === 2) return true;\n    \n    color[node] = 1;\n    for (let neighbor of graph[node]) {\n      if (!dfs(neighbor)) return false;\n    }\n    color[node] = 2;\n    return true;\n  }\n  \n  for (let i = 0; i < numCourses; i++) {\n    if (!dfs(i)) return false;\n  }\n  \n  return true;\n}",
      "action": "continue",
      "next": "test-code-js"
    },
    {
      "stepId": "test-code-js",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** numCourses = 2, prerequisites = [[1,0]]\nExpected: true (no cycle)\n\n**Test 2:** numCourses = 2, prerequisites = [[1,0],[0,1]]\nExpected: false (cycle)\n\n**Test 3:** numCourses = 3, prerequisites = [[1,0],[2,1]]\nExpected: true (chain: 0â†’1â†’2)\n\n**Test 4:** numCourses = 3, prerequisites = [[1,0],[0,2],[2,1]]\nExpected: false (cycle)\n\n**Test 5:** numCourses = 1, prerequisites = []\nExpected: true (single course)\n\n**Test 6:** numCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]\nExpected: true (DAG)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: numCourses=2, prerequisites=[[1,0]] â†’ true\nTest 2: numCourses=2, prerequisites=[[1,0],[0,1]] â†’ false",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-python",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Python?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-python"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-python"
        }
      ]
    },
    {
      "stepId": "variable-explanation-python",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": " graph = [];  // Adjacency list",
      "action": "continue",
      "next": "function-check-python"
    },
    {
      "stepId": "function-check-python",
      "mentorSays": "Do you know what a function is in Python?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-python"
        },
        {
          "label": "No",
          "next": "function-explanation-python"
        }
      ]
    },
    {
      "stepId": "function-explanation-python",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-python"
    },
    {
      "stepId": "parameter-check-python",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-python"
        },
        {
          "label": "No",
          "next": "parameter-explanation-python"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-python",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-python"
    },
    {
      "stepId": "graph-check-python",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "recursion-check-python"
        },
        {
          "label": "No",
          "next": "graph-explanation-python"
        }
      ]
    },
    {
      "stepId": "graph-explanation-python",
      "mentorSays": "A graph is a collection of nodes connected by edges.",
      "action": "continue",
      "next": "recursion-check-python"
    },
    {
      "stepId": "recursion-check-python",
      "mentorSays": "We'll use recursion for DFS. Do you know what recursion is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-python"
        },
        {
          "label": "No",
          "next": "recursion-explanation-python"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-python",
      "mentorSays": "Recursion is when a function calls itself.",
      "action": "continue",
      "next": "coding-start-python"
    },
    {
      "stepId": "coding-start-python",
      "mentorSays": "Perfect! Let's implement the solution in Python.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-build-graph-python"
    },
    {
      "stepId": "coding-build-graph-python",
      "mentorSays": "Build adjacency list from prerequisites.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-init-color-python"
    },
    {
      "stepId": "coding-init-color-python",
      "mentorSays": "Initialize color array.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-dfs-helper-python"
    },
    {
      "stepId": "coding-dfs-helper-python",
      "mentorSays": "Create DFS helper function.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-check-cycle-python"
    },
    {
      "stepId": "coding-check-cycle-python",
      "mentorSays": "Check for cycles (gray node).",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-mark-gray-python"
    },
    {
      "stepId": "coding-mark-gray-python",
      "mentorSays": "Mark gray, visit neighbors, mark black.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "coding-call-dfs-python"
    },
    {
      "stepId": "coding-call-dfs-python",
      "mentorSays": "Call DFS for all nodes, return result.",
      "example": "// Python implementation",
      "action": "continue",
      "next": "test-code-python"
    },
    {
      "stepId": "test-code-python",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** numCourses = 2, prerequisites = [[1,0]]\nExpected: true (no cycle)\n\n**Test 2:** numCourses = 2, prerequisites = [[1,0],[0,1]]\nExpected: false (cycle)\n\n**Test 3:** numCourses = 3, prerequisites = [[1,0],[2,1]]\nExpected: true (chain: 0â†’1â†’2)\n\n**Test 4:** numCourses = 3, prerequisites = [[1,0],[0,2],[2,1]]\nExpected: false (cycle)\n\n**Test 5:** numCourses = 1, prerequisites = []\nExpected: true (single course)\n\n**Test 6:** numCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]\nExpected: true (DAG)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: numCourses=2, prerequisites=[[1,0]] â†’ true\nTest 2: numCourses=2, prerequisites=[[1,0],[0,1]] â†’ false",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-java",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in Java?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-java"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-java"
        }
      ]
    },
    {
      "stepId": "variable-explanation-java",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "boolean graph = [];  // Adjacency list",
      "action": "continue",
      "next": "function-check-java"
    },
    {
      "stepId": "function-check-java",
      "mentorSays": "Do you know what a function is in Java?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-java"
        },
        {
          "label": "No",
          "next": "function-explanation-java"
        }
      ]
    },
    {
      "stepId": "function-explanation-java",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-java"
    },
    {
      "stepId": "parameter-check-java",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-java"
        },
        {
          "label": "No",
          "next": "parameter-explanation-java"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-java",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-java"
    },
    {
      "stepId": "graph-check-java",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "recursion-check-java"
        },
        {
          "label": "No",
          "next": "graph-explanation-java"
        }
      ]
    },
    {
      "stepId": "graph-explanation-java",
      "mentorSays": "A graph is a collection of nodes connected by edges.",
      "action": "continue",
      "next": "recursion-check-java"
    },
    {
      "stepId": "recursion-check-java",
      "mentorSays": "We'll use recursion for DFS. Do you know what recursion is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-java"
        },
        {
          "label": "No",
          "next": "recursion-explanation-java"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-java",
      "mentorSays": "Recursion is when a function calls itself.",
      "action": "continue",
      "next": "coding-start-java"
    },
    {
      "stepId": "coding-start-java",
      "mentorSays": "Perfect! Let's implement the solution in Java.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-build-graph-java"
    },
    {
      "stepId": "coding-build-graph-java",
      "mentorSays": "Build adjacency list from prerequisites.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-init-color-java"
    },
    {
      "stepId": "coding-init-color-java",
      "mentorSays": "Initialize color array.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-dfs-helper-java"
    },
    {
      "stepId": "coding-dfs-helper-java",
      "mentorSays": "Create DFS helper function.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-check-cycle-java"
    },
    {
      "stepId": "coding-check-cycle-java",
      "mentorSays": "Check for cycles (gray node).",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-mark-gray-java"
    },
    {
      "stepId": "coding-mark-gray-java",
      "mentorSays": "Mark gray, visit neighbors, mark black.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "coding-call-dfs-java"
    },
    {
      "stepId": "coding-call-dfs-java",
      "mentorSays": "Call DFS for all nodes, return result.",
      "example": "// Java implementation",
      "action": "continue",
      "next": "test-code-java"
    },
    {
      "stepId": "test-code-java",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** numCourses = 2, prerequisites = [[1,0]]\nExpected: true (no cycle)\n\n**Test 2:** numCourses = 2, prerequisites = [[1,0],[0,1]]\nExpected: false (cycle)\n\n**Test 3:** numCourses = 3, prerequisites = [[1,0],[2,1]]\nExpected: true (chain: 0â†’1â†’2)\n\n**Test 4:** numCourses = 3, prerequisites = [[1,0],[0,2],[2,1]]\nExpected: false (cycle)\n\n**Test 5:** numCourses = 1, prerequisites = []\nExpected: true (single course)\n\n**Test 6:** numCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]\nExpected: true (DAG)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: numCourses=2, prerequisites=[[1,0]] â†’ true\nTest 2: numCourses=2, prerequisites=[[1,0],[0,1]] â†’ false",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-cpp",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in C++?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-cpp"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "variable-explanation-cpp",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "bool graph = [];  // Adjacency list",
      "action": "continue",
      "next": "function-check-cpp"
    },
    {
      "stepId": "function-check-cpp",
      "mentorSays": "Do you know what a function is in C++?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-cpp"
        },
        {
          "label": "No",
          "next": "function-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "function-explanation-cpp",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-cpp"
    },
    {
      "stepId": "parameter-check-cpp",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-cpp"
        },
        {
          "label": "No",
          "next": "parameter-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-cpp",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-cpp"
    },
    {
      "stepId": "graph-check-cpp",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "recursion-check-cpp"
        },
        {
          "label": "No",
          "next": "graph-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "graph-explanation-cpp",
      "mentorSays": "A graph is a collection of nodes connected by edges.",
      "action": "continue",
      "next": "recursion-check-cpp"
    },
    {
      "stepId": "recursion-check-cpp",
      "mentorSays": "We'll use recursion for DFS. Do you know what recursion is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-cpp"
        },
        {
          "label": "No",
          "next": "recursion-explanation-cpp"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-cpp",
      "mentorSays": "Recursion is when a function calls itself.",
      "action": "continue",
      "next": "coding-start-cpp"
    },
    {
      "stepId": "coding-start-cpp",
      "mentorSays": "Perfect! Let's implement the solution in C++.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-build-graph-cpp"
    },
    {
      "stepId": "coding-build-graph-cpp",
      "mentorSays": "Build adjacency list from prerequisites.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-init-color-cpp"
    },
    {
      "stepId": "coding-init-color-cpp",
      "mentorSays": "Initialize color array.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-dfs-helper-cpp"
    },
    {
      "stepId": "coding-dfs-helper-cpp",
      "mentorSays": "Create DFS helper function.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-check-cycle-cpp"
    },
    {
      "stepId": "coding-check-cycle-cpp",
      "mentorSays": "Check for cycles (gray node).",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-mark-gray-cpp"
    },
    {
      "stepId": "coding-mark-gray-cpp",
      "mentorSays": "Mark gray, visit neighbors, mark black.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "coding-call-dfs-cpp"
    },
    {
      "stepId": "coding-call-dfs-cpp",
      "mentorSays": "Call DFS for all nodes, return result.",
      "example": "// C++ implementation",
      "action": "continue",
      "next": "test-code-cpp"
    },
    {
      "stepId": "test-code-cpp",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** numCourses = 2, prerequisites = [[1,0]]\nExpected: true (no cycle)\n\n**Test 2:** numCourses = 2, prerequisites = [[1,0],[0,1]]\nExpected: false (cycle)\n\n**Test 3:** numCourses = 3, prerequisites = [[1,0],[2,1]]\nExpected: true (chain: 0â†’1â†’2)\n\n**Test 4:** numCourses = 3, prerequisites = [[1,0],[0,2],[2,1]]\nExpected: false (cycle)\n\n**Test 5:** numCourses = 1, prerequisites = []\nExpected: true (single course)\n\n**Test 6:** numCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]\nExpected: true (DAG)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: numCourses=2, prerequisites=[[1,0]] â†’ true\nTest 2: numCourses=2, prerequisites=[[1,0],[0,1]] â†’ false",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "variable-check-ts",
      "mentorSays": "Before we start coding, let me ask: Do you know what a variable is in TypeScript?",
      "choices": [
        {
          "label": "Yes, I know variables",
          "next": "function-check-ts"
        },
        {
          "label": "No, explain variables",
          "next": "variable-explanation-ts"
        }
      ]
    },
    {
      "stepId": "variable-explanation-ts",
      "mentorSays": "A variable is like a labeled box where you can store a value.",
      "example": "let graph = [];  // Adjacency list",
      "action": "continue",
      "next": "function-check-ts"
    },
    {
      "stepId": "function-check-ts",
      "mentorSays": "Do you know what a function is in TypeScript?",
      "choices": [
        {
          "label": "Yes",
          "next": "parameter-check-ts"
        },
        {
          "label": "No",
          "next": "function-explanation-ts"
        }
      ]
    },
    {
      "stepId": "function-explanation-ts",
      "mentorSays": "A function is a reusable block of code.",
      "action": "continue",
      "next": "parameter-check-ts"
    },
    {
      "stepId": "parameter-check-ts",
      "mentorSays": "Do you know what parameters are?",
      "choices": [
        {
          "label": "Yes",
          "next": "graph-check-ts"
        },
        {
          "label": "No",
          "next": "parameter-explanation-ts"
        }
      ]
    },
    {
      "stepId": "parameter-explanation-ts",
      "mentorSays": "Parameters are inputs to a function.",
      "action": "continue",
      "next": "graph-check-ts"
    },
    {
      "stepId": "graph-check-ts",
      "mentorSays": "To solve this, we need to work with graphs. Do you know what a graph is?",
      "choices": [
        {
          "label": "Yes",
          "next": "recursion-check-ts"
        },
        {
          "label": "No",
          "next": "graph-explanation-ts"
        }
      ]
    },
    {
      "stepId": "graph-explanation-ts",
      "mentorSays": "A graph is a collection of nodes connected by edges.",
      "action": "continue",
      "next": "recursion-check-ts"
    },
    {
      "stepId": "recursion-check-ts",
      "mentorSays": "We'll use recursion for DFS. Do you know what recursion is?",
      "choices": [
        {
          "label": "Yes",
          "next": "coding-start-ts"
        },
        {
          "label": "No",
          "next": "recursion-explanation-ts"
        }
      ]
    },
    {
      "stepId": "recursion-explanation-ts",
      "mentorSays": "Recursion is when a function calls itself.",
      "action": "continue",
      "next": "coding-start-ts"
    },
    {
      "stepId": "coding-start-ts",
      "mentorSays": "Perfect! Let's implement the solution in TypeScript.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-build-graph-ts"
    },
    {
      "stepId": "coding-build-graph-ts",
      "mentorSays": "Build adjacency list from prerequisites.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-init-color-ts"
    },
    {
      "stepId": "coding-init-color-ts",
      "mentorSays": "Initialize color array.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-dfs-helper-ts"
    },
    {
      "stepId": "coding-dfs-helper-ts",
      "mentorSays": "Create DFS helper function.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-check-cycle-ts"
    },
    {
      "stepId": "coding-check-cycle-ts",
      "mentorSays": "Check for cycles (gray node).",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-mark-gray-ts"
    },
    {
      "stepId": "coding-mark-gray-ts",
      "mentorSays": "Mark gray, visit neighbors, mark black.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "coding-call-dfs-ts"
    },
    {
      "stepId": "coding-call-dfs-ts",
      "mentorSays": "Call DFS for all nodes, return result.",
      "example": "// TypeScript implementation",
      "action": "continue",
      "next": "test-code-ts"
    },
    {
      "stepId": "test-code-ts",
      "mentorSays": "Perfect! Now test your code with multiple test cases:\n\n**Test 1:** numCourses = 2, prerequisites = [[1,0]]\nExpected: true (no cycle)\n\n**Test 2:** numCourses = 2, prerequisites = [[1,0],[0,1]]\nExpected: false (cycle)\n\n**Test 3:** numCourses = 3, prerequisites = [[1,0],[2,1]]\nExpected: true (chain: 0â†’1â†’2)\n\n**Test 4:** numCourses = 3, prerequisites = [[1,0],[0,2],[2,1]]\nExpected: false (cycle)\n\n**Test 5:** numCourses = 1, prerequisites = []\nExpected: true (single course)\n\n**Test 6:** numCourses = 4, prerequisites = [[1,0],[2,0],[3,1],[3,2]]\nExpected: true (DAG)\n\nTry these in your IDE or code editor!",
      "example": "Test 1: numCourses=2, prerequisites=[[1,0]] â†’ true\nTest 2: numCourses=2, prerequisites=[[1,0],[0,1]] â†’ false",
      "action": "continue",
      "next": "final"
    },
    {
      "stepId": "final",
      "mentorSays": "ðŸŽ‰ Well done! You've successfully implemented Course Schedule!\n\n**Time Complexity:** O(V + E)\n- V = numCourses, E = number of prerequisites\n- We visit each node and edge once\n\n**Space Complexity:** O(V + E)\n- Graph uses O(V + E) space\n- Color array uses O(V) space\n- Recursion stack uses O(V) space in worst case\n\n**Key Takeaways:**\n1. **Cycle detection**: Gray node during DFS = cycle\n2. **Three colors**: White (unvisited), Gray (visiting), Black (visited)\n3. **Back edge**: Edge to gray node = cycle\n4. **Graph building**: Convert prerequisites to adjacency list\n5. **DFS**: Recursively visit all neighbors\n\n**Related Practice Problems:**\n- Course Schedule II (LeetCode #210) - return ordering\n- Alien Dictionary (LeetCode #269) - similar topological sort\n- Graph Valid Tree (LeetCode #261) - cycle detection\n\nKeep practicing graph problems - they're common in interviews!",
      "action": "continue"
    }
  ]
}