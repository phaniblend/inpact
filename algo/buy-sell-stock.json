{
  "id": "buy-sell-stock",
  "title": "Best time to buy and sell stock",
  "pattern": "greedy",
  "difficulty": "easy",
  "language": "javascript",
  "status": "draft",
  "flow": [
    {
      "stepId": "objectives",
      "mentorSays": "Hey! Welcome to the Best time to buy and sell stock lesson.\n\nIn this lesson, you'll learn a problem-solving pattern that shows up in coding interviews.\n\nAfter this, you'll be able to:\n- Understand the Best time to buy and sell stock problem\n- Recognize the greedy pattern\n- Build a complete solution step-by-step\n\nLet's dive in!",
      "action": "continue",
      "next": "language-selection"
    },
    {
      "stepId": "language-selection",
      "mentorSays": "Before we dive into the problem, which programming language would you like to use?\n\nThis will help me make sure you have the right building blocks.",
      "choices": [
        {
          "label": "JavaScript",
          "next": "prereq-check-js"
        },
        {
          "label": "Python",
          "next": "prereq-check-python"
        },
        {
          "label": "Java",
          "next": "prereq-check-java"
        },
        {
          "label": "C++",
          "next": "prereq-check-cpp"
        },
        {
          "label": "TypeScript",
          "next": "prereq-check-ts"
        }
      ]
    },
    {
      "stepId": "prereq-check-js",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in JavaScript, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-js"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-js"
        }
      ]
    },
    {
      "stepId": "prereq-check-python",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in Python, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-python"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-python"
        }
      ]
    },
    {
      "stepId": "prereq-check-java",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in Java, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-java"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-java"
        }
      ]
    },
    {
      "stepId": "prereq-check-cpp",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in C++, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-cpp"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-cpp"
        }
      ]
    },
    {
      "stepId": "prereq-check-ts",
      "mentorSays": "Great choice! Before we start, let me make sure you have the building blocks.\n\nTo solve this problem in TypeScript, you'll need to know:\n- **Arrays** - How to store and access lists of values\n- **Loops** - How to iterate through data\n- **Conditionals** - How to make decisions in code\n\nDo you feel confident with these concepts?",
      "choices": [
        {
          "label": "Yes, I know them all",
          "next": "problem-understanding"
        },
        {
          "label": "No, please explain them",
          "next": "teach-prereqs-ts"
        },
        {
          "label": "I know some, not all",
          "next": "select-prereqs-ts"
        }
      ]
    },
    {
      "stepId": "teach-all-prereqs-js",
      "mentorSays": "Great! Let me teach you the JavaScript concepts you'll need.",
      "action": "continue",
      "next": "function-check-js"
    },
    {
      "stepId": "function-check-js",
      "mentorSays": "Before we start coding, let me ask: Do you know what a function is in JavaScript?",
      "example": "",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "function-explanation-js",
      "mentorSays": "A function is a reusable block of code. You give it inputs (called parameters), and it can return an output.\n\nThink of it like a recipe: you provide ingredients (parameters), the function does the work, and gives you a result (return value).",
      "example": "function maxProfit(prices) {\n  return 0;\n}\n\nmaxProfit([7, 1, 5, 3, 6, 4]) returns 5",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "loop-check-js",
      "mentorSays": "To solve this problem, we'll need to use a loop to iterate through the prices. Do you know what a loop is in JavaScript?",
      "example": "",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "loop-explanation-js",
      "mentorSays": "A loop lets you repeat code multiple times. A 'for' loop in JavaScript runs code for each item in a sequence.\n\nFor example, you can loop through an array to check each price one by one.",
      "example": "for (let i = 0; i < prices.length; i++) {\n  // Process prices[i]\n}",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "teach-all-prereqs-python",
      "mentorSays": "Let me explain the Python concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "teach-all-prereqs-java",
      "mentorSays": "Let me explain the Java concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "teach-all-prereqs-cpp",
      "mentorSays": "Let me explain the C++ concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "teach-all-prereqs-ts",
      "mentorSays": "Let me explain the TypeScript concepts you'll need.\n\n[Prerequisite teaching will be expanded in Phase 2]\n\nFor now, let's continue to the problem!",
      "action": "continue",
      "next": "problem-understanding"
    },
    {
      "stepId": "problem-understanding",
      "mentorSays": "At the end of this lesson, you will be able to:\n\n1. Understand what the Best Time to Buy and Sell Stock problem asks for\n2. Use a greedy approach to track minimum price and maximum profit\n3. Find the maximum profit from one buy and one sell transaction\n4. Implement the solution step by step in your chosen language",
      "example": null,
      "action": "continue",
      "next": "approach-exploration"
    },
    {
      "stepId": "thinking-challenge",
      "mentorSays": "Now that you understand the problem, how would YOU approach solving it?\n\nThink about it for a moment.",
      "choices": [
        {
          "label": "Check every possibility",
          "next": "explore-brute-force"
        },
        {
          "label": "Use a smarter approach",
          "next": "explore-optimal"
        },
        {
          "label": "I'm not sure, show me",
          "next": "explore-optimal"
        }
      ]
    },
    {
      "stepId": "explore-solution",
      "mentorSays": "Let me show you the optimal approach for this problem. [Strategy will be extracted from original lesson]",
      "action": "continue",
      "next": "solution-finalized"
    },
    {
      "stepId": "approach-exploration",
      "mentorSays": "Now that you understand the problem, let's think about how to solve it.\n\nWhat approach feels natural to you?",
      "choices": [
        {
          "label": "Try the straightforward approach first",
          "next": "explore-solution"
        },
        {
          "label": "Show me the optimal solution",
          "next": "explore-solution"
        }
      ]
    },
    {
      "stepId": "explore-brute-force",
      "mentorSays": "The brute force approach would check every possibility.\n\nThis works but is usually slow (O(n squared) or worse).\n\nLet's look at a smarter approach!",
      "action": "continue",
      "next": "explore-optimal"
    },
    {
      "stepId": "explore-optimal",
      "mentorSays": "The optimal approach uses a smarter strategy to avoid unnecessary work.\n\n[Strategy details will be added in Phase 2]",
      "action": "continue",
      "next": "solution-finalized"
    },
    {
      "stepId": "solution-finalized",
      "mentorSays": "Perfect! We've explored the approach. Now let's code the optimal solution.\n\nReady to write some code?",
      "action": "continue",
      "next": "coding-start-js"
    },
    {
      "stepId": "coding-start-js",
      "mentorSays": "Perfect! Let's implement the best time to buy and sell stock solution in JavaScript. We'll create a function that takes an array of prices and returns the maximum profit.",
      "example": "function maxProfit(prices) {\n  \n}",
      "action": "continue",
      "next": "coding-init-vars-js"
    },
    {
      "stepId": "coding-init-vars-js",
      "mentorSays": "First, initialize variables to track the minimum price and maximum profit.",
      "example": "function maxProfit(prices) {\n  let minPrice = prices[0];\n  let maxProfit = 0;\n}",
      "action": "continue",
      "next": "coding-loop-js"
    },
    {
      "stepId": "coding-loop-js",
      "mentorSays": "Now, create a loop to iterate through all prices starting from index 1.",
      "example": "function maxProfit(prices) {\n  let minPrice = prices[0];\n  let maxProfit = 0;\n  \n  for (let i = 1; i < prices.length; i++) {\n    \n  }\n}",
      "action": "continue",
      "next": "coding-update-min-js"
    },
    {
      "stepId": "coding-update-min-js",
      "mentorSays": "Inside the loop, update the minimum price if we find a lower price.",
      "example": "function maxProfit(prices) {\n  let minPrice = prices[0];\n  let maxProfit = 0;\n  \n  for (let i = 1; i < prices.length; i++) {\n    if (prices[i] < minPrice) {\n      minPrice = prices[i];\n    }\n  }\n}",
      "action": "continue",
      "next": "coding-calculate-profit-js"
    },
    {
      "stepId": "coding-calculate-profit-js",
      "mentorSays": "Calculate the profit if we sell today (current price - minimum price) and update maxProfit if this profit is larger.",
      "example": "function maxProfit(prices) {\n  let minPrice = prices[0];\n  let maxProfit = 0;\n  \n  for (let i = 1; i < prices.length; i++) {\n    if (prices[i] < minPrice) {\n      minPrice = prices[i];\n    }\n    \n    const profit = prices[i] - minPrice;\n    if (profit > maxProfit) {\n      maxProfit = profit;\n    }\n  }\n}",
      "action": "continue",
      "next": "coding-edge-case-js"
    },
    {
      "stepId": "coding-edge-case-js",
      "mentorSays": "Before we return, let's handle an important edge case.\n\nWhat if there's no profitable trade? Our profit stays at 0, which is correct!\n\nLet's verify our logic handles this:\n- If prices only decrease, minPrice keeps updating but profit stays 0\n- If prices never go up, we correctly return 0\n\nOur code already handles this perfectly - no changes needed. But it's important to think through edge cases!",
      "example": "function maxProfit(prices) {\n  let minPrice = prices[0];\n  let maxProfit = 0;\n  \n  for (let i = 1; i < prices.length; i++) {\n    if (prices[i] < minPrice) {\n      minPrice = prices[i];\n    }\n    \n    const profit = prices[i] - minPrice;\n    if (profit > maxProfit) {\n      maxProfit = profit;\n    }\n  }\n  \n  // Edge case: If no profit, returns 0 âœ“\n  return maxProfit;\n}",
      "action": "continue",
      "next": "coding-edge-case-js"
    },
    {
      "stepId": "coding-return-js",
      "mentorSays": "Finally, return the maximum profit.",
      "example": "function maxProfit(prices) {\n  let minPrice = prices[0];\n  let maxProfit = 0;\n  \n  for (let i = 1; i < prices.length; i++) {\n    if (prices[i] < minPrice) {\n      minPrice = prices[i];\n    }\n    \n    const profit = prices[i] - minPrice;\n    if (profit > maxProfit) {\n      maxProfit = profit;\n    }\n  }\n  \n  return maxProfit;\n}",
      "action": "continue",
      "next": "completion"
    },
    {
      "stepId": "completion",
      "mentorSays": "ðŸŽ‰ **Congratulations!** You just solved Best time to buy and sell stock!\n\n**What you've mastered:**\nâœ“ Understanding the problem requirements\nâœ“ Choosing an efficient approach\nâœ“ Building a complete solution from scratch\n\nYou're now ready to tackle more algorithms. Keep going! ðŸš€",
      "action": "complete"
    }
  ],
  "migrated": true,
  "migration_version": "5.0-light-touch",
  "migration_date": "2025-12-30"
}